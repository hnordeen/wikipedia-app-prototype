{"ast":null,"code":"import React from'react';import{useNavigate}from'react-router-dom';import{formatTitleForDisplay,formatTitleForUrl}from'../utils/titleUtils';import{useHistory}from'../hooks/useHistory';import{getHistoryInsights}from'../services/historyService';import'./HistoryPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HistoryPage=()=>{const navigate=useNavigate();const{groupedHistory,weeklyCount}=useHistory();const insights=getHistoryInsights();const handleArticleClick=title=>{navigate(\"/article/\".concat(formatTitleForUrl(title)));};const formatTime=timestamp=>{return new Date(timestamp).toLocaleTimeString(undefined,{hour:'numeric',minute:'numeric'});};const formatHour=hour=>{return new Date(2020,0,1,hour).toLocaleTimeString(undefined,{hour:'numeric',hour12:true});};const isToday=dateString=>{const today=new Date().toLocaleDateString(undefined,{month:'long',day:'numeric',year:'numeric'});return dateString===today;};const isYesterday=dateString=>{const yesterday=new Date(Date.now()-86400000).toLocaleDateString(undefined,{month:'long',day:'numeric',year:'numeric'});return dateString===yesterday;};const formatDate=dateString=>{if(isToday(dateString))return'Today';if(isYesterday(dateString))return'Yesterday';return dateString;};const renderDetailedInsights=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"insights-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"insight-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"insight-value\",children:insights.todayCount}),/*#__PURE__*/_jsx(\"div\",{className:\"insight-label\",children:\"Articles read today\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"insight-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"insight-value\",children:insights.weeklyCount}),/*#__PURE__*/_jsx(\"div\",{className:\"insight-label\",children:\"Articles this week\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"insight-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"insight-value\",children:insights.currentStreak.days}),/*#__PURE__*/_jsx(\"div\",{className:\"insight-label\",children:\"Day streak\"}),insights.currentStreak.days>0&&/*#__PURE__*/_jsx(\"div\",{className:\"streak-badge \".concat(insights.currentStreak.ongoing?'':'inactive'),children:insights.currentStreak.ongoing?'Active':'Ended'})]}),insights.mostActiveHour.count>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"insight-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"most-active-hour\",children:formatHour(insights.mostActiveHour.hour)}),/*#__PURE__*/_jsx(\"div\",{className:\"most-active-label\",children:\"Most active reading time\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"insight-label\",children:[\"(\",insights.mostActiveHour.count,\" articles)\"]})]})]});if(Object.keys(groupedHistory).length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"history-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"history-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"header-content\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"history-title\",children:\"Activity\"})})}),renderDetailedInsights(),/*#__PURE__*/_jsxs(\"div\",{className:\"history-empty\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"No Activity\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Articles you view will appear here\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"history-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"history-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"header-content\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"history-title\",children:\"Activity\"})})}),renderDetailedInsights(),/*#__PURE__*/_jsx(\"div\",{className:\"history-list\",children:Object.entries(groupedHistory).map(_ref=>{let[date,items]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"history-group\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"history-date-header\",children:formatDate(date)}),items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"history-item\",onClick:()=>handleArticleClick(item.title),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history-item-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:formatTitleForDisplay(item.title)}),/*#__PURE__*/_jsx(\"p\",{className:\"history-snippet\",children:item.snippet}),/*#__PURE__*/_jsx(\"span\",{className:\"history-date\",children:formatTime(item.timestamp)})]}),item.thumbnail&&/*#__PURE__*/_jsx(\"div\",{className:\"history-thumbnail\",children:/*#__PURE__*/_jsx(\"img\",{src:item.thumbnail.url,alt:item.thumbnail.description||item.title,loading:\"lazy\"})})]},\"\".concat(item.title,\"-\").concat(item.timestamp)))]},date);})})]});};export default HistoryPage;","map":{"version":3,"names":["React","useNavigate","formatTitleForDisplay","formatTitleForUrl","useHistory","getHistoryInsights","jsx","_jsx","jsxs","_jsxs","HistoryPage","navigate","groupedHistory","weeklyCount","insights","handleArticleClick","title","concat","formatTime","timestamp","Date","toLocaleTimeString","undefined","hour","minute","formatHour","hour12","isToday","dateString","today","toLocaleDateString","month","day","year","isYesterday","yesterday","now","formatDate","renderDetailedInsights","className","children","todayCount","currentStreak","days","ongoing","mostActiveHour","count","Object","keys","length","entries","map","_ref","date","items","item","onClick","snippet","thumbnail","src","url","alt","description","loading"],"sources":["/Users/haleynordeen/Desktop/Wikipedia App Prototyping/src/pages/HistoryPage.tsx"],"sourcesContent":["import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { formatTitleForDisplay, formatTitleForUrl } from '../utils/titleUtils';\nimport { useHistory } from '../hooks/useHistory';\nimport { getHistoryInsights } from '../services/historyService';\nimport './HistoryPage.css';\n\nconst HistoryPage: React.FC = () => {\n  const navigate = useNavigate();\n  const { groupedHistory, weeklyCount } = useHistory();\n  const insights = getHistoryInsights();\n\n  const handleArticleClick = (title: string) => {\n    navigate(`/article/${formatTitleForUrl(title)}`);\n  };\n\n  const formatTime = (timestamp: number) => {\n    return new Date(timestamp).toLocaleTimeString(undefined, {\n      hour: 'numeric',\n      minute: 'numeric'\n    });\n  };\n\n  const formatHour = (hour: number) => {\n    return new Date(2020, 0, 1, hour).toLocaleTimeString(undefined, {\n      hour: 'numeric',\n      hour12: true\n    });\n  };\n\n  const isToday = (dateString: string) => {\n    const today = new Date().toLocaleDateString(undefined, {\n      month: 'long',\n      day: 'numeric',\n      year: 'numeric'\n    });\n    return dateString === today;\n  };\n\n  const isYesterday = (dateString: string) => {\n    const yesterday = new Date(Date.now() - 86400000).toLocaleDateString(undefined, {\n      month: 'long',\n      day: 'numeric',\n      year: 'numeric'\n    });\n    return dateString === yesterday;\n  };\n\n  const formatDate = (dateString: string) => {\n    if (isToday(dateString)) return 'Today';\n    if (isYesterday(dateString)) return 'Yesterday';\n    return dateString;\n  };\n\n  const renderDetailedInsights = () => (\n    <div className=\"insights-grid\">\n      <div className=\"insight-card\">\n        <div className=\"insight-value\">{insights.todayCount}</div>\n        <div className=\"insight-label\">Articles read today</div>\n      </div>\n      <div className=\"insight-card\">\n        <div className=\"insight-value\">{insights.weeklyCount}</div>\n        <div className=\"insight-label\">Articles this week</div>\n      </div>\n      <div className=\"insight-card\">\n        <div className=\"insight-value\">{insights.currentStreak.days}</div>\n        <div className=\"insight-label\">Day streak</div>\n        {insights.currentStreak.days > 0 && (\n          <div className={`streak-badge ${insights.currentStreak.ongoing ? '' : 'inactive'}`}>\n            {insights.currentStreak.ongoing ? 'Active' : 'Ended'}\n          </div>\n        )}\n      </div>\n      {insights.mostActiveHour.count > 0 && (\n        <div className=\"insight-card\">\n          <div className=\"most-active-hour\">{formatHour(insights.mostActiveHour.hour)}</div>\n          <div className=\"most-active-label\">Most active reading time</div>\n          <div className=\"insight-label\">({insights.mostActiveHour.count} articles)</div>\n        </div>\n      )}\n    </div>\n  );\n\n  if (Object.keys(groupedHistory).length === 0) {\n    return (\n      <div className=\"history-page\">\n        <div className=\"history-header\">\n          <div className=\"header-content\">\n            <h1 className=\"history-title\">Activity</h1>\n          </div>\n        </div>\n        {renderDetailedInsights()}\n        <div className=\"history-empty\">\n          <h2>No Activity</h2>\n          <p>Articles you view will appear here</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"history-page\">\n      <div className=\"history-header\">\n        <div className=\"header-content\">\n          <h1 className=\"history-title\">Activity</h1>\n        </div>\n      </div>\n      {renderDetailedInsights()}\n      <div className=\"history-list\">\n        {Object.entries(groupedHistory).map(([date, items]) => (\n          <div key={date} className=\"history-group\">\n            <h2 className=\"history-date-header\">{formatDate(date)}</h2>\n            {items.map((item) => (\n              <div\n                key={`${item.title}-${item.timestamp}`}\n                className=\"history-item\"\n                onClick={() => handleArticleClick(item.title)}\n              >\n                <div className=\"history-item-content\">\n                  <h3>{formatTitleForDisplay(item.title)}</h3>\n                  <p className=\"history-snippet\">{item.snippet}</p>\n                  <span className=\"history-date\">{formatTime(item.timestamp)}</span>\n                </div>\n                {item.thumbnail && (\n                  <div className=\"history-thumbnail\">\n                    <img\n                      src={item.thumbnail.url}\n                      alt={item.thumbnail.description || item.title}\n                      loading=\"lazy\"\n                    />\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default HistoryPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}