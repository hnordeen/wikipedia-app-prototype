{"ast":null,"code":"import{useState,useEffect}from'react';import{getHistory,HISTORY_EVENTS}from'../services/historyService';export const useHistory=()=>{const[groupedHistory,setGroupedHistory]=useState({});const[weeklyCount,setWeeklyCount]=useState(0);const updateHistory=()=>{const history=getHistory();// Calculate weekly count\nconst now=new Date();const startOfWeek=new Date(now.getFullYear(),now.getMonth(),now.getDate()-now.getDay());const weeklyArticles=history.filter(item=>{const itemDate=new Date(item.timestamp);return itemDate>=startOfWeek;});setWeeklyCount(weeklyArticles.length);// Group by date\nconst grouped=history.reduce((acc,item)=>{const date=new Date(item.timestamp);const key=date.toLocaleDateString(undefined,{month:'long',day:'numeric',year:'numeric'});if(!acc[key]){acc[key]=[];}acc[key].push(item);return acc;},{});setGroupedHistory(grouped);};// Initial load\nuseEffect(()=>{updateHistory();// Listen for history updates\nwindow.addEventListener(HISTORY_EVENTS.UPDATE,updateHistory);// Cleanup\nreturn()=>{window.removeEventListener(HISTORY_EVENTS.UPDATE,updateHistory);};},[]);return{groupedHistory,weeklyCount,updateHistory};};","map":{"version":3,"names":["useState","useEffect","getHistory","HISTORY_EVENTS","useHistory","groupedHistory","setGroupedHistory","weeklyCount","setWeeklyCount","updateHistory","history","now","Date","startOfWeek","getFullYear","getMonth","getDate","getDay","weeklyArticles","filter","item","itemDate","timestamp","length","grouped","reduce","acc","date","key","toLocaleDateString","undefined","month","day","year","push","window","addEventListener","UPDATE","removeEventListener"],"sources":["/Users/haleynordeen/Desktop/Wikipedia App Prototyping/src/hooks/useHistory.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { getHistory, HistoryItem, HISTORY_EVENTS } from '../services/historyService';\n\ninterface GroupedHistory {\n  [key: string]: HistoryItem[];\n}\n\nexport const useHistory = () => {\n  const [groupedHistory, setGroupedHistory] = useState<GroupedHistory>({});\n  const [weeklyCount, setWeeklyCount] = useState<number>(0);\n\n  const updateHistory = () => {\n    const history = getHistory();\n    \n    // Calculate weekly count\n    const now = new Date();\n    const startOfWeek = new Date(now.getFullYear(), now.getMonth(), now.getDate() - now.getDay());\n    const weeklyArticles = history.filter(item => {\n      const itemDate = new Date(item.timestamp);\n      return itemDate >= startOfWeek;\n    });\n    setWeeklyCount(weeklyArticles.length);\n\n    // Group by date\n    const grouped = history.reduce((acc: GroupedHistory, item) => {\n      const date = new Date(item.timestamp);\n      const key = date.toLocaleDateString(undefined, {\n        month: 'long',\n        day: 'numeric',\n        year: 'numeric'\n      });\n      \n      if (!acc[key]) {\n        acc[key] = [];\n      }\n      acc[key].push(item);\n      return acc;\n    }, {});\n    \n    setGroupedHistory(grouped);\n  };\n\n  // Initial load\n  useEffect(() => {\n    updateHistory();\n\n    // Listen for history updates\n    window.addEventListener(HISTORY_EVENTS.UPDATE, updateHistory);\n\n    // Cleanup\n    return () => {\n      window.removeEventListener(HISTORY_EVENTS.UPDATE, updateHistory);\n    };\n  }, []);\n\n  return {\n    groupedHistory,\n    weeklyCount,\n    updateHistory\n  };\n}; "],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,UAAU,CAAeC,cAAc,KAAQ,4BAA4B,CAMpF,MAAO,MAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAACC,cAAc,CAAEC,iBAAiB,CAAC,CAAGN,QAAQ,CAAiB,CAAC,CAAC,CAAC,CACxE,KAAM,CAACO,WAAW,CAAEC,cAAc,CAAC,CAAGR,QAAQ,CAAS,CAAC,CAAC,CAEzD,KAAM,CAAAS,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAAC,OAAO,CAAGR,UAAU,CAAC,CAAC,CAE5B;AACA,KAAM,CAAAS,GAAG,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CACtB,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAAD,IAAI,CAACD,GAAG,CAACG,WAAW,CAAC,CAAC,CAAEH,GAAG,CAACI,QAAQ,CAAC,CAAC,CAAEJ,GAAG,CAACK,OAAO,CAAC,CAAC,CAAGL,GAAG,CAACM,MAAM,CAAC,CAAC,CAAC,CAC7F,KAAM,CAAAC,cAAc,CAAGR,OAAO,CAACS,MAAM,CAACC,IAAI,EAAI,CAC5C,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAT,IAAI,CAACQ,IAAI,CAACE,SAAS,CAAC,CACzC,MAAO,CAAAD,QAAQ,EAAIR,WAAW,CAChC,CAAC,CAAC,CACFL,cAAc,CAACU,cAAc,CAACK,MAAM,CAAC,CAErC;AACA,KAAM,CAAAC,OAAO,CAAGd,OAAO,CAACe,MAAM,CAAC,CAACC,GAAmB,CAAEN,IAAI,GAAK,CAC5D,KAAM,CAAAO,IAAI,CAAG,GAAI,CAAAf,IAAI,CAACQ,IAAI,CAACE,SAAS,CAAC,CACrC,KAAM,CAAAM,GAAG,CAAGD,IAAI,CAACE,kBAAkB,CAACC,SAAS,CAAE,CAC7CC,KAAK,CAAE,MAAM,CACbC,GAAG,CAAE,SAAS,CACdC,IAAI,CAAE,SACR,CAAC,CAAC,CAEF,GAAI,CAACP,GAAG,CAACE,GAAG,CAAC,CAAE,CACbF,GAAG,CAACE,GAAG,CAAC,CAAG,EAAE,CACf,CACAF,GAAG,CAACE,GAAG,CAAC,CAACM,IAAI,CAACd,IAAI,CAAC,CACnB,MAAO,CAAAM,GAAG,CACZ,CAAC,CAAE,CAAC,CAAC,CAAC,CAENpB,iBAAiB,CAACkB,OAAO,CAAC,CAC5B,CAAC,CAED;AACAvB,SAAS,CAAC,IAAM,CACdQ,aAAa,CAAC,CAAC,CAEf;AACA0B,MAAM,CAACC,gBAAgB,CAACjC,cAAc,CAACkC,MAAM,CAAE5B,aAAa,CAAC,CAE7D;AACA,MAAO,IAAM,CACX0B,MAAM,CAACG,mBAAmB,CAACnC,cAAc,CAACkC,MAAM,CAAE5B,aAAa,CAAC,CAClE,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CACLJ,cAAc,CACdE,WAAW,CACXE,aACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}