{"ast":null,"code":"const HISTORY_KEY = 'wikipedia_history';\nexport const addToHistory = (title, snippet, thumbnail) => {\n  const history = getHistory();\n\n  // Remove existing entry if present (to update it)\n  const filteredHistory = history.filter(item => item.title !== title);\n\n  // Add new entry at the beginning\n  const newHistory = [{\n    title,\n    snippet,\n    thumbnail,\n    timestamp: Date.now()\n  }, ...filteredHistory];\n\n  // Keep only the last 100 items\n  const trimmedHistory = newHistory.slice(0, 100);\n  localStorage.setItem(HISTORY_KEY, JSON.stringify(trimmedHistory));\n};\nexport const getHistory = () => {\n  const history = localStorage.getItem(HISTORY_KEY);\n  return history ? JSON.parse(history) : [];\n};\nexport const getArticlesReadThisWeek = () => {\n  const history = getHistory();\n  const now = new Date();\n  const startOfWeek = new Date(now.getFullYear(), now.getMonth(), now.getDate() - now.getDay());\n  startOfWeek.setHours(0, 0, 0, 0);\n  return history.filter(item => {\n    const itemDate = new Date(item.timestamp);\n    return itemDate >= startOfWeek;\n  }).length;\n};\nexport const clearHistory = () => {\n  localStorage.removeItem(HISTORY_KEY);\n};","map":{"version":3,"names":["HISTORY_KEY","addToHistory","title","snippet","thumbnail","history","getHistory","filteredHistory","filter","item","newHistory","timestamp","Date","now","trimmedHistory","slice","localStorage","setItem","JSON","stringify","getItem","parse","getArticlesReadThisWeek","startOfWeek","getFullYear","getMonth","getDate","getDay","setHours","itemDate","length","clearHistory","removeItem"],"sources":["/Users/haleynordeen/Desktop/Wikipedia App Prototyping/src/services/historyService.ts"],"sourcesContent":["import { ArticleImage } from '../api/wikipedia';\n\nexport interface HistoryItem {\n  title: string;\n  snippet: string;\n  timestamp: number;\n  thumbnail?: ArticleImage;\n}\n\nconst HISTORY_KEY = 'wikipedia_history';\n\nexport const addToHistory = (title: string, snippet: string, thumbnail?: ArticleImage) => {\n  const history = getHistory();\n  \n  // Remove existing entry if present (to update it)\n  const filteredHistory = history.filter(item => item.title !== title);\n  \n  // Add new entry at the beginning\n  const newHistory = [{\n    title,\n    snippet,\n    thumbnail,\n    timestamp: Date.now()\n  }, ...filteredHistory];\n\n  // Keep only the last 100 items\n  const trimmedHistory = newHistory.slice(0, 100);\n  \n  localStorage.setItem(HISTORY_KEY, JSON.stringify(trimmedHistory));\n};\n\nexport const getHistory = (): HistoryItem[] => {\n  const history = localStorage.getItem(HISTORY_KEY);\n  return history ? JSON.parse(history) : [];\n};\n\nexport const getArticlesReadThisWeek = (): number => {\n  const history = getHistory();\n  const now = new Date();\n  const startOfWeek = new Date(now.getFullYear(), now.getMonth(), now.getDate() - now.getDay());\n  startOfWeek.setHours(0, 0, 0, 0);\n\n  return history.filter(item => {\n    const itemDate = new Date(item.timestamp);\n    return itemDate >= startOfWeek;\n  }).length;\n};\n\nexport const clearHistory = () => {\n  localStorage.removeItem(HISTORY_KEY);\n}; "],"mappings":"AASA,MAAMA,WAAW,GAAG,mBAAmB;AAEvC,OAAO,MAAMC,YAAY,GAAGA,CAACC,KAAa,EAAEC,OAAe,EAAEC,SAAwB,KAAK;EACxF,MAAMC,OAAO,GAAGC,UAAU,CAAC,CAAC;;EAE5B;EACA,MAAMC,eAAe,GAAGF,OAAO,CAACG,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACP,KAAK,KAAKA,KAAK,CAAC;;EAEpE;EACA,MAAMQ,UAAU,GAAG,CAAC;IAClBR,KAAK;IACLC,OAAO;IACPC,SAAS;IACTO,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;EACtB,CAAC,EAAE,GAAGN,eAAe,CAAC;;EAEtB;EACA,MAAMO,cAAc,GAAGJ,UAAU,CAACK,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC;EAE/CC,YAAY,CAACC,OAAO,CAACjB,WAAW,EAAEkB,IAAI,CAACC,SAAS,CAACL,cAAc,CAAC,CAAC;AACnE,CAAC;AAED,OAAO,MAAMR,UAAU,GAAGA,CAAA,KAAqB;EAC7C,MAAMD,OAAO,GAAGW,YAAY,CAACI,OAAO,CAACpB,WAAW,CAAC;EACjD,OAAOK,OAAO,GAAGa,IAAI,CAACG,KAAK,CAAChB,OAAO,CAAC,GAAG,EAAE;AAC3C,CAAC;AAED,OAAO,MAAMiB,uBAAuB,GAAGA,CAAA,KAAc;EACnD,MAAMjB,OAAO,GAAGC,UAAU,CAAC,CAAC;EAC5B,MAAMO,GAAG,GAAG,IAAID,IAAI,CAAC,CAAC;EACtB,MAAMW,WAAW,GAAG,IAAIX,IAAI,CAACC,GAAG,CAACW,WAAW,CAAC,CAAC,EAAEX,GAAG,CAACY,QAAQ,CAAC,CAAC,EAAEZ,GAAG,CAACa,OAAO,CAAC,CAAC,GAAGb,GAAG,CAACc,MAAM,CAAC,CAAC,CAAC;EAC7FJ,WAAW,CAACK,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAEhC,OAAOvB,OAAO,CAACG,MAAM,CAACC,IAAI,IAAI;IAC5B,MAAMoB,QAAQ,GAAG,IAAIjB,IAAI,CAACH,IAAI,CAACE,SAAS,CAAC;IACzC,OAAOkB,QAAQ,IAAIN,WAAW;EAChC,CAAC,CAAC,CAACO,MAAM;AACX,CAAC;AAED,OAAO,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAChCf,YAAY,CAACgB,UAAU,CAAChC,WAAW,CAAC;AACtC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}