{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nconst HISTORY_KEY = 'wiki_history';\nconst MAX_HISTORY_ITEMS = 100;\nexport const useHistory = () => {\n  _s();\n  const [groupedHistory, setGroupedHistory] = useState({});\n  useEffect(() => {\n    const loadHistory = () => {\n      const historyString = localStorage.getItem(HISTORY_KEY);\n      const history = historyString ? JSON.parse(historyString) : [];\n      const grouped = history.reduce((acc, item) => {\n        const date = new Date(item.timestamp);\n        const key = date.toLocaleDateString(undefined, {\n          month: 'long',\n          day: 'numeric',\n          year: 'numeric'\n        });\n        if (!acc[key]) {\n          acc[key] = [];\n        }\n        acc[key].push(item);\n        return acc;\n      }, {});\n      setGroupedHistory(grouped);\n    };\n    loadHistory();\n    window.addEventListener('storage', loadHistory);\n    return () => window.removeEventListener('storage', loadHistory);\n  }, []);\n  const addToHistory = item => {\n    const historyString = localStorage.getItem(HISTORY_KEY);\n    const history = historyString ? JSON.parse(historyString) : [];\n\n    // Remove duplicates of the same article\n    const filteredHistory = history.filter(h => h.pageid !== item.pageid);\n\n    // Add new item at the beginning\n    const newHistory = [item, ...filteredHistory].slice(0, MAX_HISTORY_ITEMS);\n    localStorage.setItem(HISTORY_KEY, JSON.stringify(newHistory));\n\n    // Trigger a storage event for other tabs\n    window.dispatchEvent(new Event('storage'));\n  };\n  const clearHistory = () => {\n    localStorage.removeItem(HISTORY_KEY);\n    setGroupedHistory({});\n  };\n  return {\n    groupedHistory,\n    addToHistory,\n    clearHistory\n  };\n};\n_s(useHistory, \"MpoQ6aNNEu5u7CvZUCXgfWCLiA4=\");","map":{"version":3,"names":["useState","useEffect","HISTORY_KEY","MAX_HISTORY_ITEMS","useHistory","_s","groupedHistory","setGroupedHistory","loadHistory","historyString","localStorage","getItem","history","JSON","parse","grouped","reduce","acc","item","date","Date","timestamp","key","toLocaleDateString","undefined","month","day","year","push","window","addEventListener","removeEventListener","addToHistory","filteredHistory","filter","h","pageid","newHistory","slice","setItem","stringify","dispatchEvent","Event","clearHistory","removeItem"],"sources":["/Users/haleynordeen/Desktop/Wikipedia App Prototyping/src/hooks/useHistory.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nexport interface HistoryItem {\n  pageid: number;\n  title: string;\n  snippet: string;\n  thumbnail?: string;\n  timestamp: number;\n}\n\ninterface GroupedHistory {\n  [key: string]: HistoryItem[];\n}\n\nconst HISTORY_KEY = 'wiki_history';\nconst MAX_HISTORY_ITEMS = 100;\n\nexport const useHistory = () => {\n  const [groupedHistory, setGroupedHistory] = useState<GroupedHistory>({});\n\n  useEffect(() => {\n    const loadHistory = () => {\n      const historyString = localStorage.getItem(HISTORY_KEY);\n      const history: HistoryItem[] = historyString ? JSON.parse(historyString) : [];\n\n      const grouped = history.reduce((acc: GroupedHistory, item) => {\n        const date = new Date(item.timestamp);\n        const key = date.toLocaleDateString(undefined, {\n          month: 'long',\n          day: 'numeric',\n          year: 'numeric'\n        });\n        \n        if (!acc[key]) {\n          acc[key] = [];\n        }\n        acc[key].push(item);\n        return acc;\n      }, {});\n\n      setGroupedHistory(grouped);\n    };\n\n    loadHistory();\n    window.addEventListener('storage', loadHistory);\n    return () => window.removeEventListener('storage', loadHistory);\n  }, []);\n\n  const addToHistory = (item: HistoryItem) => {\n    const historyString = localStorage.getItem(HISTORY_KEY);\n    const history: HistoryItem[] = historyString ? JSON.parse(historyString) : [];\n    \n    // Remove duplicates of the same article\n    const filteredHistory = history.filter(h => h.pageid !== item.pageid);\n    \n    // Add new item at the beginning\n    const newHistory = [item, ...filteredHistory].slice(0, MAX_HISTORY_ITEMS);\n    \n    localStorage.setItem(HISTORY_KEY, JSON.stringify(newHistory));\n    \n    // Trigger a storage event for other tabs\n    window.dispatchEvent(new Event('storage'));\n  };\n\n  const clearHistory = () => {\n    localStorage.removeItem(HISTORY_KEY);\n    setGroupedHistory({});\n  };\n\n  return {\n    groupedHistory,\n    addToHistory,\n    clearHistory\n  };\n}; "],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAc3C,MAAMC,WAAW,GAAG,cAAc;AAClC,MAAMC,iBAAiB,GAAG,GAAG;AAE7B,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGP,QAAQ,CAAiB,CAAC,CAAC,CAAC;EAExEC,SAAS,CAAC,MAAM;IACd,MAAMO,WAAW,GAAGA,CAAA,KAAM;MACxB,MAAMC,aAAa,GAAGC,YAAY,CAACC,OAAO,CAACT,WAAW,CAAC;MACvD,MAAMU,OAAsB,GAAGH,aAAa,GAAGI,IAAI,CAACC,KAAK,CAACL,aAAa,CAAC,GAAG,EAAE;MAE7E,MAAMM,OAAO,GAAGH,OAAO,CAACI,MAAM,CAAC,CAACC,GAAmB,EAAEC,IAAI,KAAK;QAC5D,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,IAAI,CAACG,SAAS,CAAC;QACrC,MAAMC,GAAG,GAAGH,IAAI,CAACI,kBAAkB,CAACC,SAAS,EAAE;UAC7CC,KAAK,EAAE,MAAM;UACbC,GAAG,EAAE,SAAS;UACdC,IAAI,EAAE;QACR,CAAC,CAAC;QAEF,IAAI,CAACV,GAAG,CAACK,GAAG,CAAC,EAAE;UACbL,GAAG,CAACK,GAAG,CAAC,GAAG,EAAE;QACf;QACAL,GAAG,CAACK,GAAG,CAAC,CAACM,IAAI,CAACV,IAAI,CAAC;QACnB,OAAOD,GAAG;MACZ,CAAC,EAAE,CAAC,CAAC,CAAC;MAENV,iBAAiB,CAACQ,OAAO,CAAC;IAC5B,CAAC;IAEDP,WAAW,CAAC,CAAC;IACbqB,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEtB,WAAW,CAAC;IAC/C,OAAO,MAAMqB,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAEvB,WAAW,CAAC;EACjE,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMwB,YAAY,GAAId,IAAiB,IAAK;IAC1C,MAAMT,aAAa,GAAGC,YAAY,CAACC,OAAO,CAACT,WAAW,CAAC;IACvD,MAAMU,OAAsB,GAAGH,aAAa,GAAGI,IAAI,CAACC,KAAK,CAACL,aAAa,CAAC,GAAG,EAAE;;IAE7E;IACA,MAAMwB,eAAe,GAAGrB,OAAO,CAACsB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAKlB,IAAI,CAACkB,MAAM,CAAC;;IAErE;IACA,MAAMC,UAAU,GAAG,CAACnB,IAAI,EAAE,GAAGe,eAAe,CAAC,CAACK,KAAK,CAAC,CAAC,EAAEnC,iBAAiB,CAAC;IAEzEO,YAAY,CAAC6B,OAAO,CAACrC,WAAW,EAAEW,IAAI,CAAC2B,SAAS,CAACH,UAAU,CAAC,CAAC;;IAE7D;IACAR,MAAM,CAACY,aAAa,CAAC,IAAIC,KAAK,CAAC,SAAS,CAAC,CAAC;EAC5C,CAAC;EAED,MAAMC,YAAY,GAAGA,CAAA,KAAM;IACzBjC,YAAY,CAACkC,UAAU,CAAC1C,WAAW,CAAC;IACpCK,iBAAiB,CAAC,CAAC,CAAC,CAAC;EACvB,CAAC;EAED,OAAO;IACLD,cAAc;IACd0B,YAAY;IACZW;EACF,CAAC;AACH,CAAC;AAACtC,EAAA,CAzDWD,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}