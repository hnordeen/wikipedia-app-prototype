{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useSearchParams}from'react-router-dom';import{searchWikipedia}from'../api/wikipedia';import SearchBar from'../components/SearchBar';import FunFacts from'../components/FunFacts';import'./SearchPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchPage=()=>{const[searchParams]=useSearchParams();const[results,setResults]=useState([]);const[loading,setLoading]=useState(false);useEffect(()=>{const query=searchParams.get('q');if(query){handleSearch(query);}},[searchParams]);const handleSearch=async query=>{setLoading(true);try{const searchResults=await searchWikipedia(query);setResults(searchResults);}catch(error){console.error('Error searching:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"search-page\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"search-title\",children:\"Search\"}),/*#__PURE__*/_jsx(SearchBar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"search-results\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Searching...\"}):results.length>0?results.map(result=>/*#__PURE__*/_jsxs(\"div\",{className:\"search-result\",children:[/*#__PURE__*/_jsx(\"h2\",{children:decodeURIComponent(result.title.replace(/_/g,' '))}),/*#__PURE__*/_jsx(\"div\",{className:\"snippet\",dangerouslySetInnerHTML:{__html:result.snippet}}),result.images&&result.images.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"result-images\",children:result.images.map((image,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:image.url,alt:image.description||result.title,loading:\"lazy\"})},index))})]},result.pageid)):searchParams.get('q')?/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:\"No results found\"}):/*#__PURE__*/_jsx(FunFacts,{})})]});};export default SearchPage;","map":{"version":3,"names":["React","useState","useEffect","useSearchParams","searchWikipedia","SearchBar","FunFacts","jsx","_jsx","jsxs","_jsxs","SearchPage","searchParams","results","setResults","loading","setLoading","query","get","handleSearch","searchResults","error","console","className","children","length","map","result","decodeURIComponent","title","replace","dangerouslySetInnerHTML","__html","snippet","images","image","index","src","url","alt","description","pageid"],"sources":["/Users/haleynordeen/Desktop/Wikipedia App Prototyping/src/pages/SearchPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { searchWikipedia, SearchResult } from '../api/wikipedia';\nimport SearchBar from '../components/SearchBar';\nimport FunFacts from '../components/FunFacts';\nimport './SearchPage.css';\n\nconst SearchPage: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const [results, setResults] = useState<SearchResult[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const query = searchParams.get('q');\n    if (query) {\n      handleSearch(query);\n    }\n  }, [searchParams]);\n\n  const handleSearch = async (query: string) => {\n    setLoading(true);\n    try {\n      const searchResults = await searchWikipedia(query);\n      setResults(searchResults);\n    } catch (error) {\n      console.error('Error searching:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"search-page\">\n      <h1 className=\"search-title\">Search</h1>\n      <SearchBar />\n      <div className=\"search-results\">\n        {loading ? (\n          <div className=\"loading\">Searching...</div>\n        ) : results.length > 0 ? (\n          results.map((result) => (\n            <div key={result.pageid} className=\"search-result\">\n              <h2>{decodeURIComponent(result.title.replace(/_/g, ' '))}</h2>\n              <div \n                className=\"snippet\"\n                dangerouslySetInnerHTML={{ __html: result.snippet }}\n              />\n              {result.images && result.images.length > 0 && (\n                <div className=\"result-images\">\n                  {result.images.map((image, index) => (\n                    <div key={index} className=\"image-container\">\n                      <img\n                        src={image.url}\n                        alt={image.description || result.title}\n                        loading=\"lazy\"\n                      />\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          ))\n        ) : searchParams.get('q') ? (\n          <div className=\"no-results\">No results found</div>\n        ) : (\n          <FunFacts />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SearchPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}