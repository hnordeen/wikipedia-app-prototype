/*! For license information please see main.e3d991af.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),a=Symbol.for("react.element"),l=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,l={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===l[r]&&(l[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:l,_owner:i.current}}t.Fragment=l,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,p(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var a,l={},o=null,i=null;if(null!=t)for(a in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,a)&&!C.hasOwnProperty(a)&&(l[a]=t[a]);var s=arguments.length-2;if(1===s)l.children=r;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];l.children=c}if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===l[a]&&(l[a]=s[a]);return{$$typeof:n,type:e,key:o,ref:i,props:l,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,a,l,o){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===l?"."+_(s,0):l,x(o)?(a="",null!=e&&(a=e.replace(j,"$&/")+"/"),T(o,t,a,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(j,"$&/")+"/")+e)),t.push(o)),1;if(s=0,l=""===l?".":l+":",x(e))for(var c=0;c<e.length;c++){var u=l+_(i=e[c],c);s+=T(i,t,a,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(i=e.next()).done;)s+=T(i=i.value,t,a,u=l+_(i,c++),o);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function R(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},I={transition:null},A={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:I,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=l,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=p({},e.props),l=e.key,o=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,i=S.current),void 0!==t.key&&(l=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)k.call(t,c)&&!C.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];a.children=s}return{$$typeof:n,type:e.type,key:l,ref:o,props:a,_owner:i}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<l(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var i=2*(r+1)-1,s=e[i],c=i+1,u=e[c];if(0>l(s,n))c<a&&0>l(u,s)?(e[r]=u,e[c]=n,r=c):(e[r]=s,e[i]=n,r=i);else{if(!(c<a&&0>l(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function l(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,s=i.now();t.unstable_now=function(){return i.now()-s}}var c=[],u=[],d=1,f=null,h=3,m=!1,p=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!p)if(null!==r(c))p=!0,I(k);else{var t=r(u);null!==t&&A(x,t.startTime-e)}}function k(e,n){p=!1,g&&(g=!1,y(E),E=-1),m=!0;var l=h;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!T());){var o=f.callback;if("function"===typeof o){f.callback=null,h=f.priorityLevel;var i=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof i?f.callback=i:f===r(c)&&a(c),w(n)}else a(c);f=r(c)}if(null!==f)var s=!0;else{var d=r(u);null!==d&&A(x,d.startTime-n),s=!1}return s}finally{f=null,h=l,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,N=null,E=-1,j=5,_=-1;function T(){return!(t.unstable_now()-_<j)}function R(){if(null!==N){var e=t.unstable_now();_=e;var n=!0;try{n=N(!0,e)}finally{n?S():(C=!1,N=null)}}else C=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,L=P.port2;P.port1.onmessage=R,S=function(){L.postMessage(null)}}else S=function(){v(R,0)};function I(e){N=e,C||(C=!0,S())}function A(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,I(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,l){var o=t.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?o+l:o:l=o,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:l,expirationTime:i=l+i,sortIndex:-1},l>o?(e.sortIndex=l,n(u,e),null===r(c)&&e===r(u)&&(g?(y(E),E=-1):g=!0,A(x,l-o))):(e.sortIndex=i,n(c,e),p||m||(p=!0,I(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),a=n(853);function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,i={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(i[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function p(e,t,n,r,a,l,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(m,e)||!d.call(h,e)&&(f.test(e)?m[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),j=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var O,M=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var z=!1;function q(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),l=r.stack.split("\n"),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(1!==o||1!==i)do{if(o--,0>--i||a[o]!==l[i]){var s="\n"+a[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=i);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case N:return"Profiler";case C:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function B(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=B(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=B(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,B(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+B(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(l(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(l(92));if(te(n)){if(1<n.length)throw Error(l(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:B(n)}}function le(e,t){var n=B(t.value),r=B(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(l(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(l(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(l(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ce=null;function Ne(e){if(e=ba(e)){if("function"!==typeof ke)throw Error(l(280));var t=e.stateNode;t&&(t=xa(t),ke(e.stateNode,e.type,t))}}function Ee(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function je(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function _e(e,t){return e(t)}function Te(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return _e(e,t,n)}finally{Re=!1,(null!==Se||null!==Ce)&&(Te(),je())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=xa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(l(231,t,typeof n));return n}var Ie=!1;if(u)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ue){Ie=!1}function De(e,t,n,r,a,l,o,i,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Me=null,Fe=!1,ze=null,qe={onError:function(e){Oe=!0,Me=e}};function Ue(e,t,n,r,a,l,o,i,s){Oe=!1,Me=null,De.apply(qe,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Be(e){if(He(e)!==e)throw Error(l(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(l(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Be(a),e;if(o===r)return Be(a),t;o=o.sibling}throw Error(l(188))}if(n.return!==r.return)n=a,r=o;else{for(var i=!1,s=a.child;s;){if(s===n){i=!0,n=a,r=o;break}if(s===r){i=!0,r=a,n=o;break}s=s.sibling}if(!i){for(s=o.child;s;){if(s===n){i=!0,n=o,r=a;break}if(s===r){i=!0,r=o,n=a;break}s=s.sibling}if(!i)throw Error(l(189))}}if(n.alternate!==r)throw Error(l(190))}if(3!==n.tag)throw Error(l(188));return n.stateNode.current===n?e:t}(e))?$e(e):null}function $e(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$e(e);if(null!==t)return t;e=e.sibling}return null}var Ye=a.unstable_scheduleCallback,Ke=a.unstable_cancelCallback,Ge=a.unstable_shouldYield,Qe=a.unstable_requestPaint,Xe=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,lt=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/st|0)|0},it=Math.log,st=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,o=268435455&n;if(0!==o){var i=o&~a;0!==i?r=dt(i):0!==(l&=o)&&(r=dt(l))}else 0!==(o=n&~a)?r=dt(o):0!==l&&(r=dt(l));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(l=t&-t)||16===a&&0!==(4194240&l)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,St,Ct,Nt,Et=!1,jt=[],_t=null,Tt=null,Rt=null,Pt=new Map,Lt=new Map,It=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Ot(e,t,n,r,a,l){return null===e||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mt(e){var t=ya(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Nt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function qt(){Et=!1,null!==_t&&Ft(_t)&&(_t=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==Rt&&Ft(Rt)&&(Rt=null),Pt.forEach(zt),Lt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,qt)))}function Ht(e){function t(t){return Ut(t,e)}if(0<jt.length){Ut(jt[0],e);for(var n=1;n<jt.length;n++){var r=jt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Ut(_t,e),null!==Tt&&Ut(Tt,e),null!==Rt&&Ut(Rt,e),Pt.forEach(t),Lt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Mt(n),null===n.blockedOn&&It.shift()}var Wt=w.ReactCurrentBatchConfig,Bt=!0;function Vt(e,t,n,r){var a=bt,l=Wt.transition;Wt.transition=null;try{bt=1,Yt(e,t,n,r)}finally{bt=a,Wt.transition=l}}function $t(e,t,n,r){var a=bt,l=Wt.transition;Wt.transition=null;try{bt=4,Yt(e,t,n,r)}finally{bt=a,Wt.transition=l}}function Yt(e,t,n,r){if(Bt){var a=Gt(e,t,n,r);if(null===a)Br(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return _t=Ot(_t,e,t,n,r,a),!0;case"dragenter":return Tt=Ot(Tt,e,t,n,r,a),!0;case"mouseover":return Rt=Ot(Rt,e,t,n,r,a),!0;case"pointerover":var l=a.pointerId;return Pt.set(l,Ot(Pt.get(l)||null,e,t,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,Lt.set(l,Ot(Lt.get(l)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<At.indexOf(e)){for(;null!==a;){var l=ba(a);if(null!==l&&xt(l),null===(l=Gt(e,t,n,r))&&Br(e,t,r,Kt,n),l===a)break;a=l}null!==a&&r.stopPropagation()}else Br(e,t,r,null,n)}}var Kt=null;function Gt(e,t,n,r){if(Kt=null,null!==(e=ya(e=xe(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,a="value"in Xt?Xt.value:Xt.textContent,l=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[l-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,l){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var ln,on,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=M({},cn,{view:0,detail:0}),fn=an(dn),hn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(ln=e.screenX-sn.screenX,on=e.screenY-sn.screenY):on=ln=0,sn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=an(hn),pn=an(M({},hn,{dataTransfer:0})),gn=an(M({},dn,{relatedTarget:0})),vn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),wn=an(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Nn(){return Cn}var En=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),jn=an(En),_n=an(M({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),Rn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=M({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=an(Pn),In=[9,13,27,32],An=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var On=u&&"TextEvent"in window&&!Dn,Mn=u&&(!An||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),zn=!1;function qn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Vn(e,t,n,r){Ee(r),0<(t=$r(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Yn=null;function Kn(e){Fr(e,0)}function Gn(e){if(Y(wa(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){$n&&($n.detachEvent("onpropertychange",nr),Yn=$n=null)}function nr(e){if("value"===e.propertyName&&Gn(Yn)){var t=[];Vn(t,Yn,e,xe(e)),Pe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,($n=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Yn)}function lr(e,t){if("click"===e)return Gn(t)}function or(e,t){if("input"===e||"change"===e)return Gn(t)}var ir="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ir(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!ir(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=void 0===r.end?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=ur(n,l);var o=ur(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&sr(yr,r)||(yr=r,0<(r=$r(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Cr={};function Nr(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Nr("animationend"),jr=Nr("animationiteration"),_r=Nr("animationstart"),Tr=Nr("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Rr.set(e,t),s(t,[e])}for(var Ir=0;Ir<Pr.length;Ir++){var Ar=Pr[Ir];Lr(Ar.toLowerCase(),"on"+(Ar[0].toUpperCase()+Ar.slice(1)))}Lr(Er,"onAnimationEnd"),Lr(jr,"onAnimationIteration"),Lr(_r,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,i,s,c){if(Ue.apply(this,arguments),Oe){if(!Oe)throw Error(l(198));var u=Me;Oe=!1,Me=null,Fe||(Fe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var i=r[o],s=i.instance,c=i.currentTarget;if(i=i.listener,s!==l&&a.isPropagationStopped())break e;Mr(a,i,c),l=s}else for(o=0;o<r.length;o++){if(s=(i=r[o]).instance,c=i.currentTarget,i=i.listener,s!==l&&a.isPropagationStopped())break e;Mr(a,i,c),l=s}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[pa];void 0===n&&(n=t[pa]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function qr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||qr(t,!1,e),qr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,qr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Qt(t)){case 1:var a=Vt;break;case 4:a=$t;break;default:a=Yt}n=a.bind(null,t,n,e),a=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Br(e,t,n,r,a){var l=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var i=r.stateNode.containerInfo;if(i===a||8===i.nodeType&&i.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===a||8===s.nodeType&&s.parentNode===a))return;o=o.return}for(;null!==i;){if(null===(o=ya(i)))return;if(5===(s=o.tag)||6===s){r=l=o;continue e}i=i.parentNode}}r=r.return}Pe((function(){var r=l,a=xe(n),o=[];e:{var i=Rr.get(e);if(void 0!==i){var s=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=jn;break;case"focusin":c="focus",s=gn;break;case"focusout":c="blur",s=gn;break;case"beforeblur":case"afterblur":s=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case Er:case jr:case _r:s=vn;break;case Tr:s=Rn;break;case"scroll":s=fn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=_n}var u=0!==(4&t),d=!u&&"scroll"===e,f=u?null!==i?i+"Capture":null:i;u=[];for(var h,m=r;null!==m;){var p=(h=m).stateNode;if(5===h.tag&&null!==p&&(h=p,null!==f&&(null!=(p=Le(m,f))&&u.push(Vr(m,p,h)))),d)break;m=m.return}0<u.length&&(i=new s(i,c,null,n,a),o.push({event:i,listeners:u}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[ma])&&(s||i)&&(i=a.window===a?a:(i=a.ownerDocument)?i.defaultView||i.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(u=mn,p="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=_n,p="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==s?i:wa(s),h=null==c?i:wa(c),(i=new u(p,m+"leave",s,n,a)).target=d,i.relatedTarget=h,p=null,ya(a)===r&&((u=new u(f,m+"enter",c,n,a)).target=h,u.relatedTarget=d,p=u),d=p,s&&c)e:{for(f=c,m=0,h=u=s;h;h=Yr(h))m++;for(h=0,p=f;p;p=Yr(p))h++;for(;0<m-h;)u=Yr(u),m--;for(;0<h-m;)f=Yr(f),h--;for(;m--;){if(u===f||null!==f&&u===f.alternate)break e;u=Yr(u),f=Yr(f)}u=null}else u=null;null!==s&&Kr(o,i,s,u,!1),null!==c&&null!==d&&Kr(o,d,c,u,!0)}if("select"===(s=(i=r?wa(r):window).nodeName&&i.nodeName.toLowerCase())||"input"===s&&"file"===i.type)var g=Qn;else if(Bn(i))if(Xn)g=or;else{g=ar;var v=rr}else(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(g=lr);switch(g&&(g=g(e,r))?Vn(o,g,n,a):(v&&v(e,i,r),"focusout"===e&&(v=i._wrapperState)&&v.controlled&&"number"===i.type&&ee(i,"number",i.value)),v=r?wa(r):window,e){case"focusin":(Bn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,a);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":wr(o,n,a)}var y;if(An)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?qn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=en()):(Jt="value"in(Xt=a)?Xt.value:Xt.textContent,Hn=!0)),0<(v=$r(r,b)).length&&(b=new wn(b,e,null,n,a),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!An&&qn(e,t)?(e=en(),Zt=Jt=Xt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=$r(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}Fr(o,t)}))}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $r(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,l=a.stateNode;5===a.tag&&null!==l&&(a=l,null!=(l=Le(e,n))&&r.unshift(Vr(e,l,a)),null!=(l=Le(e,t))&&r.push(Vr(e,l,a))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,a){for(var l=t._reactName,o=[];null!==n&&n!==r;){var i=n,s=i.alternate,c=i.stateNode;if(null!==s&&s===r)break;5===i.tag&&null!==c&&(i=c,a?null!=(s=Le(n,l))&&o.unshift(Vr(n,s,i)):a||null!=(s=Le(n,l))&&o.push(Vr(n,s,i))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Qr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(l(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,la="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof la?function(e){return la.resolve(null).then(e).catch(ia)}:ra;function ia(e){setTimeout((function(){throw e}))}function sa(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Ht(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),fa="__reactFiber$"+da,ha="__reactProps$"+da,ma="__reactContainer$"+da,pa="__reactEvents$"+da,ga="__reactListeners$"+da,va="__reactHandles$"+da;function ya(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ma]||n[fa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[fa])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[fa]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(l(33))}function xa(e){return e[ha]||null}var ka=[],Sa=-1;function Ca(e){return{current:e}}function Na(e){0>Sa||(e.current=ka[Sa],ka[Sa]=null,Sa--)}function Ea(e,t){Sa++,ka[Sa]=e.current,e.current=t}var ja={},_a=Ca(ja),Ta=Ca(!1),Ra=ja;function Pa(e,t){var n=e.type.contextTypes;if(!n)return ja;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,l={};for(a in n)l[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function La(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ia(){Na(Ta),Na(_a)}function Aa(e,t,n){if(_a.current!==ja)throw Error(l(168));Ea(_a,t),Ea(Ta,n)}function Da(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(l(108,W(e)||"Unknown",a));return M({},n,r)}function Oa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ja,Ra=_a.current,Ea(_a,e),Ea(Ta,Ta.current),!0}function Ma(e,t,n){var r=e.stateNode;if(!r)throw Error(l(169));n?(e=Da(e,t,Ra),r.__reactInternalMemoizedMergedChildContext=e,Na(Ta),Na(_a),Ea(_a,e)):Na(Ta),Ea(Ta,n)}var Fa=null,za=!1,qa=!1;function Ua(e){null===Fa?Fa=[e]:Fa.push(e)}function Ha(){if(!qa&&null!==Fa){qa=!0;var e=0,t=bt;try{var n=Fa;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fa=null,za=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),Ye(Ze,Ha),a}finally{bt=t,qa=!1}}return null}var Wa=[],Ba=0,Va=null,$a=0,Ya=[],Ka=0,Ga=null,Qa=1,Xa="";function Ja(e,t){Wa[Ba++]=$a,Wa[Ba++]=Va,Va=e,$a=t}function Za(e,t,n){Ya[Ka++]=Qa,Ya[Ka++]=Xa,Ya[Ka++]=Ga,Ga=e;var r=Qa;e=Xa;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var l=32-ot(t)+a;if(30<l){var o=a-a%5;l=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Qa=1<<32-ot(t)+a|n<<a|r,Xa=l+e}else Qa=1<<l|n<<a|r,Xa=e}function el(e){null!==e.return&&(Ja(e,1),Za(e,1,0))}function tl(e){for(;e===Va;)Va=Wa[--Ba],Wa[Ba]=null,$a=Wa[--Ba],Wa[Ba]=null;for(;e===Ga;)Ga=Ya[--Ka],Ya[Ka]=null,Xa=Ya[--Ka],Ya[Ka]=null,Qa=Ya[--Ka],Ya[Ka]=null}var nl=null,rl=null,al=!1,ll=null;function ol(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function il(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nl=e,rl=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nl=e,rl=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ga?{id:Qa,overflow:Xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nl=e,rl=null,!0);default:return!1}}function sl(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cl(e){if(al){var t=rl;if(t){var n=t;if(!il(e,t)){if(sl(e))throw Error(l(418));t=ca(n.nextSibling);var r=nl;t&&il(e,t)?ol(r,n):(e.flags=-4097&e.flags|2,al=!1,nl=e)}}else{if(sl(e))throw Error(l(418));e.flags=-4097&e.flags|2,al=!1,nl=e}}}function ul(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nl=e}function dl(e){if(e!==nl)return!1;if(!al)return ul(e),al=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=rl)){if(sl(e))throw fl(),Error(l(418));for(;t;)ol(e,t),t=ca(t.nextSibling)}if(ul(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rl=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rl=null}}else rl=nl?ca(e.stateNode.nextSibling):null;return!0}function fl(){for(var e=rl;e;)e=ca(e.nextSibling)}function hl(){rl=nl=null,al=!1}function ml(e){null===ll?ll=[e]:ll.push(e)}var pl=w.ReactCurrentBatchConfig;function gl(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(l(309));var r=n.stateNode}if(!r)throw Error(l(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(l(284));if(!n._owner)throw Error(l(290,e))}return e}function vl(e,t){throw e=Object.prototype.toString.call(t),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yl(e){return(0,e._init)(e._payload)}function bl(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var l=n.type;return l===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===L&&yl(l)===t.type)?((r=a(t,n.props)).ref=gl(e,t,n),r.return=e,r):((r=Ac(n.type,n.key,n.props,null,e.mode,r)).ref=gl(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,l){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,l)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ac(t.type,t.key,t.props,null,e.mode,n)).ref=gl(e,null,t),n.return=e,n;case k:return(t=Fc(t,e.mode,n)).return=e,t;case L:return f(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;vl(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===a?c(e,t,n,r):null;case k:return n.key===a?u(e,t,n,r):null;case L:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||D(n))return null!==a?null:d(e,t,n,r,null);vl(e,n)}return null}function m(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case L:return m(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,a,null);vl(t,r)}return null}function p(a,l,i,s){for(var c=null,u=null,d=l,p=l=0,g=null;null!==d&&p<i.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var v=h(a,d,i[p],s);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),l=o(v,l,p),null===u?c=v:u.sibling=v,u=v,d=g}if(p===i.length)return n(a,d),al&&Ja(a,p),c;if(null===d){for(;p<i.length;p++)null!==(d=f(a,i[p],s))&&(l=o(d,l,p),null===u?c=d:u.sibling=d,u=d);return al&&Ja(a,p),c}for(d=r(a,d);p<i.length;p++)null!==(g=m(d,a,p,i[p],s))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),l=o(g,l,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(a,e)})),al&&Ja(a,p),c}function g(a,i,s,c){var u=D(s);if("function"!==typeof u)throw Error(l(150));if(null==(s=u.call(s)))throw Error(l(151));for(var d=u=null,p=i,g=i=0,v=null,y=s.next();null!==p&&!y.done;g++,y=s.next()){p.index>g?(v=p,p=null):v=p.sibling;var b=h(a,p,y.value,c);if(null===b){null===p&&(p=v);break}e&&p&&null===b.alternate&&t(a,p),i=o(b,i,g),null===d?u=b:d.sibling=b,d=b,p=v}if(y.done)return n(a,p),al&&Ja(a,g),u;if(null===p){for(;!y.done;g++,y=s.next())null!==(y=f(a,y.value,c))&&(i=o(y,i,g),null===d?u=y:d.sibling=y,d=y);return al&&Ja(a,g),u}for(p=r(a,p);!y.done;g++,y=s.next())null!==(y=m(p,a,g,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),i=o(y,i,g),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach((function(e){return t(a,e)})),al&&Ja(a,g),u}return function e(r,l,o,s){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=l;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(l=a(u,o.props.children)).return=r,r=l;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&yl(c)===u.type){n(r,u.sibling),(l=a(u,o.props)).ref=gl(r,u,o),l.return=r,r=l;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((l=Dc(o.props.children,r.mode,s,o.key)).return=r,r=l):((s=Ac(o.type,o.key,o.props,null,r.mode,s)).ref=gl(r,l,o),s.return=r,r=s)}return i(r);case k:e:{for(u=o.key;null!==l;){if(l.key===u){if(4===l.tag&&l.stateNode.containerInfo===o.containerInfo&&l.stateNode.implementation===o.implementation){n(r,l.sibling),(l=a(l,o.children||[])).return=r,r=l;break e}n(r,l);break}t(r,l),l=l.sibling}(l=Fc(o,r.mode,s)).return=r,r=l}return i(r);case L:return e(r,l,(u=o._init)(o._payload),s)}if(te(o))return p(r,l,o,s);if(D(o))return g(r,l,o,s);vl(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==l&&6===l.tag?(n(r,l.sibling),(l=a(l,o)).return=r,r=l):(n(r,l),(l=Mc(o,r.mode,s)).return=r,r=l),i(r)):n(r,l)}}var wl=bl(!0),xl=bl(!1),kl=Ca(null),Sl=null,Cl=null,Nl=null;function El(){Nl=Cl=Sl=null}function jl(e){var t=kl.current;Na(kl),e._currentValue=t}function _l(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Tl(e,t){Sl=e,Nl=Cl=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bi=!0),e.firstContext=null)}function Rl(e){var t=e._currentValue;if(Nl!==e)if(e={context:e,memoizedValue:t,next:null},null===Cl){if(null===Sl)throw Error(l(308));Cl=e,Sl.dependencies={lanes:0,firstContext:e}}else Cl=Cl.next=e;return t}var Pl=null;function Ll(e){null===Pl?Pl=[e]:Pl.push(e)}function Il(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ll(t)):(n.next=a.next,a.next=n),t.interleaved=n,Al(e,r)}function Al(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Dl=!1;function Ol(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ml(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zl(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_s)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Al(e,n)}return null===(a=r.interleaved)?(t.next=t,Ll(r)):(t.next=a.next,a.next=t),r.interleaved=t,Al(e,n)}function ql(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ul(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,l=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===l?a=l=o:l=l.next=o,n=n.next}while(null!==n);null===l?a=l=t:l=l.next=t}else a=l=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hl(e,t,n,r){var a=e.updateQueue;Dl=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(null!==i){a.shared.pending=null;var s=i,c=s.next;s.next=null,null===o?l=c:o.next=c,o=s;var u=e.alternate;null!==u&&((i=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===i?u.firstBaseUpdate=c:i.next=c,u.lastBaseUpdate=s))}if(null!==l){var d=a.baseState;for(o=0,u=c=s=null,i=l;;){var f=i.lane,h=i.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:h,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var m=e,p=i;switch(f=t,h=n,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=p.payload)?m.call(h,d,f):m)||void 0===f)break e;d=M({},d,f);break e;case 2:Dl=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[i]:f.push(i))}else h={eventTime:h,lane:f,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===u?(c=u=h,s=d):u=u.next=h,o|=f;if(null===(i=i.next)){if(null===(i=a.shared.pending))break;i=(f=i).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===u&&(s=d),a.baseState=s,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===l&&(a.shared.lanes=0);Os|=o,e.lanes=o,e.memoizedState=d}}function Wl(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(l(191,a));a.call(r)}}}var Bl={},Vl=Ca(Bl),$l=Ca(Bl),Yl=Ca(Bl);function Kl(e){if(e===Bl)throw Error(l(174));return e}function Gl(e,t){switch(Ea(Yl,t),Ea($l,e),Ea(Vl,Bl),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Na(Vl),Ea(Vl,t)}function Ql(){Na(Vl),Na($l),Na(Yl)}function Xl(e){Kl(Yl.current);var t=Kl(Vl.current),n=se(t,e.type);t!==n&&(Ea($l,e),Ea(Vl,n))}function Jl(e){$l.current===e&&(Na(Vl),Na($l))}var Zl=Ca(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,ao=w.ReactCurrentBatchConfig,lo=0,oo=null,io=null,so=null,co=!1,uo=!1,fo=0,ho=0;function mo(){throw Error(l(321))}function po(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function go(e,t,n,r,a,o){if(lo=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ei,e=n(r,a),uo){o=0;do{if(uo=!1,fo=0,25<=o)throw Error(l(301));o+=1,so=io=null,t.updateQueue=null,ro.current=ti,e=n(r,a)}while(uo)}if(ro.current=Jo,t=null!==io&&null!==io.next,lo=0,so=io=oo=null,co=!1,t)throw Error(l(300));return e}function vo(){var e=0!==fo;return fo=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===so?oo.memoizedState=so=e:so=so.next=e,so}function bo(){if(null===io){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=io.next;var t=null===so?oo.memoizedState:so.next;if(null!==t)so=t,io=e;else{if(null===e)throw Error(l(310));e={memoizedState:(io=e).memoizedState,baseState:io.baseState,baseQueue:io.baseQueue,queue:io.queue,next:null},null===so?oo.memoizedState=so=e:so=so.next=e}return so}function wo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var r=io,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var s=i=null,c=null,u=o;do{var d=u.lane;if((lo&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(s=c=f,i=r):c=c.next=f,oo.lanes|=d,Os|=d}u=u.next}while(null!==u&&u!==o);null===c?i=r:c.next=s,ir(r,t.memoizedState)||(bi=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,oo.lanes|=o,Os|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ko(e){var t=bo(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var i=a=a.next;do{o=e(o,i.action),i=i.next}while(i!==a);ir(o,t.memoizedState)||(bi=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function Co(e,t){var n=oo,r=bo(),a=t(),o=!ir(r.memoizedState,a);if(o&&(r.memoizedState=a,bi=!0),r=r.queue,Oo(jo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==so&&1&so.memoizedState.tag){if(n.flags|=2048,Po(9,Eo.bind(null,n,r,a,t),void 0,null),null===Ts)throw Error(l(349));0!==(30&lo)||No(n,t,a)}return a}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Eo(e,t,n,r){t.value=n,t.getSnapshot=r,_o(t)&&To(e)}function jo(e,t,n){return n((function(){_o(t)&&To(e)}))}function _o(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ir(e,n)}catch(r){return!0}}function To(e){var t=Al(e,1);null!==t&&nc(t,e,1,-1)}function Ro(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return bo().memoizedState}function Io(e,t,n,r){var a=yo();oo.flags|=e,a.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Ao(e,t,n,r){var a=bo();r=void 0===r?null:r;var l=void 0;if(null!==io){var o=io.memoizedState;if(l=o.destroy,null!==r&&po(r,o.deps))return void(a.memoizedState=Po(t,n,l,r))}oo.flags|=e,a.memoizedState=Po(1|t,n,l,r)}function Do(e,t){return Io(8390656,8,e,t)}function Oo(e,t){return Ao(2048,8,e,t)}function Mo(e,t){return Ao(4,2,e,t)}function Fo(e,t){return Ao(4,4,e,t)}function zo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ao(4,4,zo.bind(null,t,e),n)}function Uo(){}function Ho(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&po(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&po(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bo(e,t,n){return 0===(21&lo)?(e.baseState&&(e.baseState=!1,bi=!0),e.memoizedState=n):(ir(n,t)||(n=pt(),oo.lanes|=n,Os|=n,e.baseState=!0),t)}function Vo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{bt=n,ao.transition=r}}function $o(){return bo().memoizedState}function Yo(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Go(e))Qo(t,n);else if(null!==(n=Il(e,t,n,r))){nc(n,e,r,ec()),Xo(n,t,r)}}function Ko(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Go(e))Qo(t,a);else{var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var o=t.lastRenderedState,i=l(o,n);if(a.hasEagerState=!0,a.eagerState=i,ir(i,o)){var s=t.interleaved;return null===s?(a.next=a,Ll(t)):(a.next=s.next,s.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Il(e,t,a,r))&&(nc(n,e,r,a=ec()),Xo(n,t,r))}}function Go(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Qo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Jo={readContext:Rl,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},Zo={readContext:Rl,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Rl,useEffect:Do,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Io(4194308,4,zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Io(4194308,4,e,t)},useInsertionEffect:function(e,t){return Io(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Ro,useDebugValue:Uo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=Vo.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,a=yo();if(al){if(void 0===n)throw Error(l(407));n=n()}else{if(n=t(),null===Ts)throw Error(l(349));0!==(30&lo)||No(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Do(jo.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,Eo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Ts.identifierPrefix;if(al){var n=Xa;t=":"+t+"R"+(n=(Qa&~(1<<32-ot(Qa)-1)).toString(32)+n),0<(n=fo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ho++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ei={readContext:Rl,useCallback:Ho,useContext:Rl,useEffect:Oo,useImperativeHandle:qo,useInsertionEffect:Mo,useLayoutEffect:Fo,useMemo:Wo,useReducer:xo,useRef:Lo,useState:function(){return xo(wo)},useDebugValue:Uo,useDeferredValue:function(e){return Bo(bo(),io.memoizedState,e)},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:Co,useId:$o,unstable_isNewReconciler:!1},ti={readContext:Rl,useCallback:Ho,useContext:Rl,useEffect:Oo,useImperativeHandle:qo,useInsertionEffect:Mo,useLayoutEffect:Fo,useMemo:Wo,useReducer:ko,useRef:Lo,useState:function(){return ko(wo)},useDebugValue:Uo,useDeferredValue:function(e){var t=bo();return null===io?t.memoizedState=e:Bo(t,io.memoizedState,e)},useTransition:function(){return[ko(wo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:Co,useId:$o,unstable_isNewReconciler:!1};function ni(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ri(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ai={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),l=Fl(r,a);l.payload=t,void 0!==n&&null!==n&&(l.callback=n),null!==(t=zl(e,l,a))&&(nc(t,e,a,r),ql(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),l=Fl(r,a);l.tag=1,l.payload=t,void 0!==n&&null!==n&&(l.callback=n),null!==(t=zl(e,l,a))&&(nc(t,e,a,r),ql(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=Fl(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=zl(e,a,r))&&(nc(t,e,r,n),ql(t,e,r))}};function li(e,t,n,r,a,l,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,l,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(a,l))}function oi(e,t,n){var r=!1,a=ja,l=t.contextType;return"object"===typeof l&&null!==l?l=Rl(l):(a=La(t)?Ra:_a.current,l=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pa(e,a):ja),t=new t(n,l),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ai,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function ii(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ai.enqueueReplaceState(t,t.state,null)}function si(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ol(e);var l=t.contextType;"object"===typeof l&&null!==l?a.context=Rl(l):(l=La(t)?Ra:_a.current,a.context=Pa(e,l)),a.state=e.memoizedState,"function"===typeof(l=t.getDerivedStateFromProps)&&(ri(e,t,l,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ai.enqueueReplaceState(a,a.state,null),Hl(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function ci(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var a=n}catch(l){a="\nError generating stack: "+l.message+"\n"+l.stack}return{value:e,source:t,stack:a,digest:null}}function ui(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function di(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fi="function"===typeof WeakMap?WeakMap:Map;function hi(e,t,n){(n=Fl(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bs||(Bs=!0,Vs=r),di(0,t)},n}function mi(e,t,n){(n=Fl(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){di(0,t)}}var l=e.stateNode;return null!==l&&"function"===typeof l.componentDidCatch&&(n.callback=function(){di(0,t),"function"!==typeof r&&(null===$s?$s=new Set([this]):$s.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pi(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fi;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function gi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vi(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fl(-1,1)).tag=2,zl(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yi=w.ReactCurrentOwner,bi=!1;function wi(e,t,n,r){t.child=null===e?xl(t,null,n,r):wl(t,e.child,n,r)}function xi(e,t,n,r,a){n=n.render;var l=t.ref;return Tl(t,a),r=go(e,t,n,r,l,a),n=vo(),null===e||bi?(al&&n&&el(t),t.flags|=1,wi(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bi(e,t,a))}function ki(e,t,n,r,a){if(null===e){var l=n.type;return"function"!==typeof l||Lc(l)||void 0!==l.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ac(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,Si(e,t,l,r,a))}if(l=e.child,0===(e.lanes&a)){var o=l.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Bi(e,t,a)}return t.flags|=1,(e=Ic(l,r)).ref=t.ref,e.return=t,t.child=e}function Si(e,t,n,r,a){if(null!==e){var l=e.memoizedProps;if(sr(l,r)&&e.ref===t.ref){if(bi=!1,t.pendingProps=r=l,0===(e.lanes&a))return t.lanes=e.lanes,Bi(e,t,a);0!==(131072&e.flags)&&(bi=!0)}}return Ei(e,t,n,r,a)}function Ci(e,t,n){var r=t.pendingProps,a=r.children,l=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(Is,Ls),Ls|=n;else{if(0===(1073741824&n))return e=null!==l?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ea(Is,Ls),Ls|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==l?l.baseLanes:n,Ea(Is,Ls),Ls|=r}else null!==l?(r=l.baseLanes|n,t.memoizedState=null):r=n,Ea(Is,Ls),Ls|=r;return wi(e,t,a,n),t.child}function Ni(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ei(e,t,n,r,a){var l=La(n)?Ra:_a.current;return l=Pa(t,l),Tl(t,a),n=go(e,t,n,r,l,a),r=vo(),null===e||bi?(al&&r&&el(t),t.flags|=1,wi(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bi(e,t,a))}function ji(e,t,n,r,a){if(La(n)){var l=!0;Oa(t)}else l=!1;if(Tl(t,a),null===t.stateNode)Wi(e,t),oi(t,n,r),si(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,i=t.memoizedProps;o.props=i;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rl(c):c=Pa(t,c=La(n)?Ra:_a.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(i!==r||s!==c)&&ii(t,o,r,c),Dl=!1;var f=t.memoizedState;o.state=f,Hl(t,r,o,a),s=t.memoizedState,i!==r||f!==s||Ta.current||Dl?("function"===typeof u&&(ri(t,n,u,r),s=t.memoizedState),(i=Dl||li(t,n,i,r,f,s,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=i):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ml(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:ni(t.type,i),o.props=c,d=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Rl(s):s=Pa(t,s=La(n)?Ra:_a.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(i!==d||f!==s)&&ii(t,o,r,s),Dl=!1,f=t.memoizedState,o.state=f,Hl(t,r,o,a);var m=t.memoizedState;i!==d||f!==m||Ta.current||Dl?("function"===typeof h&&(ri(t,n,h,r),m=t.memoizedState),(c=Dl||li(t,n,c,r,f,m,s)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,m,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,m,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return _i(e,t,n,r,l,a)}function _i(e,t,n,r,a,l){Ni(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&Ma(t,n,!1),Bi(e,t,l);r=t.stateNode,yi.current=t;var i=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=wl(t,e.child,null,l),t.child=wl(t,null,i,l)):wi(e,t,i,l),t.memoizedState=r.state,a&&Ma(t,n,!0),t.child}function Ti(e){var t=e.stateNode;t.pendingContext?Aa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Aa(0,t.context,!1),Gl(e,t.containerInfo)}function Ri(e,t,n,r,a){return hl(),ml(a),t.flags|=256,wi(e,t,n,r),t.child}var Pi,Li,Ii,Ai,Di={dehydrated:null,treeContext:null,retryLane:0};function Oi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mi(e,t,n){var r,a=t.pendingProps,o=Zl.current,i=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ea(Zl,1&o),null===e)return cl(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=a.children,e=a.fallback,i?(a=t.mode,i=t.child,s={mode:"hidden",children:s},0===(1&a)&&null!==i?(i.childLanes=0,i.pendingProps=s):i=Oc(s,a,0,null),e=Dc(e,a,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Oi(n),t.memoizedState=Di,e):Fi(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,i){if(n)return 256&t.flags?(t.flags&=-257,zi(e,t,i,r=ui(Error(l(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Oc({mode:"visible",children:r.children},a,0,null),(o=Dc(o,a,i,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&wl(t,e.child,null,i),t.child.memoizedState=Oi(i),t.memoizedState=Di,o);if(0===(1&t.mode))return zi(e,t,i,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var s=r.dgst;return r=s,zi(e,t,i,r=ui(o=Error(l(419)),r,void 0))}if(s=0!==(i&e.childLanes),bi||s){if(null!==(r=Ts)){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|i))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Al(e,a),nc(r,e,a,-1))}return pc(),zi(e,t,i,r=ui(Error(l(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=jc.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,rl=ca(a.nextSibling),nl=t,al=!0,ll=null,null!==e&&(Ya[Ka++]=Qa,Ya[Ka++]=Xa,Ya[Ka++]=Ga,Qa=e.id,Xa=e.overflow,Ga=t),t=Fi(t,r.children),t.flags|=4096,t)}(e,t,s,a,r,o,n);if(i){i=a.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&s)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ic(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?i=Ic(r,i):(i=Dc(i,s,n,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,s=null===(s=e.child.memoizedState)?Oi(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=Di,a}return e=(i=e.child).sibling,a=Ic(i,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Fi(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zi(e,t,n,r){return null!==r&&ml(r),wl(t,e.child,null,n),(e=Fi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qi(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_l(e.return,t,n)}function Ui(e,t,n,r,a){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function Hi(e,t,n){var r=t.pendingProps,a=r.revealOrder,l=r.tail;if(wi(e,t,r.children,n),0!==(2&(r=Zl.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qi(e,n,t);else if(19===e.tag)qi(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ea(Zl,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Ui(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===eo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Ui(t,!0,n,null,l);break;case"together":Ui(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wi(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bi(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Os|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vi(e,t){if(!al)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $i(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yi(e,t,n){var r=t.pendingProps;switch(tl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $i(t),null;case 1:case 17:return La(t.type)&&Ia(),$i(t),null;case 3:return r=t.stateNode,Ql(),Na(Ta),Na(_a),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(dl(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ll&&(oc(ll),ll=null))),Li(e,t),$i(t),null;case 5:Jl(t);var a=Kl(Yl.current);if(n=t.type,null!==e&&null!=t.stateNode)Ii(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(l(166));return $i(t),null}if(e=Kl(Vl.current),dl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fa]=t,r[ha]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Dr.length;a++)zr(Dr[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Q(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ae(r,o),zr("invalid",r)}for(var s in ye(n,o),a=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),a=["children",""+c]):i.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&zr("scroll",r)}switch(n){case"input":$(r),Z(r,o,!0);break;case"textarea":$(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fa]=t,e[ha]=r,Pi(e,t,!1,!1),t.stateNode=e;e:{switch(s=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Dr.length;a++)zr(Dr[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":Q(e,r),a=G(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=M({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(o in ye(n,a),c=a)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&fe(e,u):"number"===typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(i.hasOwnProperty(o)?null!=u&&"onScroll"===o&&zr("scroll",e):null!=u&&b(e,o,u,s))}switch(n){case"input":$(e),Z(e,r,!1);break;case"textarea":$(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+B(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $i(t),null;case 6:if(e&&null!=t.stateNode)Ai(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(l(166));if(n=Kl(Yl.current),Kl(Vl.current),dl(t)){if(r=t.stateNode,n=t.memoizedProps,r[fa]=t,(o=r.nodeValue!==n)&&null!==(e=nl))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fa]=t,t.stateNode=r}return $i(t),null;case 13:if(Na(Zl),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(al&&null!==rl&&0!==(1&t.mode)&&0===(128&t.flags))fl(),hl(),t.flags|=98560,o=!1;else if(o=dl(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(l(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(l(317));o[fa]=t}else hl(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$i(t),o=!1}else null!==ll&&(oc(ll),ll=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zl.current)?0===As&&(As=3):pc())),null!==t.updateQueue&&(t.flags|=4),$i(t),null);case 4:return Ql(),Li(e,t),null===e&&Hr(t.stateNode.containerInfo),$i(t),null;case 10:return jl(t.type._context),$i(t),null;case 19:if(Na(Zl),null===(o=t.memoizedState))return $i(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Vi(o,!1);else{if(0!==As||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=eo(e))){for(t.flags|=128,Vi(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ea(Zl,1&Zl.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Hs&&(t.flags|=128,r=!0,Vi(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vi(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!al)return $i(t),null}else 2*Xe()-o.renderingStartTime>Hs&&1073741824!==n&&(t.flags|=128,r=!0,Vi(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Zl.current,Ea(Zl,r?1&n|2:1&n),t):($i(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ls)&&($i(t),6&t.subtreeFlags&&(t.flags|=8192)):$i(t),null;case 24:case 25:return null}throw Error(l(156,t.tag))}function Ki(e,t){switch(tl(t),t.tag){case 1:return La(t.type)&&Ia(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ql(),Na(Ta),Na(_a),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jl(t),null;case 13:if(Na(Zl),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));hl()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Na(Zl),null;case 4:return Ql(),null;case 10:return jl(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Li=function(){},Ii=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Kl(Vl.current);var l,o=null;switch(n){case"input":a=G(e,a),r=G(e,r),o=[];break;case"select":a=M({},a,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var s=a[u];for(l in s)s.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(i.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(s=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==s&&(null!=c||null!=s))if("style"===u)if(s){for(l in s)!s.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&s[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(i.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ai=function(e,t,n,r){n!==r&&(t.flags|=4)};var Gi=!1,Qi=!1,Xi="function"===typeof WeakSet?WeakSet:Set,Ji=null;function Zi(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,void 0!==l&&es(t,n,l)}a=a.next}while(a!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ls(e){var t=e.alternate;null!==t&&(e.alternate=null,ls(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fa],delete t[ha],delete t[pa],delete t[ga],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function is(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var us=null,ds=!1;function fs(e,t,n){for(n=n.child;null!==n;)hs(e,t,n),n=n.sibling}function hs(e,t,n){if(lt&&"function"===typeof lt.onCommitFiberUnmount)try{lt.onCommitFiberUnmount(at,n)}catch(i){}switch(n.tag){case 5:Qi||Zi(n,t);case 6:var r=us,a=ds;us=null,fs(e,t,n),ds=a,null!==(us=r)&&(ds?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ds?(e=us,n=n.stateNode,8===e.nodeType?sa(e.parentNode,n):1===e.nodeType&&sa(e,n),Ht(e)):sa(us,n.stateNode));break;case 4:r=us,a=ds,us=n.stateNode.containerInfo,ds=!0,fs(e,t,n),us=r,ds=a;break;case 0:case 11:case 14:case 15:if(!Qi&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var l=a,o=l.destroy;l=l.tag,void 0!==o&&(0!==(2&l)||0!==(4&l))&&es(n,t,o),a=a.next}while(a!==r)}fs(e,t,n);break;case 1:if(!Qi&&(Zi(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Cc(n,t,i)}fs(e,t,n);break;case 21:fs(e,t,n);break;case 22:1&n.mode?(Qi=(r=Qi)||null!==n.memoizedState,fs(e,t,n),Qi=r):fs(e,t,n);break;default:fs(e,t,n)}}function ms(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xi),t.forEach((function(t){var r=_c.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ps(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,i=t,s=i;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ds=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ds=!0;break e}s=s.return}if(null===us)throw Error(l(160));hs(o,i,a),us=null,ds=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Cc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gs(t,e),t=t.sibling}function gs(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ps(t,e),vs(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(g){Cc(e,e.return,g)}try{ns(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:ps(t,e),vs(e),512&r&&null!==n&&Zi(n,n.return);break;case 5:if(ps(t,e),vs(e),512&r&&null!==n&&Zi(n,n.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,i=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(a,o),be(s,i);var u=be(s,o);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];"style"===d?ge(a,f):"dangerouslySetInnerHTML"===d?de(a,f):"children"===d?fe(a,f):b(a,d,f,u)}switch(s){case"input":J(a,o);break;case"textarea":le(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var m=o.value;null!=m?ne(a,!!o.multiple,m,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[ha]=o}catch(g){Cc(e,e.return,g)}}break;case 6:if(ps(t,e),vs(e),4&r){if(null===e.stateNode)throw Error(l(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(g){Cc(e,e.return,g)}}break;case 3:if(ps(t,e),vs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:ps(t,e),vs(e);break;case 13:ps(t,e),vs(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Us=Xe())),4&r&&ms(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qi=(u=Qi)||d,ps(t,e),Qi=u):ps(t,e),vs(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Ji=e,d=e.child;null!==d;){for(f=Ji=d;null!==Ji;){switch(m=(h=Ji).child,h.tag){case 0:case 11:case 14:case 15:ns(4,h,h.return);break;case 1:Zi(h,h.return);var p=h.stateNode;if("function"===typeof p.componentWillUnmount){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:Zi(h,h.return);break;case 22:if(null!==h.memoizedState){xs(f);continue}}null!==m?(m.return=h,Ji=m):xs(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{a=f.stateNode,u?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,i=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",i))}catch(g){Cc(e,e.return,g)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ps(t,e),vs(e),4&r&&ms(e);case 21:}}function vs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(l(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(fe(a,""),r.flags&=-33),cs(e,is(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,is(e),o);break;default:throw Error(l(161))}}catch(i){Cc(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ys(e,t,n){Ji=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Ji;){var a=Ji,l=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Gi;if(!o){var i=a.alternate,s=null!==i&&null!==i.memoizedState||Qi;i=Gi;var c=Qi;if(Gi=o,(Qi=s)&&!c)for(Ji=a;null!==Ji;)s=(o=Ji).child,22===o.tag&&null!==o.memoizedState?ks(a):null!==s?(s.return=o,Ji=s):ks(a);for(;null!==l;)Ji=l,bs(l,t,n),l=l.sibling;Ji=a,Gi=i,Qi=c}ws(e)}else 0!==(8772&a.subtreeFlags)&&null!==l?(l.return=a,Ji=l):ws(e)}}function ws(e){for(;null!==Ji;){var t=Ji;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qi||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qi)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ni(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Wl(t,o,r);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wl(t,i,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Ht(f)}}}break;default:throw Error(l(163))}Qi||512&t.flags&&as(t)}catch(h){Cc(t,t.return,h)}}if(t===e){Ji=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ji=n;break}Ji=t.return}}function xs(e){for(;null!==Ji;){var t=Ji;if(t===e){Ji=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ji=n;break}Ji=t.return}}function ks(e){for(;null!==Ji;){var t=Ji;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Cc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(s){Cc(t,a,s)}}var l=t.return;try{as(t)}catch(s){Cc(t,l,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Cc(t,o,s)}}}catch(s){Cc(t,t.return,s)}if(t===e){Ji=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Ji=i;break}Ji=t.return}}var Ss,Cs=Math.ceil,Ns=w.ReactCurrentDispatcher,Es=w.ReactCurrentOwner,js=w.ReactCurrentBatchConfig,_s=0,Ts=null,Rs=null,Ps=0,Ls=0,Is=Ca(0),As=0,Ds=null,Os=0,Ms=0,Fs=0,zs=null,qs=null,Us=0,Hs=1/0,Ws=null,Bs=!1,Vs=null,$s=null,Ys=!1,Ks=null,Gs=0,Qs=0,Xs=null,Js=-1,Zs=0;function ec(){return 0!==(6&_s)?Xe():-1!==Js?Js:Js=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&_s)&&0!==Ps?Ps&-Ps:null!==pl.transition?(0===Zs&&(Zs=pt()),Zs):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Qs)throw Qs=0,Xs=null,Error(l(185));vt(e,n,r),0!==(2&_s)&&e===Ts||(e===Ts&&(0===(2&_s)&&(Ms|=n),4===As&&ic(e,Ps)),rc(e,r),1===n&&0===_s&&0===(1&t.mode)&&(Hs=Xe()+500,za&&Ha()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-ot(l),i=1<<o,s=a[o];-1===s?0!==(i&n)&&0===(i&r)||(a[o]=ht(i,t)):s<=t&&(e.expiredLanes|=i),l&=~i}}(e,t);var r=ft(e,e===Ts?Ps:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){za=!0,Ua(e)}(sc.bind(null,e)):Ua(sc.bind(null,e)),oa((function(){0===(6&_s)&&Ha()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Js=-1,Zs=0,0!==(6&_s))throw Error(l(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ft(e,e===Ts?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=_s;_s|=2;var o=mc();for(Ts===e&&Ps===t||(Ws=null,Hs=Xe()+500,fc(e,t));;)try{yc();break}catch(s){hc(e,s)}El(),Ns.current=o,_s=a,null!==Rs?t=0:(Ts=null,Ps=0,t=As)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(r=a,t=lc(e,a))),1===t)throw n=Ds,fc(e,0),ic(e,r),rc(e,Xe()),n;if(6===t)ic(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!ir(l(),a))return!1}catch(i){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(o=mt(e))&&(r=o,t=lc(e,o))),1===t))throw n=Ds,fc(e,0),ic(e,r),rc(e,Xe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(l(345));case 2:case 5:xc(e,qs,Ws);break;case 3:if(ic(e,r),(130023424&r)===r&&10<(t=Us+500-Xe())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xc.bind(null,e,qs,Ws),t);break}xc(e,qs,Ws);break;case 4:if(ic(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var i=31-ot(r);o=1<<i,(i=t[i])>a&&(a=i),r&=~o}if(r=a,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cs(r/1960))-r)){e.timeoutHandle=ra(xc.bind(null,e,qs,Ws),r);break}xc(e,qs,Ws);break;default:throw Error(l(329))}}}return rc(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function lc(e,t){var n=zs;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=qs,qs=n,null!==t&&oc(t)),e}function oc(e){null===qs?qs=e:qs.push.apply(qs,e)}function ic(e,t){for(t&=~Fs,t&=~Ms,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&_s))throw Error(l(327));kc();var t=ft(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=lc(e,r))}if(1===n)throw n=Ds,fc(e,0),ic(e,t),rc(e,Xe()),n;if(6===n)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,qs,Ws),rc(e,Xe()),null}function cc(e,t){var n=_s;_s|=1;try{return e(t)}finally{0===(_s=n)&&(Hs=Xe()+500,za&&Ha())}}function uc(e){null!==Ks&&0===Ks.tag&&0===(6&_s)&&kc();var t=_s;_s|=1;var n=js.transition,r=bt;try{if(js.transition=null,bt=1,e)return e()}finally{bt=r,js.transition=n,0===(6&(_s=t))&&Ha()}}function dc(){Ls=Is.current,Na(Is)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(tl(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ia();break;case 3:Ql(),Na(Ta),Na(_a),no();break;case 5:Jl(r);break;case 4:Ql();break;case 13:case 19:Na(Zl);break;case 10:jl(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Ts=e,Rs=e=Ic(e.current,null),Ps=Ls=t,As=0,Ds=null,Fs=Ms=Os=0,qs=zs=null,null!==Pl){for(t=0;t<Pl.length;t++)if(null!==(r=(n=Pl[t]).interleaved)){n.interleaved=null;var a=r.next,l=n.pending;if(null!==l){var o=l.next;l.next=a,r.next=o}n.pending=r}Pl=null}return e}function hc(e,t){for(;;){var n=Rs;try{if(El(),ro.current=Jo,co){for(var r=oo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}co=!1}if(lo=0,so=io=oo=null,uo=!1,fo=0,Es.current=null,null===n||null===n.return){As=1,Ds=t,Rs=null;break}e:{var o=e,i=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=s,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=gi(i);if(null!==m){m.flags&=-257,vi(m,i,s,0,t),1&m.mode&&pi(o,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){pi(o,u,t),pc();break e}c=Error(l(426))}else if(al&&1&s.mode){var v=gi(i);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vi(v,i,s,0,t),ml(ci(c,s));break e}}o=c=ci(c,s),4!==As&&(As=2),null===zs?zs=[o]:zs.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ul(o,hi(0,c,t));break e;case 1:s=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===$s||!$s.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ul(o,mi(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function mc(){var e=Ns.current;return Ns.current=Jo,null===e?Jo:e}function pc(){0!==As&&3!==As&&2!==As||(As=4),null===Ts||0===(268435455&Os)&&0===(268435455&Ms)||ic(Ts,Ps)}function gc(e,t){var n=_s;_s|=2;var r=mc();for(Ts===e&&Ps===t||(Ws=null,fc(e,t));;)try{vc();break}catch(a){hc(e,a)}if(El(),_s=n,Ns.current=r,null!==Rs)throw Error(l(261));return Ts=null,Ps=0,As}function vc(){for(;null!==Rs;)bc(Rs)}function yc(){for(;null!==Rs&&!Ge();)bc(Rs)}function bc(e){var t=Ss(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?wc(e):Rs=t,Es.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yi(n,t,Ls)))return void(Rs=n)}else{if(null!==(n=Ki(n,t)))return n.flags&=32767,void(Rs=n);if(null===e)return As=6,void(Rs=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===As&&(As=5)}function xc(e,t,n){var r=bt,a=js.transition;try{js.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Ks);if(0!==(6&_s))throw Error(l(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),l=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~l}}(e,o),e===Ts&&(Rs=Ts=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ys||(Ys=!0,Tc(tt,(function(){return kc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=js.transition,js.transition=null;var i=bt;bt=1;var s=_s;_s|=4,Es.current=null,function(e,t){if(ea=Bt,hr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var i=0,s=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==n||0!==a&&3!==f.nodeType||(s=i+a),f!==o||0!==r&&3!==f.nodeType||(c=i+r),3===f.nodeType&&(i+=f.nodeValue.length),null!==(m=f.firstChild);)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++u===a&&(s=i),h===o&&++d===r&&(c=i),null!==(m=f.nextSibling))break;h=(f=h).parentNode}f=m}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Bt=!1,Ji=t;null!==Ji;)if(e=(t=Ji).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ji=e;else for(;null!==Ji;){t=Ji;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ni(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(l(163))}}catch(x){Cc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ji=e;break}Ji=t.return}p=ts,ts=!1}(e,n),gs(n,e),mr(ta),Bt=!!ea,ta=ea=null,e.current=n,ys(n,e,a),Qe(),_s=s,bt=i,js.transition=o}else e.current=n;if(Ys&&(Ys=!1,Ks=e,Gs=a),o=e.pendingLanes,0===o&&($s=null),function(e){if(lt&&"function"===typeof lt.onCommitFiberRoot)try{lt.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Bs)throw Bs=!1,e=Vs,Vs=null,e;0!==(1&Gs)&&0!==e.tag&&kc(),o=e.pendingLanes,0!==(1&o)?e===Xs?Qs++:(Qs=0,Xs=e):Qs=0,Ha()}(e,t,n,r)}finally{js.transition=a,bt=r}return null}function kc(){if(null!==Ks){var e=wt(Gs),t=js.transition,n=bt;try{if(js.transition=null,bt=16>e?16:e,null===Ks)var r=!1;else{if(e=Ks,Ks=null,Gs=0,0!==(6&_s))throw Error(l(331));var a=_s;for(_s|=4,Ji=e.current;null!==Ji;){var o=Ji,i=o.child;if(0!==(16&Ji.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var u=s[c];for(Ji=u;null!==Ji;){var d=Ji;switch(d.tag){case 0:case 11:case 15:ns(8,d,o)}var f=d.child;if(null!==f)f.return=d,Ji=f;else for(;null!==Ji;){var h=(d=Ji).sibling,m=d.return;if(ls(d),d===u){Ji=null;break}if(null!==h){h.return=m,Ji=h;break}Ji=m}}}var p=o.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ji=o}}if(0!==(2064&o.subtreeFlags)&&null!==i)i.return=o,Ji=i;else e:for(;null!==Ji;){if(0!==(2048&(o=Ji).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ji=y;break e}Ji=o.return}}var b=e.current;for(Ji=b;null!==Ji;){var w=(i=Ji).child;if(0!==(2064&i.subtreeFlags)&&null!==w)w.return=i,Ji=w;else e:for(i=b;null!==Ji;){if(0!==(2048&(s=Ji).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(k){Cc(s,s.return,k)}if(s===i){Ji=null;break e}var x=s.sibling;if(null!==x){x.return=s.return,Ji=x;break e}Ji=s.return}}if(_s=a,Ha(),lt&&"function"===typeof lt.onPostCommitFiberRoot)try{lt.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{bt=n,js.transition=t}}return!1}function Sc(e,t,n){e=zl(e,t=hi(0,t=ci(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$s||!$s.has(r))){t=zl(t,e=mi(t,e=ci(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ts===e&&(Ps&n)===n&&(4===As||3===As&&(130023424&Ps)===Ps&&500>Xe()-Us?fc(e,0):Fs|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Al(e,t))&&(vt(e,t,n),rc(e,n))}function jc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function _c(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(l(314))}null!==r&&r.delete(t),Ec(e,n)}function Tc(e,t){return Ye(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ac(e,t,n,r,a,o){var i=2;if(r=e,"function"===typeof e)Lc(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case S:return Dc(n.children,a,o,t);case C:i=8,a|=8;break;case N:return(e=Pc(12,n,t,2|a)).elementType=N,e.lanes=o,e;case T:return(e=Pc(13,n,t,a)).elementType=T,e.lanes=o,e;case R:return(e=Pc(19,n,t,a)).elementType=R,e.lanes=o,e;case I:return Oc(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:i=10;break e;case j:i=9;break e;case _:i=11;break e;case P:i=14;break e;case L:i=16,r=null;break e}throw Error(l(130,null==e?e:typeof e,""))}return(t=Pc(i,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Dc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,a,l,o,i,s){return e=new zc(e,t,n,i,s),1===t?(t=1,!0===l&&(t|=8)):t=0,l=Pc(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ol(l),e}function Uc(e){if(!e)return ja;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(l(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(La(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(l(171))}if(1===e.tag){var n=e.type;if(La(n))return Da(e,n,t)}return t}function Hc(e,t,n,r,a,l,o,i,s){return(e=qc(n,r,!0,e,0,l,0,i,s)).context=Uc(null),n=e.current,(l=Fl(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,zl(n,l,a),e.current.lanes=a,vt(e,a,r),rc(e,r),e}function Wc(e,t,n,r){var a=t.current,l=ec(),o=tc(a);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fl(l,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zl(a,t,o))&&(nc(e,a,o,l),ql(e,a,o)),o}function Bc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $c(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)bi=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bi=!1,function(e,t,n){switch(t.tag){case 3:Ti(t),hl();break;case 5:Xl(t);break;case 1:La(t.type)&&Oa(t);break;case 4:Gl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ea(kl,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ea(Zl,1&Zl.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mi(e,t,n):(Ea(Zl,1&Zl.current),null!==(e=Bi(e,t,n))?e.sibling:null);Ea(Zl,1&Zl.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hi(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(Zl,Zl.current),r)break;return null;case 22:case 23:return t.lanes=0,Ci(e,t,n)}return Bi(e,t,n)}(e,t,n);bi=0!==(131072&e.flags)}else bi=!1,al&&0!==(1048576&t.flags)&&Za(t,$a,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wi(e,t),e=t.pendingProps;var a=Pa(t,_a.current);Tl(t,n),a=go(null,t,r,e,a,n);var o=vo();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,La(r)?(o=!0,Oa(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ol(t),a.updater=ai,t.stateNode=a,a._reactInternals=t,si(t,r,e,n),t=_i(null,t,r,!0,o,n)):(t.tag=0,al&&o&&el(t),wi(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wi(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===P)return 14}return 2}(r),e=ni(r,e),a){case 0:t=Ei(null,t,r,e,n);break e;case 1:t=ji(null,t,r,e,n);break e;case 11:t=xi(null,t,r,e,n);break e;case 14:t=ki(null,t,r,ni(r.type,e),n);break e}throw Error(l(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ei(e,t,r,a=t.elementType===r?a:ni(r,a),n);case 1:return r=t.type,a=t.pendingProps,ji(e,t,r,a=t.elementType===r?a:ni(r,a),n);case 3:e:{if(Ti(t),null===e)throw Error(l(387));r=t.pendingProps,a=(o=t.memoizedState).element,Ml(e,t),Hl(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ri(e,t,r,n,a=ci(Error(l(423)),t));break e}if(r!==a){t=Ri(e,t,r,n,a=ci(Error(l(424)),t));break e}for(rl=ca(t.stateNode.containerInfo.firstChild),nl=t,al=!0,ll=null,n=xl(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hl(),r===a){t=Bi(e,t,n);break e}wi(e,t,r,n)}t=t.child}return t;case 5:return Xl(t),null===e&&cl(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,na(r,a)?i=null:null!==o&&na(r,o)&&(t.flags|=32),Ni(e,t),wi(e,t,i,n),t.child;case 6:return null===e&&cl(t),null;case 13:return Mi(e,t,n);case 4:return Gl(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wl(t,null,r,n):wi(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,xi(e,t,r,a=t.elementType===r?a:ni(r,a),n);case 7:return wi(e,t,t.pendingProps,n),t.child;case 8:case 12:return wi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,Ea(kl,r._currentValue),r._currentValue=i,null!==o)if(ir(o.value,i)){if(o.children===a.children&&!Ta.current){t=Bi(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){i=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Fl(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_l(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)i=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(i=o.return))throw Error(l(341));i.lanes|=n,null!==(s=i.alternate)&&(s.lanes|=n),_l(i,n,t),i=o.sibling}else i=o.child;if(null!==i)i.return=o;else for(i=o;null!==i;){if(i===t){i=null;break}if(null!==(o=i.sibling)){o.return=i.return,i=o;break}i=i.return}o=i}wi(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Tl(t,n),r=r(a=Rl(a)),t.flags|=1,wi(e,t,r,n),t.child;case 14:return a=ni(r=t.type,t.pendingProps),ki(e,t,r,a=ni(r.type,a),n);case 15:return Si(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ni(r,a),Wi(e,t),t.tag=1,La(r)?(e=!0,Oa(t)):e=!1,Tl(t,n),oi(t,r,a),si(t,r,a,n),_i(null,t,r,!0,e,n);case 19:return Hi(e,t,n);case 22:return Ci(e,t,n)}throw Error(l(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,a){var l=n._reactRootContainer;if(l){var o=l;if("function"===typeof a){var i=a;a=function(){var e=Bc(o);i.call(e)}}Wc(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var l=r;r=function(){var e=Bc(o);l.call(e)}}var o=Hc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[ma]=o.current,Hr(8===e.nodeType?e.parentNode:e),uc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var i=r;r=function(){var e=Bc(s);i.call(e)}}var s=qc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=s,e[ma]=s.current,Hr(8===e.nodeType?e.parentNode:e),uc((function(){Wc(t,s,n,r)})),s}(n,t,e,a,r);return Bc(o)}Gc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));Wc(e,t,null,null)},Gc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Wc(null,e,null,null)})),t[ma]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&_s)&&(Hs=Xe()+500,Ha()))}break;case 13:uc((function(){var t=Al(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),$c(e,1)}},kt=function(e){if(13===e.tag){var t=Al(e,134217728);if(null!==t)nc(t,e,134217728,ec());$c(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Al(e,t);if(null!==n)nc(n,e,t,ec());$c(e,t)}},Ct=function(){return bt},Nt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=xa(r);if(!a)throw Error(l(90));Y(r),J(r,a)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[ba,wa,xa,Ee,je,cc]},tu={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),lt=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(l(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(l(299));var n=!1,r="",a=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,a),e[ma]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(l(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(l(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",i=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,a,0,o,i),e[ma]=t.current,Hr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Gc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(l(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(l(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ma]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(l(200));if(null==e||void 0===e._reactInternals)throw Error(l(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,n),l.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var l=Object.create(null);n.r(l);var o={};e=e||[null,t({}),t([]),t(t)];for(var i=2&a&&r;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(l,o),l}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".d4fab04e.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="modern-web-app:";n.l=(r,a,l,o)=>{if(e[r])e[r].push(a);else{var i,s;if(void 0!==l)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+l){i=d;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+l),i.src=r),e[r]=[a];var f=(t,n)=>{i.onerror=i.onload=null,clearTimeout(h);var a=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(n))),t)return t(n)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),s&&document.head.appendChild(i)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/wikipedia-app-prototype/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var l=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=l);var o=n.p+n.u(t),i=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var l=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+l+": "+o+")",i.name="ChunkLoadError",i.type=l,i.request=o,a[1](i)}}),"chunk-"+t,t)}};var t=(t,r)=>{var a,l,o=r[0],i=r[1],s=r[2],c=0;if(o.some((t=>0!==e[t]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(s)s(n)}for(t&&t(r);c<o.length;c++)l=o[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0},r=self.webpackChunkmodern_web_app=self.webpackChunkmodern_web_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r,a=n(43),l=n.t(a,2),o=n(391);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const s="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(e,t,n,a){void 0===a&&(a={});let{window:l=document.defaultView,v5Compat:o=!1}=a,u=l.history,m=r.Pop,p=null,g=v();function v(){return(u.state||{idx:null}).idx}function y(){m=r.Pop;let e=v(),t=null==e?null:e-g;g=e,p&&p({action:m,location:w.location,delta:t})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(i({},u.state,{idx:g}),""));let w={get action(){return m},get location(){return e(l,u)},listen(e){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(s,y),p=e,()=>{l.removeEventListener(s,y),p=null}},createHref:e=>t(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){m=r.Push;let a=f(w.location,e,t);n&&n(a,e),g=v()+1;let i=d(a,g),s=w.createHref(a);try{u.pushState(i,"",s)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;l.location.assign(s)}o&&p&&p({action:m,location:w.location,delta:1})},replace:function(e,t){m=r.Replace;let a=f(w.location,e,t);n&&n(a,e),g=v();let l=d(a,g),i=w.createHref(a);u.replaceState(l,"",i),o&&p&&p({action:m,location:w.location,delta:0})},go:e=>u.go(e)};return w}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let a=L(("string"===typeof t?m(t):t).pathname||"/",n);if(null==a)return null;let l=b(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(l);let o=null;for(let i=0;null==o&&i<l.length;++i){let e=P(a);o=T(l[i],e,r)}return o}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,l)=>{let o={relativePath:void 0===l?e.path||"":l,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let i=M([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+i+'".'),b(e.children,t,s,i)),(null!=e.path||e.index)&&t.push({path:i,score:_(i,e.index),routesMeta:s})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))a(e,t,r);else a(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(0===r.length)return a?[l,""]:[l];let o=w(r.join("/")),i=[];return i.push(...o.map((e=>""===e?l:[l,e].join("/")))),a&&i.push(...o),i.map((t=>e.startsWith("/")&&""===t?"/":t))}const x=/^:[\w-]+$/,k=3,S=2,C=1,N=10,E=-2,j=e=>"*"===e;function _(e,t){let n=e.split("/"),r=n.length;return n.some(j)&&(r+=E),t&&(r+=S),n.filter((e=>!j(e))).reduce(((e,t)=>e+(x.test(t)?k:""===t?C:N)),r)}function T(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,a={},l="/",o=[];for(let i=0;i<r.length;++i){let e=r[i],s=i===r.length-1,c="/"===l?t:t.slice(l.length)||"/",u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},c),d=e.route;if(!u&&s&&n&&!r[r.length-1].route.index&&(u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:M([l,u.pathname]),pathnameBase:F(M([l,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(l=M([l,u.pathnameBase]))}return o}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let l=new RegExp(a,t?void 0:"i");return[l,r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=i[n]||"";o=l.slice(0,l.length-e.length).replace(/(.)\/+$/,"$1")}const s=i[n];return e[r]=a&&!s?void 0:(s||"").replace(/%2F/g,"/"),e}),{}),pathname:l,pathnameBase:o,pattern:e}}function P(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function L(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function I(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function A(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function D(e,t){let n=A(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function O(e,t,n,r){let a;void 0===r&&(r=!1),"string"===typeof e?a=m(e):(a=i({},e),c(!a.pathname||!a.pathname.includes("?"),I("?","pathname","search",a)),c(!a.pathname||!a.pathname.includes("#"),I("#","pathname","hash",a)),c(!a.search||!a.search.includes("#"),I("#","search","hash",a)));let l,o=""===e||""===a.pathname,s=o?"/":a.pathname;if(null==s)l=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}l=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"===typeof e?m(e):e,l=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:l,search:z(r),hash:q(a)}}(a,l),d=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!f||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],W=(new Set(H),["get",...H]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const V=a.createContext(null);const $=a.createContext(null);const Y=a.createContext(null);const K=a.createContext(null);const G=a.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=a.createContext(null);function X(){return null!=a.useContext(K)}function J(){return X()||c(!1),a.useContext(K).location}function Z(e){a.useContext(Y).static||a.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=a.useContext(G);return e?function(){let{router:e}=ue(se.UseNavigateStable),t=fe(ce.UseNavigateStable),n=a.useRef(!1);return Z((()=>{n.current=!0})),a.useCallback((function(r,a){void 0===a&&(a={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,B({fromRouteId:t},a)))}),[e,t])}():function(){X()||c(!1);let e=a.useContext(V),{basename:t,future:n,navigator:r}=a.useContext(Y),{matches:l}=a.useContext(G),{pathname:o}=J(),i=JSON.stringify(D(l,n.v7_relativeSplatPath)),s=a.useRef(!1);return Z((()=>{s.current=!0})),a.useCallback((function(n,a){if(void 0===a&&(a={}),!s.current)return;if("number"===typeof n)return void r.go(n);let l=O(n,JSON.parse(i),o,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:M([t,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)}),[t,r,i,o,e])}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=a.useContext(Y),{matches:l}=a.useContext(G),{pathname:o}=J(),i=JSON.stringify(D(l,r.v7_relativeSplatPath));return a.useMemo((()=>O(e,JSON.parse(i),o,"path"===n)),[e,i,o,n])}function ne(e,t,n,l){X()||c(!1);let{navigator:o}=a.useContext(Y),{matches:i}=a.useContext(G),s=i[i.length-1],u=s?s.params:{},d=(s&&s.pathname,s?s.pathnameBase:"/");s&&s.route;let f,h=J();if(t){var p;let e="string"===typeof t?m(t):t;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||c(!1),f=e}else f=h;let g=f.pathname||"/",y=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(e,{pathname:y});let w=ie(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:M([d,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:M([d,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),i,n,l);return t&&w?a.createElement(K.Provider,{value:{location:B({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:r.Pop}},w):w}function re(){let e=function(){var e;let t=a.useContext(Q),n=de(ce.UseRouteError),r=fe(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),n?a.createElement("pre",{style:l},n):null,null)}const ae=a.createElement(re,null);class le extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(G.Provider,{value:this.props.routeContext},a.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:n,children:r}=e,l=a.useContext(V);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),a.createElement(G.Provider,{value:t},r)}function ie(e,t,n,r){var l;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let i=e,s=null==(l=n)?void 0:l.errors;if(null!=s){let e=i.findIndex((e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id])));e>=0||c(!1),i=i.slice(0,Math.min(i.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let a=0;a<i.length;a++){let e=i[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=a),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){u=!0,i=d>=0?i.slice(0,d+1):[i[0]];break}}}return i.reduceRight(((e,r,l)=>{let o,c=!1,f=null,h=null;var m;n&&(o=s&&r.route.id?s[r.route.id]:void 0,f=r.route.errorElement||ae,u&&(d<0&&0===l?(m="route-fallback",!1||he[m]||(he[m]=!0),c=!0,h=null):d===l&&(c=!0,h=r.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,l+1)),g=()=>{let t;return t=o?f:c?h:r.route.Component?a.createElement(r.route.Component,null):r.route.element?r.route.element:e,a.createElement(oe,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===l)?a.createElement(le,{location:n.location,revalidation:n.revalidation,component:f,error:o,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()}),null)}var se=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(se||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let t=a.useContext(V);return t||c(!1),t}function de(e){let t=a.useContext($);return t||c(!1),t}function fe(e){let t=function(){let e=a.useContext(G);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const he={};function me(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}l.startTransition;function pe(e){let{to:t,replace:n,state:r,relative:l}=e;X()||c(!1);let{future:o,static:i}=a.useContext(Y),{matches:s}=a.useContext(G),{pathname:u}=J(),d=ee(),f=O(t,D(s,o.v7_relativeSplatPath),u,"path"===l),h=JSON.stringify(f);return a.useEffect((()=>d(JSON.parse(h),{replace:n,state:r,relative:l})),[d,h,l,n,r]),null}function ge(e){c(!1)}function ve(e){let{basename:t="/",children:n=null,location:l,navigationType:o=r.Pop,navigator:i,static:s=!1,future:u}=e;X()&&c(!1);let d=t.replace(/^\/*/,"/"),f=a.useMemo((()=>({basename:d,navigator:i,static:s,future:B({v7_relativeSplatPath:!1},u)})),[d,u,i,s]);"string"===typeof l&&(l=m(l));let{pathname:h="/",search:p="",hash:g="",state:v=null,key:y="default"}=l,b=a.useMemo((()=>{let e=L(h,d);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:y},navigationType:o}}),[d,h,p,g,v,y,o]);return null==b?null:a.createElement(Y.Provider,{value:f},a.createElement(K.Provider,{children:n,value:b}))}function ye(e){let{children:t,location:n}=e;return ne(be(t),n)}new Promise((()=>{}));a.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return a.Children.forEach(e,((e,r)=>{if(!a.isValidElement(e))return;let l=[...t,r];if(e.type===a.Fragment)return void n.push.apply(n,be(e.props.children,l));e.type!==ge&&c(!1),e.props.index&&e.props.children&&c(!1);let o={id:e.props.id||l.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=be(e.props.children,l)),n.push(o)})),n}var we=n(950),xe=n.t(we,2);function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Ce(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map((e=>[n,e])):[[n,r]])}),[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ne=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(_n){}new Map;const Ee=l.startTransition;xe.flushSync,l.useId;function je(e){let{basename:t,children:n,future:r,window:l}=e,o=a.useRef();var i;null==o.current&&(o.current=(void 0===(i={window:l,v5Compat:!0})&&(i={}),p((function(e,t){let{pathname:n,search:r,hash:a}=e.location;return f("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:h(t)}),null,i)));let s=o.current,[c,u]=a.useState({action:s.action,location:s.location}),{v7_startTransition:d}=r||{},m=a.useCallback((e=>{d&&Ee?Ee((()=>u(e))):u(e)}),[u,d]);return a.useLayoutEffect((()=>s.listen(m)),[s,m]),a.useEffect((()=>me(r)),[r]),a.createElement(ve,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:s,future:r})}const _e="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=a.forwardRef((function(e,t){let n,{onClick:r,relative:l,reloadDocument:o,replace:i,state:s,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,p=Se(e,Ne),{basename:g}=a.useContext(Y),v=!1;if("string"===typeof d&&Te.test(d)&&(n=d,_e))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=L(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:v=!0}catch(_n){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;X()||c(!1);let{basename:r,navigator:l}=a.useContext(Y),{hash:o,pathname:i,search:s}=te(e,{relative:n}),u=i;return"/"!==r&&(u="/"===i?r:M([r,i])),l.createHref({pathname:u,search:s,hash:o})}(d,{relative:l}),b=function(e,t){let{target:n,replace:r,state:l,preventScrollReset:o,relative:i,viewTransition:s}=void 0===t?{}:t,c=ee(),u=J(),d=te(e,{relative:i});return a.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:h(u)===h(d);c(e,{replace:n,state:l,preventScrollReset:o,relative:i,viewTransition:s})}}),[u,c,d,r,l,n,e,o,i,s])}(d,{replace:i,state:s,target:u,preventScrollReset:f,relative:l,viewTransition:m});return a.createElement("a",ke({},p,{href:n||y,onClick:v||o?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:u}))}));var Pe,Le;function Ie(e){let t=a.useRef(Ce(e)),n=a.useRef(!1),r=J(),l=a.useMemo((()=>function(e,t){let n=Ce(e);return t&&t.forEach(((e,r)=>{n.has(r)||t.getAll(r).forEach((e=>{n.append(r,e)}))})),n}(r.search,n.current?null:t.current)),[r.search]),o=ee(),i=a.useCallback(((e,t)=>{const r=Ce("function"===typeof e?e(l):e);n.current=!0,o("?"+r,t)}),[o,l]);return[l,i]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Pe||(Pe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Le||(Le={}));var Ae=n(579);const De=()=>{const e=J(),t=t=>"/"===t?"/"===e.pathname:"/games"===t?e.pathname.startsWith("/games"):e.pathname===t||e.pathname.startsWith("".concat(t,"/"));return(0,Ae.jsxs)("nav",{className:"nav-bar",children:[(0,Ae.jsxs)(Re,{to:"/explore",className:"nav-item ".concat(t("/explore")?"active":""),children:[(0,Ae.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",children:(0,Ae.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z",fill:"currentColor"})}),"Explore"]}),(0,Ae.jsxs)(Re,{to:"/search",className:"nav-item ".concat(t("/search")?"active":""),children:[(0,Ae.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",children:(0,Ae.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z",fill:"currentColor"})}),"Search"]}),(0,Ae.jsxs)(Re,{to:"/history",className:"nav-item ".concat(t("/history")?"active":""),children:[(0,Ae.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",children:(0,Ae.jsx)("path",{d:"M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66.19-.34.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21z",fill:"currentColor"})}),"Activity"]}),(0,Ae.jsxs)(Re,{to:"/games",className:"nav-item ".concat(t("/games")?"active":""),children:[(0,Ae.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",children:(0,Ae.jsx)("path",{d:"M4 6h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2zm4 3H6v2H4v2h2v2h2v-2h2v-2H8V9zm8 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-3 4a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm4 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z",fill:"currentColor"})}),"Games"]})]})},Oe="wikipedia_history",Me="wikipedia_history_update",Fe=()=>{const e=localStorage.getItem(Oe);if(!e)return[];try{return JSON.parse(e)}catch(t){return console.error("Error parsing history:",t),[]}},ze=Me;function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function Ue(e){var t=function(e,t){if("object"!=qe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qe(t)?t:t+""}function He(e,t,n){return(t=Ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ve="https://en.wikipedia.org/w/api.php",$e=async e=>{const t=new URLSearchParams({action:"query",list:"search",srsearch:e,format:"json",origin:"*",srlimit:"10"});try{const e=await fetch("".concat(Ve,"?").concat(t)),n=await e.json(),r=n.query.search.map((e=>({title:decodeURIComponent(e.title.replace(/_/g," ")),snippet:e.snippet,pageid:e.pageid,imagesLoading:!0})));return await Promise.all(r.map((async e=>{const t=await Ze(e.title);return Be(Be({},e),{},{images:t.slice(0,4),imagesLoading:!1})})))}catch(n){return console.error("Error searching Wikipedia:",n),[]}},Ye=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2500;const t="whatInTheWiki_featuredArticleTitles_v1";try{const e=localStorage.getItem(t);if(e){const t=JSON.parse(e);if(Array.isArray(t.titles)&&Date.now()-t.timestamp<6048e5&&t.titles.length>0)return t.titles}}catch(c){}let n,r=[];for(;r.length<e;){var a,l,o;const t=new URLSearchParams({action:"query",titles:"Wikipedia:Featured_articles",prop:"links",plnamespace:"0",pllimit:"max",format:"json",origin:"*"});n&&t.set("plcontinue",n);const i=await fetch("".concat(Ve,"?").concat(t));if(!i.ok){console.error("API_FEATURED_LIST_ERROR: Failed to fetch featured article link list:",i.status,await i.text());break}const s=await i.json(),c=(null===s||void 0===s||null===(a=s.query)||void 0===a?void 0:a.pages)||{},u=Object.keys(c)[0],d=((null===c||void 0===c||null===(l=c[u])||void 0===l?void 0:l.links)||[]).map((e=>null===e||void 0===e?void 0:e.title)).filter((e=>"string"===typeof e&&e.length>0));if(r=[...r,...d].slice(0,e),n=null===s||void 0===s||null===(o=s.continue)||void 0===o?void 0:o.plcontinue,!n)break}const i=new Set,s=r.filter((e=>!i.has(e)&&(i.add(e),!0)));try{localStorage.setItem(t,JSON.stringify({timestamp:Date.now(),titles:s}))}catch(u){}return s},Ke=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e||0===e.length)return null;const n=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return e[(Math.floor(n/864e5)%e.length+e.length)%e.length]},Ge=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;try{const t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0"),a="https://en.wikipedia.org/api/rest_v1/feed/featured/".concat(t,"/").concat(n,"/").concat(r);console.log("API_WIKIFEEDS: Fetching from:",a);const l=await fetch(a);if(!l.ok){const e=await l.text().catch((()=>""));return console.error("API_WIKIFEEDS_ERROR: Failed to fetch featured article from main page:",l.status,l.statusText,e),null}return function(e){try{var t,n;const r=null===e||void 0===e?void 0:e.tfa;if(!r)return console.error("API_WIKIFEEDS_ERROR: TFA field not found in response. Available keys:",Object.keys(e||{})),null;if(console.log("API_WIKIFEEDS: TFA data structure:",{hasContentUrls:!!r.content_urls,hasTitle:!!r.title,hasNormalizedTitle:!!r.normalizedtitle,hasDisplayTitle:!!r.displaytitle}),null!==(t=r.content_urls)&&void 0!==t&&null!==(n=t.desktop)&&void 0!==n&&n.page){const e=r.content_urls.desktop.page.match(/\/wiki\/(.+)$/);if(e&&e[1]){const t=decodeURIComponent(e[1].replace(/_/g," "));return console.log("API_WIKIFEEDS: Extracted title from content_urls:",t),t}}if(r.title)return console.log("API_WIKIFEEDS: Using direct title field:",r.title),r.title;if(r.normalizedtitle)return console.log("API_WIKIFEEDS: Using normalizedtitle:",r.normalizedtitle),r.normalizedtitle;if(r.displaytitle){const e=r.displaytitle.replace(/<[^>]*>/g,"").trim();if(e)return console.log("API_WIKIFEEDS: Using displaytitle (cleaned):",e),e}return console.error("API_WIKIFEEDS_ERROR: Could not extract featured article title from response. TFA structure:",JSON.stringify(r,null,2)),null}catch(r){return console.error("API_WIKIFEEDS_ERROR: Error extracting title:",r),null}}(await l.json())}catch(t){return console.error("API_WIKIFEEDS_ERROR: Error fetching featured article from Wikifeeds:",t),null}};const Qe=async e=>{try{var t;const n="https://en.wikipedia.org/api/rest_v1/page/summary/".concat(encodeURIComponent(e.replace(/ /g,"_"))),r=await fetch(n);if(!r.ok)return console.error("API_SUMMARY_ERROR: Failed to fetch page summary:",r.status,await r.text()),null;const a=await r.json();return{title:(null===a||void 0===a?void 0:a.title)||e,extract:(null===a||void 0===a?void 0:a.extract)||"",thumbnailUrl:(null===a||void 0===a||null===(t=a.thumbnail)||void 0===t?void 0:t.source)||null,description:(null===a||void 0===a?void 0:a.description)||void 0}}catch(n){return console.error("API_SUMMARY_CATCH_ERROR:",n),null}},Xe=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;const n=new URLSearchParams({action:"query",prop:"categories",titles:e,clshow:"!hidden",cllimit:"max",format:"json",origin:"*",redirects:"1"});try{var r,a;const e=await fetch("".concat(Ve,"?").concat(n));if(!e.ok)return console.error("API_CATEGORIES_ERROR:",e.status,await e.text()),[];const l=await e.json(),o=(null===l||void 0===l||null===(r=l.query)||void 0===r?void 0:r.pages)||{},i=Object.keys(o)[0],s=(null===o||void 0===o||null===(a=o[i])||void 0===a?void 0:a.categories)||[];return s.map((e=>"string"===typeof(null===e||void 0===e?void 0:e.title)?e.title:"")).filter(Boolean).map((e=>e.replace(/^Category:/,""))).slice(0,t)}catch(l){return console.error("API_CATEGORIES_CATCH_ERROR:",l),[]}},Je=async e=>{const t=new URLSearchParams({action:"parse",page:e,prop:"sections",format:"json",origin:"*",redirects:"1"});try{var n;const e=await fetch("".concat(Ve,"?").concat(t));if(!e.ok)return console.error("API_SECTIONS_ERROR:",e.status,await e.text()),[];const r=await e.json();return((null===r||void 0===r||null===(n=r.parse)||void 0===n?void 0:n.sections)||[]).map((e=>{var t,n,r,a;return{toclevel:Number(null!==(t=null===e||void 0===e?void 0:e.toclevel)&&void 0!==t?t:0),line:String(null!==(n=null===e||void 0===e?void 0:e.line)&&void 0!==n?n:""),anchor:String(null!==(r=null===e||void 0===e?void 0:e.anchor)&&void 0!==r?r:""),number:String(null!==(a=null===e||void 0===e?void 0:e.number)&&void 0!==a?a:"")}}))}catch(r){return console.error("API_SECTIONS_CATCH_ERROR:",r),[]}},Ze=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{let r=[];if(t)try{const t=await et(e),n=(new DOMParser).parseFromString(t,"text/html");n.querySelectorAll(".infobox, .infobox_v2, .infobox_v3, table.infobox").forEach((e=>{e.querySelectorAll('a[href*="/wiki/File:"]').forEach((e=>{const t=e.getAttribute("href");if(t){const e=t.match(/\/wiki\/(File:[^#]+)/);if(e){const t=decodeURIComponent(e[1]);r.includes(t)||r.push(t)}}}));e.querySelectorAll("img").forEach((e=>{const t=e.closest('a[href*="/wiki/File:"]');if(t){const e=t.getAttribute("href");if(e){const t=e.match(/\/wiki\/(File:[^#]+)/);if(t){const e=decodeURIComponent(t[1]);r.includes(e)||r.push(e)}}}}))}))}catch(n){}const a=new URLSearchParams({action:"query",prop:"images|imageinfo",titles:e,imlimit:t?"10":"4",iiprop:"url|extmetadata",format:"json",origin:"*"}),l=await fetch("".concat(Ve,"?").concat(a)),o=(await l.json()).query.pages,i=Object.keys(o)[0],s=(o[i].images||[]).filter((e=>e.title.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)));let c;if(t&&r.length>0){const e=new Set(r.map((e=>e.toLowerCase()))),t=[],n=[];s.forEach((r=>{e.has(r.title.toLowerCase())?t.push(r):n.push(r)})),c=t.length>0?[t[0]]:n.slice(0,1)}else c=s.slice(0,4);const u=c.map((async e=>{var t,n,r;const a=new URLSearchParams({action:"query",prop:"imageinfo",titles:e.title,iiprop:"url|extmetadata",format:"json",origin:"*"}),l=await fetch("".concat(Ve,"?").concat(a)),o=(await l.json()).query.pages,i=null===(t=o[Object.keys(o)[0]].imageinfo)||void 0===t?void 0:t[0];return i?{title:e.title,url:i.url,description:(null===(n=i.extmetadata)||void 0===n||null===(r=n.ImageDescription)||void 0===r?void 0:r.value)||""}:null}));return(await Promise.all(u)).filter((e=>null!==e))}catch(n){return n instanceof TypeError&&n.message.includes("Failed to fetch")||console.error("Error fetching article images:",n),[]}},et=async e=>{const t=new URLSearchParams({action:"parse",page:e,format:"json",prop:"text",origin:"*",disableeditsection:"1",mobileformat:"1"});try{const e=await fetch("".concat(Ve,"?").concat(t));return(await e.json()).parse.text["*"]||"No content found."}catch(n){return console.error("Error fetching article:",n),"Error loading article content."}},tt=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=new URLSearchParams({action:"query",list:"search",srsearch:"morelike:".concat(e),format:"json",origin:"*",srlimit:t.toString(),srprop:"snippet"});try{const e=await fetch("".concat(Ve,"?").concat(n)),t=(await e.json()).query.search;if(!t||0===t.length)return[];const r=t.map((e=>({title:decodeURIComponent(e.title.replace(/_/g," ")),snippet:e.snippet,pageid:e.pageid,imagesLoading:!0})));return await Promise.all(r.map((async e=>{const t=await Ze(e.title.replace(/ /g,"_"));return Be(Be({},e),{},{images:t.slice(0,1),imagesLoading:!1})})))}catch(r){return console.error('Error fetching more like articles for "'.concat(e,'":'),r),[]}},nt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;const t=new URLSearchParams({action:"parse",page:"Template:Did you know",prop:"text",format:"json",origin:"*"});try{console.log("API_DYK: Fetching from:","".concat(Ve,"?").concat(t));const n=await fetch("".concat(Ve,"?").concat(t));if(!n.ok)return console.error("API_DYK_ERROR: Failed to fetch Did You Know template content:",n.status,await n.text()),[];const r=(await n.json()).parse.text["*"];if(!r)return console.error("API_DYK_ERROR: No HTML content found in parse result for DYK."),[];const a=new DOMParser,l=a.parseFromString(r,"text/html").querySelectorAll("ul > li"),o=[],i=["archive","nominate an article","start a new article","statistics","rules","guidelines","queues","next update","current time","verify","reset","purge","edit","history","prep area"],s=["v","t","e"];return l.forEach((t=>{if(o.length>=e)return;let n=(t.textContent||"").trim();if(!n.startsWith("... ")){if(s.includes(n.toLowerCase()))return;return void i.some((e=>n.toLowerCase().includes(e)&&n.length<30))}let r=n.substring(4).trim();if(r=r.replace(/\s*\(pictured\)/gi,"").replace(/\s*\(listen\)/gi,"").trim(),i.some((e=>r.toLowerCase().includes(e)))&&r.length<50)return;if(s.includes(r.toLowerCase())&&r.length<=1)return;if(r.length<15)return;let a=null;const l=t.querySelector('b a[href^="/wiki/"]');if(l){const e=l.getAttribute("href");if(e){const t=e.substring(6);t.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i)||(a=decodeURIComponent(t).replace(/_/g," "))}}o.push({fact:r,linkedArticleTitle:a})})),console.log("API_DYK: Extracted ".concat(o.length," facts after filtering. Requested limit: ").concat(e),o),o.slice(0,e)}catch(n){return console.error("Error fetching or parsing Did You Know facts:",n),[]}},rt=async e=>{const t=e.replace(/ /g,"_"),n=new URLSearchParams({action:"query",prop:"extracts",titles:t,exintro:"true",explaintext:"true",format:"json",origin:"*",redirects:"1"});try{var r;const t=await fetch("".concat(Ve,"?").concat(n));if(!t.ok)return console.error('API_EXTRACT_ERROR: Failed to fetch extract for "'.concat(e,'":'),t.status,await t.text()),null;const a=await t.json();if(null!==(r=a.query)&&void 0!==r&&r.redirects&&a.query.redirects.length>0){const t=a.query.redirects[0];console.log('API_EXTRACT: "'.concat(e,'" redirected to "').concat(t.to,'"'))}const l=a.query.pages,o=Object.keys(l)[0];if("-1"===o)return console.warn('API_EXTRACT_WARN: Page "'.concat(e,'" not found for extract.')),null;const i=l[o].extract;if(i){const e=350;return i.length>e?i.substring(0,e)+"...":i}return console.warn('API_EXTRACT_WARN: No extract found for "'.concat(e,'" (pageId: ').concat(o,")")),null}catch(a){return console.error('Error fetching article extract for "'.concat(e,'":'),a),null}},at=async e=>{try{const n=e.trim().replace(/ /g,"_");for(const r of["local","central"]){var t;const a=new URLSearchParams({action:"query",prop:"description",titles:n,descprefersource:r,format:"json",origin:"*"}),l="https://en.wikipedia.org/w/api.php?".concat(a),o=await fetch(l);if(!o.ok){if("local"===r)continue;return 429!==o.status&&console.warn('API_SHORT_DESC_WARNING: Failed to fetch short description for "'.concat(e,'":'),o.status),null}const i=await o.json();(e.toLowerCase().includes("teratophoneus")||e.toLowerCase().includes("albertavenator"))&&(e.toLowerCase().includes("teratophoneus")||e.toLowerCase().includes("albertavenator"))&&console.log('[SHORT_DESC_DEBUG] API Response for "'.concat(e,'" (').concat(r,"):"),i);const s=null===i||void 0===i||null===(t=i.query)||void 0===t?void 0:t.pages;if(!s){if((e.toLowerCase().includes("teratophoneus")||e.toLowerCase().includes("albertavenator"))&&(e.toLowerCase().includes("teratophoneus")||e.toLowerCase().includes("albertavenator"))&&console.log("[SHORT_DESC_DEBUG] No pages in response"),"local"===r)continue;return null}const c=Object.values(s)[0];if(!c){if((e.toLowerCase().includes("teratophoneus")||e.toLowerCase().includes("albertavenator"))&&(e.toLowerCase().includes("teratophoneus")||e.toLowerCase().includes("albertavenator"))&&console.log("[SHORT_DESC_DEBUG] No page found in pages object"),"local"===r)continue;return null}if(void 0!==c.missing){if((e.toLowerCase().includes("teratophoneus")||e.toLowerCase().includes("albertavenator"))&&(e.toLowerCase().includes("teratophoneus")||e.toLowerCase().includes("albertavenator"))&&console.log("[SHORT_DESC_DEBUG] Page is missing"),"local"===r)continue;return null}const u=null===c||void 0===c?void 0:c.description;if((e.toLowerCase().includes("albertavenator")||e.toLowerCase().includes("teratophoneus"))&&console.log('[SHORT_DESC_DEBUG] Title: "'.concat(e,'", Source: ').concat(r),{page:c,description:u,descriptionType:typeof u,hasDescription:!!u}),u&&"string"===typeof u){const t=u.trim();if(0===t.length){if((e.toLowerCase().includes("albertavenator")||e.toLowerCase().includes("teratophoneus"))&&console.log("[SHORT_DESC_DEBUG] Empty after trim"),"local"===r)continue;return null}const n=t.replace(/<[^>]*>/g,"").trim();if(0===n.length){if((e.toLowerCase().includes("albertavenator")||e.toLowerCase().includes("teratophoneus"))&&console.log("[SHORT_DESC_DEBUG] Empty after HTML tag removal"),"local"===r)continue;return null}if((e.toLowerCase().includes("albertavenator")||e.toLowerCase().includes("teratophoneus"))&&console.log("[SHORT_DESC_DEBUG] Processing description from ".concat(r,': "').concat(n,'" (').concat(n.length," chars)")),n.length>100){if((e.toLowerCase().includes("albertavenator")||e.toLowerCase().includes("teratophoneus"))&&console.log("[SHORT_DESC_DEBUG] REJECTED - Too long: ".concat(n.length,' chars - "').concat(n,'"')),"local"===r)continue;return null}const a=(n.match(/[.!?]/g)||[]).length;if(a>1){if((e.toLowerCase().includes("albertavenator")||e.toLowerCase().includes("teratophoneus"))&&console.log("[SHORT_DESC_DEBUG] REJECTED - Multiple sentences: ".concat(a,' - "').concat(n,'"')),"local"===r)continue;return null}const l=(n.match(/,/g)||[]).length;if(l>2){if((e.toLowerCase().includes("albertavenator")||e.toLowerCase().includes("teratophoneus"))&&console.log("[SHORT_DESC_DEBUG] REJECTED - Too many commas: ".concat(l,' - "').concat(n,'"')),"local"===r)continue;return null}if(n.endsWith(".")&&n.length>60){if((e.toLowerCase().includes("albertavenator")||e.toLowerCase().includes("teratophoneus"))&&console.log('[SHORT_DESC_DEBUG] REJECTED - Ends with period and too long - "'.concat(n,'"')),"local"===r)continue;return null}return(e.toLowerCase().includes("albertavenator")||e.toLowerCase().includes("teratophoneus"))&&console.log("[SHORT_DESC_DEBUG] \u2713 ACCEPTED from ".concat(r,': "').concat(n,'"'),{length:n.length,sentenceCount:a,commaCount:l,endsWithPeriod:n.endsWith(".")}),n}"local"!==r||(e.toLowerCase().includes("albertavenator")||e.toLowerCase().includes("teratophoneus"))&&console.log("[SHORT_DESC_DEBUG] No description in local, trying central")}return(e.toLowerCase().includes("albertavenator")||e.toLowerCase().includes("teratophoneus"))&&console.log("[SHORT_DESC_DEBUG] No description found in local or central sources"),null}catch(n){return console.error('Error fetching short description for "'.concat(e,'":'),n),null}},lt=e=>{let{recommendations:t,onNearEnd:n,currentIndex:r,onCurrentIndexChange:l,onReasonClick:o}=e;const i=(0,a.useRef)(0),s=(0,a.useRef)(0),c=(0,a.useRef)(0),u=(0,a.useRef)(0),d=ee(),f=(0,a.useRef)(!1),h=(0,a.useRef)(null);(0,a.useEffect)((()=>{n&&t.length>0&&r>=t.length-3&&n()}),[r,t,n]);const m=(0,a.useCallback)(((e,t)=>e.recommendation.pageid?"rec-".concat(e.recommendation.pageid):"rec-idx-".concat(t,"-").concat(e.recommendation.title)),[]);return t&&0!==t.length?(0,Ae.jsx)("div",{className:"recommendation-carousel-container",children:(0,Ae.jsx)("div",{className:"recommendation-carousel-track",style:{transform:"translateY(-".concat(100*r,"%)")},onTouchStart:e=>{i.current=e.touches[0].clientY,c.current=e.touches[0].clientX,f.current=!0},onTouchMove:e=>{s.current=e.touches[0].clientY,u.current=e.touches[0].clientX},onTouchEnd:()=>{if(!f.current)return;const e=i.current-s.current,n=c.current-u.current;let a=!1;if(Math.abs(e)>Math.abs(n)&&Math.abs(e)>50)e>0&&r<t.length-1?l(r+1):e<0&&r>0&&l(r-1);else if(n>50&&Math.abs(n)>Math.abs(e)){const e=t[r];e&&(a=!0,h.current=m(e,r),setTimeout((()=>{d("/article/".concat(encodeURIComponent(e.recommendation.title.replace(/ /g,"_")))),h.current=null}),300))}i.current=0,s.current=0,c.current=0,u.current=0,a||setTimeout((()=>{f.current=!1}),100)},children:t.map(((e,t)=>{const n=m(e,t),r=h.current===n;return(0,Ae.jsxs)("div",{className:"recommendation-carousel-slide ".concat(r?"swiped-out-left":""),onClick:t=>((e,t)=>{if(f.current){const t=10,n=Math.abs(c.current-u.current),r=Math.abs(i.current-s.current);if(!(n<t&&r<t&&0!==c.current))return void e.preventDefault()}f.current=!1,d("/article/".concat(encodeURIComponent(t.replace(/ /g,"_"))))})(t,e.recommendation.title),style:{backgroundImage:"url(".concat(e.recommendation.images&&e.recommendation.images[0].url,")")},children:[(0,Ae.jsx)("div",{className:"because-you-read-tag",onClick:e=>{e.stopPropagation(),o()},children:e.reasonText.includes(":")?(0,Ae.jsxs)(Ae.Fragment,{children:[e.reasonText.split(":")[0],": ",(0,Ae.jsx)("em",{children:e.reasonText.split(":").slice(1).join(":")})]}):e.reasonText}),(0,Ae.jsx)("div",{className:"slide-overlay",children:(0,Ae.jsxs)("div",{className:"slide-content",children:[(0,Ae.jsx)("h4",{children:e.recommendation.title}),e.recommendation.snippet&&(0,Ae.jsx)("div",{className:"recommendation-snippet-carousel",dangerouslySetInnerHTML:{__html:e.recommendation.snippet||""}})]})})]},n)}))})}):null},ot=e=>{let{isOpen:t,onClose:n,settings:r,onSettingsChange:a,asPanel:l=!1,onBack:o}=e;if(!l&&!t)return null;const i=(0,Ae.jsxs)(Ae.Fragment,{children:[l&&(0,Ae.jsxs)("div",{className:"s-modal-header panel-header",children:[(0,Ae.jsx)("h3",{children:"Customize Feed"}),o&&(0,Ae.jsx)("button",{onClick:o,className:"s-modal-back-button panel-back-button",children:"\u2190 Back"})]}),!l&&(0,Ae.jsxs)("div",{className:"s-modal-header",children:[(0,Ae.jsx)("h2",{children:"Customize Feed"}),n&&(0,Ae.jsx)("button",{onClick:n,className:"s-modal-close-button",children:"\xd7"})]}),(0,Ae.jsxs)("div",{className:"s-modal-body",children:[(0,Ae.jsx)("p",{className:"s-modal-description",children:"Select the types of recommendations you'd like to see in your Explore feed."}),Object.keys(r).map((e=>{const t=e;let n=e.charAt(0).toUpperCase()+e.slice(1);return"personalized"===e&&(n="Personalized (based on your history)"),"trending"===e&&(n="Trending on Wikipedia"),"random"===e&&(n="Random Discoveries"),(0,Ae.jsxs)("div",{className:"s-setting-item",children:[(0,Ae.jsx)("label",{htmlFor:e,className:"s-checkbox-label",children:n}),(0,Ae.jsx)("input",{type:"checkbox",id:e,checked:r[t],onChange:()=>(e=>{a(Be(Be({},r),{},{[e]:!r[e]}))})(t),className:"s-checkbox"})]},e)}))]}),!l&&n&&(0,Ae.jsx)("div",{className:"s-modal-footer",children:(0,Ae.jsx)("button",{onClick:n,className:"s-modal-done-button",children:"Done"})})]});return l?(0,Ae.jsx)("div",{className:"s-modal-panel-content",children:i}):(0,Ae.jsx)("div",{className:"s-modal-overlay",children:(0,Ae.jsx)("div",{className:"s-modal-content",children:i})})},it="wikipediaAppDonationReminderSettings",st=()=>{const e=localStorage.getItem(it);if(e)try{return JSON.parse(e)}catch(_n){return console.error("Error parsing reminder settings from localStorage",_n),null}return null},ct=e=>{try{localStorage.setItem(it,JSON.stringify(e))}catch(t){console.error("Error saving reminder settings to localStorage",t)}},ut=()=>{const e=st();e&&(e.reminderEnabled=!1,ct(e),console.log("REMINDER_SERVICE: Reminder disabled."))},dt=()=>st(),ft="2.75",ht="100",mt="wikipediaAppLastInitialPromptArticleCount",pt="wikipediaAppShowInitialDonationPrompt",gt=e=>{let{isOpen:t,onClose:n,feedSettings:r,onFeedSettingsChange:l}=e;const[o,i]=(0,a.useState)("main"),[s,c]=(0,a.useState)(!0),[u,d]=(0,a.useState)(ft),[f,h]=(0,a.useState)(ht),[m,p]=(0,a.useState)(!1),[g,v]=(0,a.useState)((()=>{try{const e=localStorage.getItem(pt);return!e||JSON.parse(e)}catch(e){return!0}}));(0,a.useEffect)((()=>{if(t){i("main");const t=dt();t?(c(t.reminderEnabled),d(t.amount||ft),h(t.frequency||ht)):(c(!0),d(ft),h(ht));try{const e=localStorage.getItem(pt);v(!e||JSON.parse(e))}catch(e){v(!0)}p(!0)}else p(!1)}),[t]);const y=e=>{const t=e.target.checked;c(t);const n=dt(),r=n?{amount:n.amount,frequency:n.frequency,articlesViewedSinceReminderSet:n.articlesViewedSinceReminderSet}:{amount:u,frequency:f,articlesViewedSinceReminderSet:0},a=Be(Be({},r),{},{reminderEnabled:t,amount:r.amount||ft,frequency:r.frequency||ht});if(ct(a),!t){v(!1);try{localStorage.setItem(pt,JSON.stringify(!1))}catch(l){console.error("Error saving show initial prompt setting (on global disable):",l)}}try{localStorage.removeItem(mt)}catch(l){console.error("Error clearing last initial prompt article count (on global toggle):",l)}},b=e=>{const t=e.target.checked;v(t);try{localStorage.setItem(pt,JSON.stringify(t)),t&&(localStorage.removeItem(mt),console.log("MAIN_SETTINGS_MODAL: Cleared last initial prompt article count because 'Allow First-Time Prompt' was enabled."))}catch(n){console.error("Error saving/clearing prompt settings:",n)}},w=()=>{const e=parseFloat(u),t=parseInt(f,10);if(isNaN(e)||e<=0)return void alert("Please enter a valid donation amount.");if(isNaN(t)||t<=0)return void alert("Please enter a valid article frequency.");dt();ct({articlesViewedSinceReminderSet:0,amount:u,frequency:f,reminderEnabled:s}),alert("Donation reminder settings saved!")};return!t||"main"===o&&!m?null:(0,Ae.jsx)("div",{className:"m-modal-overlay",children:(0,Ae.jsxs)("div",{className:"m-modal-content",children:["main"===o&&(0,Ae.jsxs)("div",{className:"m-modal-header",children:[(0,Ae.jsx)("h2",{children:"Settings"}),(0,Ae.jsx)("button",{onClick:n,className:"m-modal-close-button","aria-label":"Close settings",children:"\xd7"})]}),(0,Ae.jsxs)("div",{className:"m-modal-body",children:["main"===o&&(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsxs)("div",{className:"m-setting-category m-setting-category-explore",children:[(0,Ae.jsx)("h3",{children:"Explore Feed"}),(0,Ae.jsxs)("button",{className:"m-setting-item-button navigate-button",onClick:()=>i("feedSettings"),children:["Customize Feed Preferences ",(0,Ae.jsx)("span",{className:"m-arrow",children:"\u203a"})]})]}),(0,Ae.jsxs)("div",{className:"m-setting-category m-setting-category-donations",children:[(0,Ae.jsx)("h3",{children:"Donation Reminders"}),(0,Ae.jsx)("div",{className:"m-setting-item",children:(0,Ae.jsxs)("label",{className:"m-toggle-switch-label",children:["Enable All Donation Reminders",(0,Ae.jsx)("input",{type:"checkbox",checked:s,onChange:y,className:"m-toggle-switch"}),(0,Ae.jsx)("span",{className:"m-slider round"})]})}),s&&(0,Ae.jsx)("div",{className:"m-setting-item",children:(0,Ae.jsxs)("label",{className:"m-toggle-switch-label",children:["Always show donation set-up prompt",(0,Ae.jsx)("input",{type:"checkbox",checked:g,onChange:b,className:"m-toggle-switch"}),(0,Ae.jsx)("span",{className:"m-slider round"})]})}),s&&(0,Ae.jsxs)("div",{className:"m-donation-settings-edit",children:[(0,Ae.jsx)("p",{className:"m-settings-description",children:"Customize the reminder that appears after your first-time setup:"}),(0,Ae.jsxs)("div",{className:"m-input-group",children:[(0,Ae.jsx)("label",{htmlFor:"donationAmountMain",children:"Amount ($)"}),(0,Ae.jsx)("input",{type:"number",id:"donationAmountMain",value:u,onChange:e=>d(e.target.value),className:"m-form-input",min:"1",placeholder:ft})]}),(0,Ae.jsxs)("div",{className:"m-input-group",children:[(0,Ae.jsx)("label",{htmlFor:"articleFrequencyMain",children:"Frequency (articles)"}),(0,Ae.jsx)("input",{type:"number",id:"articleFrequencyMain",value:f,onChange:e=>h(e.target.value),className:"m-form-input",min:"1",placeholder:ht})]}),(0,Ae.jsx)("button",{className:"m-button-save-reminder",onClick:w,children:"Save Reminder Preferences"})]})]})]}),"feedSettings"===o&&(0,Ae.jsx)(ot,{asPanel:!0,settings:r,onSettingsChange:l,onBack:()=>i("main")})]})]})})};let vt=0;const yt="homePageFeedState",bt="homePageFeedSettings",wt=()=>{const e=ee(),[t,n]=(0,a.useState)(Fe()),[r,l]=(0,a.useState)([]),[o,i]=(0,a.useState)(!0),s=(0,a.useRef)(!1),[c,u]=(0,a.useState)(new Set),d=(0,a.useRef)(!1),[f,h]=(0,a.useState)(0),m=(0,a.useRef)(null),p=(0,a.useRef)(null),g=(0,a.useRef)(null),[v,y]=(0,a.useState)(!1),[b,w]=(0,a.useState)(!1),[x,k]=(0,a.useState)((()=>{const e=localStorage.getItem(bt);if(e)try{return JSON.parse(e)}catch(_n){console.error("Failed to parse stored feed settings:",_n)}return{personalized:!0,trending:!0,random:!0}}));(0,a.useEffect)((()=>{try{localStorage.setItem(bt,JSON.stringify(x)),console.log("EFFECT_SETTINGS: Saved feed settings to localStorage",x)}catch(e){console.error("EFFECT_SETTINGS_ERROR: Failed to save feed settings:",e)}}),[x]);const S=e=>{console.log("SETTINGS_CHANGE: Settings updated. Resetting UI, useEffect will trigger re-fetch.",e),k(e),l([]),u(new Set),h(0),s.current=!1};(0,a.useEffect)((()=>{try{const e=sessionStorage.getItem(yt);if(e){const t=JSON.parse(e),n=36e5;if(Date.now()-t.timestamp<n)return console.log("EFFECT_INIT: Restoring state from sessionStorage"),l(t.recommendations),u(new Set(t.displayedIds)),h(t.carouselIndex),i(!1),void(d.current=!0);console.log("EFFECT_INIT: Stored state is too old, ignoring.")}}catch(e){console.error("EFFECT_INIT_ERROR: Failed to parse stored state:",e)}}),[]),(0,a.useEffect)((()=>{const e=()=>{if(r.length>0){const t={recommendations:r,displayedIds:Array.from(c),carouselIndex:f,timestamp:Date.now()};try{sessionStorage.setItem(yt,JSON.stringify(t)),console.log("EFFECT_UNLOAD: Saved feed state to sessionStorage")}catch(e){console.error("EFFECT_UNLOAD_ERROR: Failed to save state:",e)}}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e),e()}}),[r,c,f]);const C=(0,a.useCallback)((()=>{console.log("HISTORY_UPDATE: History changed. Clearing stored state and resetting."),sessionStorage.removeItem(yt),n(Fe()),d.current=!1,s.current=!1,h(0)}),[]);(0,a.useEffect)((()=>(window.addEventListener(ze,C),()=>{window.removeEventListener(ze,C)})),[C]);const N=(0,a.useCallback)((async(e,n,r)=>{const a=r||x,o=++vt;if(console.log("FETCH_PROCESS [ID: ".concat(o,"]: Called. isInitial: ").concat(e,", Settings Used:"),JSON.stringify(a),"currentGlobalIdsAtCallTime size: ".concat(n.size)),e)i(!0),s.current=!1;else{if(s.current)return void console.log("FETCH_PROCESS [ID: ".concat(o,"]: Already fetching more (ref check), returning."));s.current=!0}const c=new Set(n);console.log("FETCH_PROCESS [ID: ".concat(o,"]: IDs to filter this batch against (size ").concat(c.size,"):"),Array.from(c));let d=[],f=[],h=[];if(a.personalized&&e&&t.length>0){const e=t.slice().sort(((e,t)=>t.timestamp-e.timestamp)).map((e=>e.title)).filter(((e,t,n)=>n.indexOf(e)===t)).slice(0,4);if(console.log("FETCH_PROCESS [ID: ".concat(o,"]: Personalized seed titles:"),e),e.length>0)try{const n=e.map((async e=>{const t=await tt(e.replace(/ /g,"_"),5);return console.log("FETCH_PROCESS [ID: ".concat(o,"]: Raw personalized for ").concat(e," (count: ").concat(t.length,"):"),t.map((e=>e.pageid))),t.map((t=>({recommendation:t,reasonText:"Because you read: ".concat(e)})))})),r=await Promise.all(n);let a=[];const l=new Set;if(r.length>0){const e=Math.max(...r.map((e=>e.length)));for(let n=0;n<e;n++)for(const e of r)if(e[n]){var m,p;const r=e[n],o=r.recommendation.pageid;!o||null===(m=r.recommendation.images)||void 0===m||null===(p=m[0])||void 0===p||!p.url||t.some((e=>e.title===r.recommendation.title))||c.has(o)||l.has(o)||(a.push(r),l.add(o))}}d=a,console.log("FETCH_PROCESS [ID: ".concat(o,"]: Filtered & interleaved personalized items (pageids):"),d.map((e=>e.recommendation.pageid)))}catch(y){console.error("FETCH_PROCESS_ERROR [ID: ".concat(o,"]: Personalized recs:"),y)}}else e&&console.log("FETCH_PROCESS [ID: ".concat(o,"]: Personalized recs skipped (settings or no history)."));if(a.trending)try{const t=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=new Date,n=new Date(t);n.setDate(t.getDate()-1);const r=n.getFullYear(),a=(n.getMonth()+1).toString().padStart(2,"0"),l=n.getDate().toString().padStart(2,"0"),o="".concat("https://wikimedia.org/api/rest_v1/metrics/pageviews/top","/").concat("en.wikipedia.org","/").concat("all-access","/").concat(r,"/").concat(a,"/").concat(l);console.log("API_TRENDING: Fetching from:",o);try{var i,s,c;const t=await fetch(o),n=await t.text();if(!t.ok)return console.error("API_TRENDING_ERROR: Failed to fetch trending articles list:",t.status,n),[];const r=JSON.parse(n),a=(null===r||void 0===r||null===(i=r.items)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.articles)||[];if(console.log("API_TRENDING: Raw top articles from API:",a.length),0===a.length)return[];const l=a.slice(0,25).map((e=>e.article.replace(/_/g," ")));if(0===l.length)return[];const u=l.join("|"),d=new URLSearchParams({action:"query",prop:"extracts|info",exintro:"true",explaintext:"true",titles:u,format:"json",origin:"*",redirects:"1"}),f=await fetch("".concat(Ve,"?").concat(d));if(!f.ok)return console.error("API_TRENDING_ERROR: Failed to fetch details (pageid/extract) for trending articles:",f.status,await f.text()),[];const h=await f.json(),m=(null===h||void 0===h||null===(c=h.query)||void 0===c?void 0:c.pages)||{};console.log("API_TRENDING: Fetched details for articles.");const p=Object.values(m).map((e=>({title:e.title,pageid:e.pageid,snippet:e.extract,imagesLoading:!0}))).map((async e=>{if(!e.title)return null;const t=await Ze(e.title.replace(/ /g,"_"));return Be(Be({},e),{},{images:t.slice(0,1),imagesLoading:!1})})),g=(await Promise.all(p)).filter(Boolean).filter((e=>e.images&&e.images.length>0&&e.images[0].url));return console.log("API_TRENDING: Processed trending articles with images:",g.length),g.slice(0,e)}catch(y){return console.error("API_TRENDING_CATCH_ERROR: Error fetching/processing trending articles:",y),[]}}(e?Math.floor(12*.3)+5:10);console.log("FETCH_PROCESS [ID: ".concat(o,"]: Raw trending API results (count: ").concat(t.length,", pageids):"),t.map((e=>e.pageid))),f=t.filter((e=>e.pageid&&!c.has(e.pageid))).map((e=>({recommendation:e,reasonText:"Trending Today"}))),console.log("FETCH_PROCESS [ID: ".concat(o,"]: Filtered trending items (pageids):"),f.map((e=>e.recommendation.pageid)))}catch(y){console.error("FETCH_PROCESS_ERROR [ID: ".concat(o,"]: Trending recs:"),y)}else console.log("FETCH_PROCESS [ID: ".concat(o,"]: Trending recs skipped (settings)."));if(a.random)try{const t=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const t=new URLSearchParams({action:"query",list:"random",rnnamespace:"0",rnlimit:(e+5).toString(),format:"json",origin:"*"});try{var n,r;const a=await fetch("".concat(Ve,"?").concat(t));if(!a.ok)return console.error("API_RANDOM_ERROR: Failed to fetch random article titles:",a.status,await a.text()),[];const l=await a.json(),o=(null===l||void 0===l||null===(n=l.query)||void 0===n?void 0:n.random)||[];if(0===o.length)return console.log("API_RANDOM: No random articles returned from initial fetch."),[];console.log("API_RANDOM: Fetched initial random articles info:",o.length);const i=o.map((e=>e.id)).join("|");if(!i)return[];const s=new URLSearchParams({action:"query",prop:"extracts",exintro:"true",explaintext:"true",pageids:i,format:"json",origin:"*"}),c=await fetch("".concat(Ve,"?").concat(s));if(!c.ok)return console.error("API_RANDOM_ERROR: Failed to fetch extracts for random articles:",c.status,await c.text()),[];const u=await c.json(),d=(null===u||void 0===u||null===(r=u.query)||void 0===r?void 0:r.pages)||{};console.log("API_RANDOM: Fetched extracts for articles.");const f=o.map((e=>{const t=d[e.id];return{title:e.title,pageid:e.id,snippet:null===t||void 0===t?void 0:t.extract,imagesLoading:!0}})).map((async e=>{const t=await Ze(e.title.replace(/ /g,"_"));return Be(Be({},e),{},{images:t.slice(0,1),imagesLoading:!1})})),h=(await Promise.all(f)).filter((e=>e.images&&e.images.length>0&&e.images[0].url));return console.log("API_RANDOM: Processed random articles with images:",h.length),h.slice(0,e)}catch(y){return console.error("API_RANDOM_CATCH_ERROR: Error fetching or processing random articles:",y),[]}}(e?Math.floor(12*.2)+5:10);console.log("FETCH_PROCESS [ID: ".concat(o,"]: Raw random API results (count: ").concat(t.length,", pageids):"),t.map((e=>e.pageid))),h=t.filter((e=>e.pageid&&!c.has(e.pageid))).map((e=>({recommendation:e,reasonText:"Random Discovery"}))),console.log("FETCH_PROCESS [ID: ".concat(o,"]: Filtered random items (pageids):"),h.map((e=>e.recommendation.pageid)))}catch(y){console.error("FETCH_PROCESS_ERROR [ID: ".concat(o,"]: Random recs:"),y)}else console.log("FETCH_PROCESS [ID: ".concat(o,"]: Random recs skipped (settings)."));console.log("FETCH_PROCESS [ID: ".concat(o,"]: Intermediate recs counts - Personalized: ").concat(d.length,", Trending: ").concat(f.length,", Random: ").concat(h.length));let g=[];g=e?[...d.slice(0,Math.floor(6)),...f.slice(0,Math.floor(12*.3)),...h.slice(0,Math.floor(12*.2))]:[...f.slice(0,Math.ceil(2.5)),...h.slice(0,Math.floor(2.5))],console.log("FETCH_PROCESS [ID: ".concat(o,"]: Combined newItems before final unique filter (count: ").concat(g.length,", pageids):"),g.map((e=>e.recommendation.pageid)));const v=g.filter(((e,t,n)=>e.recommendation.pageid&&!c.has(e.recommendation.pageid)&&t===n.findIndex((t=>t.recommendation.pageid===e.recommendation.pageid))));if(console.log("FETCH_PROCESS [ID: ".concat(o,"]: Truly new items to add (count: ").concat(v.length,", titles):"),v.map((e=>({title:e.recommendation.title,pageid:e.recommendation.pageid,reason:e.reasonText})))),v.length>0)if(u((e=>{const t=new Set(e);return v.forEach((e=>{e.recommendation.pageid&&t.add(e.recommendation.pageid)})),console.log("FETCH_PROCESS_SETTER [ID: ".concat(o,"]: Updated global displayedPageIds. Old size: ").concat(e.size,", New items added to set: ").concat(v.filter((t=>!e.has(t.recommendation.pageid))).length,", New global size: ").concat(t.size)),t})),e){const e=[...v].sort((()=>.5-Math.random()));console.log("FETCH_PROCESS_SETTER [ID: ".concat(o,"]: isInitial=true. Directly setting recommendations. Count: ").concat(e.length)),l(e)}else l((e=>{console.log("FETCH_PROCESS_SETTER [ID: ".concat(o,"]: Load more. prevRecs.length: ").concat(e.length,", trulyNewItems for this batch: ").concat(v.length));const t=new Set(e.map((e=>e.recommendation.pageid)).filter((e=>void 0!==e))),n=v.filter((e=>!e.recommendation.pageid||!t.has(e.recommendation.pageid)));n.length<v.length&&console.warn("FETCH_PROCESS_SETTER [ID: ".concat(o,"]: Load more - Filtered out ").concat(v.length-n.length," items from trulyNewItems because their pageIDs were already in prevRecs (load more context)."));const r=[...e,...n].sort((()=>.5-Math.random()));console.log("FETCH_PROCESS_SETTER [ID: ".concat(o,"]: Load more - Prev recs: ").concat(e.length,", Filtered New to Add: ").concat(n.length,", Final Combined: ").concat(r.length));const a=r.reduce(((e,t)=>{const n=t.recommendation.pageid;return n&&(e[n]=(e[n]||0)+1),e}),{}),l=Object.entries(a).filter((e=>{let[t,n]=e;return n>1}));return l.length>0&&console.warn("FETCH_PROCESS_SETTER_WARN [ID: ".concat(o,"]: Load more - Duplicates by pageID in finalRecommendations!"),JSON.stringify(l)),r}));else e&&(l([]),console.log("FETCH_PROCESS [ID: ".concat(o,"]: Initial load, but trulyNewItems was empty. Setting empty recommendations.")));e&&i(!1),e||(s.current=!1),console.log("FETCH_PROCESS [ID: ".concat(o,"]: Finished. isFetchingMoreRef.current is now: ").concat(s.current))}),[t,x]);(0,a.useEffect)((()=>{console.log("EFFECT_INIT_OR_SETTINGS_CHANGE: Running. Current feedSettings:",JSON.stringify(x),"Raw history length:",t.length),u(new Set),l([]),s.current=!1,h(0),N(!0,new Set,x)}),[t,x]);const E=e=>{h(e)};(0,a.useEffect)((()=>{const t=t=>{if(0===r.length)return;let n=f,a=!1;if("ArrowDown"===t.key||"ArrowRight"===t.key)n=Math.min(f+1,r.length-1),a=!0;else if("ArrowUp"===t.key||"ArrowLeft"===t.key)n=Math.max(f-1,0),a=!0;else if("Enter"===t.key){const t=r[f];return void(t&&t.recommendation&&t.recommendation.title&&e("/article/".concat(encodeURIComponent(t.recommendation.title.replace(/ /g,"_")))))}a&&n!==f&&(E(n),t.preventDefault())};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),[f,r,E,e]),(0,a.useEffect)((()=>{const e=m.current;if(!e)return;const t=e=>{if(0===r.length)return;e.preventDefault();let t=f;e.deltaY>0?t=Math.min(f+1,r.length-1):e.deltaY<0&&(t=Math.max(f-1,0)),t!==f&&E(t)};return e.addEventListener("wheel",t,{passive:!1}),()=>{e.removeEventListener("wheel",t)}}),[f,r,E]),(0,a.useEffect)((()=>{const e=m.current;if(!e)return;const t=e=>{0!==r.length&&(p.current=e.touches[0].clientX,g.current=e.touches[0].clientY)},n=e=>{if(null===p.current||null===g.current||0===r.length)return;const t=e.touches[0].clientX,n=e.touches[0].clientY,a=t-p.current,l=n-g.current;let o=f,i=!1;Math.abs(a)>Math.abs(l)&&Math.abs(a)>30?(o=a<0?Math.min(f+1,r.length-1):Math.max(f-1,0),i=!0):Math.abs(l)>Math.abs(a)&&Math.abs(l)>30&&(o=l>0?Math.min(f+1,r.length-1):Math.max(f-1,0),i=!0),i&&o!==f&&(E(o),e.preventDefault()),(i||Math.abs(a)>5||Math.abs(l)>5)&&(p.current=null,g.current=null)};return e.addEventListener("touchstart",t,{passive:!0}),e.addEventListener("touchmove",n,{passive:!1}),()=>{e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",n)}}),[f,r,E]);const j=(0,a.useCallback)((()=>{const e=new Set(c);console.log("CALLBACK_NEAR_END: Triggered. Current recs: ".concat(r.length,", Current global IDs for next fetch: ").concat(e.size)),N(!1,e,x)}),[N,c,r.length,x]);console.log("RENDER: LoadingStates:",{loadingRecommendations:o,isFetchingMore:s.current}),console.log("RENDER: Recommendations count:",r.length,"CarouselIndex:",f);const _=()=>{w(!1)},T=()=>{y(!0)};return(0,Ae.jsxs)("div",{ref:m,className:"home-page",children:[(0,Ae.jsxs)("div",{className:"title-container",children:[(0,Ae.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/1/10/Wikipedia-W-bold-in-square.svg",alt:"Wikipedia Logo",className:"explore-logo"}),(0,Ae.jsx)("h1",{className:"explore-title",children:"Explore"}),(0,Ae.jsx)("button",{onClick:()=>{w(!0)},className:"main-settings-button","aria-label":"Open settings",children:(0,Ae.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24px",height:"24px",children:(0,Ae.jsx)("path",{d:"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.23 C14.34,2.01,14.13,1.86,13.89,1.86h-3.78c-0.24,0-0.45,0.15-0.5,0.37L9.22,4.65C8.63,4.89,8.1,5.21,7.6,5.59L5.21,4.63 C4.99,4.56,4.74,4.62,4.62,4.84l-1.92,3.32C2.58,8.39,2.64,8.66,2.82,8.8l2.03,1.58C4.8,10.7,4.78,11.02,4.78,11.34 c0,0.32,0.02,0.64,0.07,0.94l-2.03,1.58c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22 l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.39,2.42c0.05,0.22,0.26,0.37,0.5,0.37h3.78c0.24,0,0.45-0.15,0.5-0.37l0.39-2.42 c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96c0.22,0.08,0.47,0.02,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61 L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"})})})]}),o&&0===r.length&&(0,Ae.jsx)("div",{className:"home-loading",children:"Curating your feed..."}),(r.length>0||!o)&&(0,Ae.jsx)("div",{className:"recommendation-stream",children:(0,Ae.jsx)(lt,{recommendations:r,onNearEnd:j,currentIndex:f,onCurrentIndexChange:E,onReasonClick:()=>{T()}})}),(0,Ae.jsx)(ot,{isOpen:v,settings:x,onSettingsChange:S,onClose:()=>y(!1)}),(0,Ae.jsx)(gt,{isOpen:b,onClose:_,feedSettings:x,onFeedSettingsChange:S}),s.current&&r.length>0&&(0,Ae.jsx)("div",{className:"loading-more-recommendations",children:"Fetching more..."}),!o&&!s.current&&0===r.length&&(0,Ae.jsx)("div",{className:"no-recommendations",children:(0,Ae.jsxs)("p",{children:["We couldn't find any recommendations. ",0===t.length?"Read some articles to get started!":""]})})]})},xt=e=>{let{results:t,onResultClick:n,isLoading:r}=e;return t.length||r?(0,Ae.jsx)("div",{className:"search-dropdown",children:r?(0,Ae.jsx)("div",{className:"dropdown-loading",children:"Searching..."}):t.map((e=>(0,Ae.jsxs)("div",{className:"dropdown-result",onClick:()=>n(e.title),children:[(0,Ae.jsxs)("div",{className:"dropdown-content",children:[(0,Ae.jsx)("h4",{children:decodeURIComponent(e.title.replace(/_/g," "))}),(0,Ae.jsx)("div",{className:"dropdown-snippet",dangerouslySetInnerHTML:{__html:e.snippet||""}})]}),e.imagesLoading?(0,Ae.jsxs)("div",{className:"dropdown-images-loading",children:[(0,Ae.jsx)("div",{className:"image-skeleton"}),(0,Ae.jsx)("div",{className:"image-skeleton"}),(0,Ae.jsx)("div",{className:"image-skeleton"}),(0,Ae.jsx)("div",{className:"image-skeleton"})]}):e.images&&e.images.length>0?(0,Ae.jsx)("div",{className:"dropdown-images",children:e.images.map(((t,n)=>(0,Ae.jsx)("div",{className:"dropdown-image-container",children:(0,Ae.jsx)("img",{src:t.url,alt:t.description||e.title,loading:"lazy"})},n)))}):null]},e.pageid)))}):null},kt=()=>{const[e,t]=(0,a.useState)(""),[n,r]=(0,a.useState)([]),[l,o]=(0,a.useState)(!1),i=ee(),s=(0,a.useCallback)((e=>{const t=setTimeout((async()=>{if(e.trim()){o(!0);const t=await $e(e);r(t),o(!1)}else r([])}),300);return()=>clearTimeout(t)}),[]);(0,a.useEffect)((()=>s(e)),[e,s]);return(0,Ae.jsxs)("div",{className:"search-container",children:[(0,Ae.jsx)("form",{onSubmit:t=>{t.preventDefault(),e.trim()&&(r([]),i("/search?q=".concat(encodeURIComponent(e.trim()))))},className:"search-form",children:(0,Ae.jsxs)("div",{className:"search-box",children:[(0,Ae.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search Wikipedia",className:"search-input"}),(0,Ae.jsx)("button",{type:"submit",className:"search-button",children:(0,Ae.jsx)("svg",{className:"search-icon",viewBox:"0 0 24 24",children:(0,Ae.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})})})]})}),(0,Ae.jsx)(xt,{results:n,onResultClick:e=>{r([]),i("/article/".concat(encodeURIComponent(e)))},isLoading:l})]})};let St=null,Ct=null,Nt=null;const Et=()=>{null===St&&(console.log("PRELOAD_SERVICE: Initiating DYK preload..."),St=nt(10).then((e=>(console.log("PRELOAD_SERVICE: Successfully preloaded ".concat(e.length," DYK facts.")),Ct=e,e))).catch((e=>{throw console.error("PRELOAD_SERVICE: Error during DYK preload:",e),Nt=e,Ct=[],e})))},jt=()=>null!==Ct?{facts:Ct,isLoading:!1,error:Nt}:{facts:null,isLoading:null!==St&&null===Nt,error:Nt};function _t(e){const t=[...e];for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t}const Tt=()=>{const[e]=Ie(),[t,n]=(0,a.useState)([]),[r,l]=(0,a.useState)(!1),[o,i]=(0,a.useState)([]),[s,c]=(0,a.useState)(!0),[u,d]=(0,a.useState)(null),f=(0,a.useRef)(!1);(0,a.useEffect)((()=>{const t=e.get("q");if(t)g(t);else{n([]);const{facts:e,isLoading:t,error:r}=jt();if(e&&e.length>0){console.log("SEARCH_PAGE: Using preloaded DYK facts.",e);const t=_t(e).slice(0,2).map((e=>Be(Be({},e),{},{loadingArticle:!!e.linkedArticleTitle})));i(t),c(!1),f.current=!0,m(t)}else if(t){console.log("SEARCH_PAGE: DYK preload in progress, waiting..."),c(!0);const e=nt(8);e?e.then((e=>{f.current||(console.log("SEARCH_PAGE: Preload was slow, fetched DYK directly after waiting."),h(e))})).catch((e=>{f.current||(console.error("SEARCH_PAGE: Error fetching DYK after waiting for slow preload:",e),d("Failed to load 'Did you know...' facts."),c(!1))})):Et()}else r||e&&0===e.length?(console.log("SEARCH_PAGE: Preload finished with error or no facts. Attempting direct fetch.",r),f.current||p()):f.current||p()}}),[e]);const h=e=>{if(0===e.length)console.log("SEARCH_PAGE: No DYK facts returned from API/processing."),i([]);else{const t=_t(e).slice(0,2);if(0===t.length)console.log("SEARCH_PAGE: No DYK facts selected after shuffle."),i([]);else{const e=t.map((e=>Be(Be({},e),{},{loadingArticle:!!e.linkedArticleTitle})));i(e),m(e)}}c(!1),f.current=!0},m=e=>{e.forEach((async e=>{if(e.linkedArticleTitle)try{const t=e.linkedArticleTitle,[n,r]=await Promise.all([Ze(t.replace(/ /g,"_")),rt(t)]),a={title:t,pageid:0,snippet:null===r?void 0:r,images:n.slice(0,1),imagesLoading:!1};i((t=>{const n=[...t],r=n.findIndex((t=>t.fact===e.fact&&t.linkedArticleTitle===e.linkedArticleTitle));return-1!==r?(n[r]=Be(Be({},n[r]),{},{articleDetails:a,loadingArticle:!1}),n):t}))}catch(t){console.error("Error fetching details for DYK linked article ".concat(e.linkedArticleTitle,":"),t),i((t=>{const n=[...t],r=n.findIndex((t=>t.fact===e.fact&&t.linkedArticleTitle===e.linkedArticleTitle));return-1!==r?(n[r]=Be(Be({},n[r]),{},{loadingArticle:!1,articleDetails:void 0}),n):t}))}}))},p=async()=>{if(!f.current){console.log("SEARCH_PAGE: No query, performing direct fetch for DYK facts."),c(!0),d(null);try{const e=await nt(8);h(e)}catch(e){console.error("Error fetching Did You Know facts directly:",e),d("Failed to load 'Did you know...' facts."),i([])}finally{c(!1)}}},g=async e=>{l(!0),i([]),f.current=!1;try{const t=await $e(e);n(t)}catch(t){console.error("Error searching:",t),n([])}finally{l(!1)}};return(0,Ae.jsxs)("div",{className:"search-page",children:[(0,Ae.jsxs)("div",{className:"title-container",children:[(0,Ae.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/1/10/Wikipedia-W-bold-in-square.svg",alt:"Wikipedia Logo",className:"page-logo"}),(0,Ae.jsx)("h1",{className:"page-title",children:"Search"})]}),(0,Ae.jsx)(kt,{}),(0,Ae.jsx)("div",{className:"search-results",children:r?(0,Ae.jsx)("div",{className:"loading",children:"Searching..."}):t.length>0?t.map((e=>{const t="/article/".concat(encodeURIComponent(e.title.replace(/ /g,"_")));return(0,Ae.jsxs)("div",{className:"search-result",children:[(0,Ae.jsx)("h2",{children:(0,Ae.jsx)(Re,{to:t,children:e.title})}),(0,Ae.jsx)("div",{className:"snippet",dangerouslySetInnerHTML:{__html:e.snippet||""}}),e.images&&e.images.length>0&&(0,Ae.jsx)("div",{className:"result-images",children:e.images.map(((t,n)=>(0,Ae.jsx)("div",{className:"image-container",children:(0,Ae.jsx)("img",{src:t.url,alt:t.description||e.title,loading:"lazy"})},n)))})]},e.pageid||e.title)})):e.get("q")?(0,Ae.jsxs)("div",{className:"no-results",children:['No results found for "',e.get("q"),'".']}):(0,Ae.jsxs)("div",{className:"did-you-know-cards-container",children:[s&&(0,Ae.jsx)("div",{className:"loading",children:"Loading interesting facts..."}),u&&(0,Ae.jsx)("div",{className:"error-message",children:u}),!s&&!u&&o.length>0&&o.map(((e,t)=>(0,Ae.jsxs)("div",{className:"dyk-individual-card",children:[(0,Ae.jsx)("h4",{className:"dyk-card-title",children:"Did you know..."}),(0,Ae.jsx)("p",{className:"dyk-fact-text",children:e.fact}),e.loadingArticle&&(0,Ae.jsx)("div",{className:"loading-article-dyk",children:"Loading article details..."}),e.articleDetails&&(0,Ae.jsxs)(Re,{to:"/article/".concat(encodeURIComponent(e.articleDetails.title.replace(/ /g,"_"))),className:"dyk-article-card",children:[e.articleDetails.images&&e.articleDetails.images.length>0&&(0,Ae.jsx)("img",{src:e.articleDetails.images[0].url,alt:e.articleDetails.title,className:"dyk-article-image"}),(0,Ae.jsxs)("div",{className:"dyk-article-info",children:[(0,Ae.jsx)("h4",{children:e.articleDetails.title}),e.articleDetails.snippet&&(0,Ae.jsx)("p",{className:"dyk-article-snippet",children:e.articleDetails.snippet})]})]})]},t))),!s&&!u&&0===o.length&&!e.get("q")&&(0,Ae.jsx)("div",{className:"no-facts",children:"No new facts found right now. Try exploring or searching!"})]})})]})},Rt=e=>{const t=document.createElement("textarea");return t.innerHTML=e,t.value},Pt=function(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{t=decodeURIComponent(e).replace(/_/g," ")}catch(_n){t=e.replace(/_/g," ")}if(t=Rt(t),n){const e=30;if("undefined"!==typeof window&&window.innerWidth<768&&t.length>e)return t.substring(0,e-3)+"..."}return t},Lt=e=>encodeURIComponent(e.replace(/ /g,"_")),It="wikipedia_rabbit_holes",At=()=>{try{const e=sessionStorage.getItem(It);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading rabbit holes:",e),[]}},Dt=e=>{try{sessionStorage.setItem(It,JSON.stringify(e))}catch(t){console.error("Error saving rabbit holes:",t)}},Ot=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return At().slice(-e).reverse()},Mt="https://upload.wikimedia.org/wikipedia/commons/e/e9/Wikiheart.svg",Ft=e=>{let{isOpen:t,onClose:n,articleCount:r}=e;const[l,o]=(0,a.useState)("initialPrompt"),[i,s]=(0,a.useState)("2.75"),[c,u]=(0,a.useState)("100");if((0,a.useEffect)((()=>{t&&o("initialPrompt")}),[t]),!t)return null;const d=()=>{o("setReminder")},f=()=>{ut(),n()},h=()=>{const e=parseFloat(i),t=parseInt(c,10);if(isNaN(e)||e<=0)return void alert("Please enter a valid donation amount.");if(isNaN(t)||t<=0)return void alert("Please enter a valid article frequency.");const n={amount:i,frequency:c,articlesViewedSinceReminderSet:0,reminderEnabled:!0};try{localStorage.setItem("wikipediaAppDonationReminderSettings",JSON.stringify(n)),console.log("REMINDER_MODAL: Saved reminder settings to localStorage",n)}catch(r){return console.error("REMINDER_MODAL: Error saving reminder settings to localStorage",r),void alert("There was an issue saving your reminder settings. Please try again.")}o("confirmation")};return(0,Ae.jsx)("div",{className:"donation-modal-overlay",children:(0,Ae.jsxs)("div",{className:"donation-modal-content",children:[(0,Ae.jsx)("button",{className:"donation-modal-close",onClick:n,children:"\xd7"}),"initialPrompt"===l&&(()=>{const e=r&&r>0?"You've visited ".concat(r," articles. Would you like to set up a donation reminder?"):"Would you like to set up a donation reminder?";return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("img",{src:Mt,alt:"WikiHeart icon",className:"modal-header-icon"}),(0,Ae.jsx)("h2",{children:"Set a Reminder?"}),(0,Ae.jsx)("p",{children:e}),(0,Ae.jsxs)("div",{className:"modal-button-group",children:[(0,Ae.jsx)("button",{className:"donation-modal-button-yes",onClick:d,children:"Yes"}),(0,Ae.jsx)("button",{className:"donation-modal-later-button",onClick:n,children:"Maybe Later"})]}),(0,Ae.jsx)("button",{className:"donation-modal-no-thanks-link",onClick:f,children:"No thanks, don't ask again"})]})})(),"setReminder"===l&&(()=>{const e=i||"[Amount]",t=c||"[Frequency]";return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("img",{src:Mt,alt:"WikiHeart icon",className:"modal-header-icon"}),(0,Ae.jsx)("h2",{children:"Set Donation Reminder"}),(0,Ae.jsxs)("div",{className:"form-inputs-container",children:[(0,Ae.jsxs)("div",{className:"input-group amount-input-group",children:[(0,Ae.jsx)("span",{className:"input-addon",children:"$"}),(0,Ae.jsx)("input",{type:"number",value:i,onChange:e=>s(e.target.value),className:"donation-input",placeholder:"Amount",min:"1"})]}),(0,Ae.jsxs)("div",{className:"input-group frequency-input-group",children:[(0,Ae.jsx)("input",{type:"number",value:c,onChange:e=>u(e.target.value),className:"donation-input",placeholder:"Articles",min:"1"}),(0,Ae.jsx)("span",{className:"input-addon",children:"articles"})]})]}),(0,Ae.jsx)("p",{className:"dynamic-reminder-preview-text",children:"You will be reminded to donate $".concat(e," every ").concat(t," articles.")}),(0,Ae.jsx)("button",{className:"donation-modal-button-confirm",onClick:h,children:"Set Reminder"}),(0,Ae.jsx)("button",{className:"donation-modal-back-button",onClick:()=>o("initialPrompt"),children:"Back"})]})})(),"confirmation"===l&&(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("img",{src:Mt,alt:"WikiHeart icon",className:"modal-header-icon"}),(0,Ae.jsx)("h2",{children:"Reminder Set!"}),(0,Ae.jsxs)("p",{children:["Ok, we'll remind you to donate $",i," every $",c," articles!"]}),(0,Ae.jsx)("button",{className:"donation-modal-button-confirm",onClick:n,children:"Got it!"})]})]})})},zt=1080,qt=1920,Ut=(e,t,n,r,a,l)=>{e.beginPath(),e.moveTo(t+l,n),e.lineTo(t+r-l,n),e.quadraticCurveTo(t+r,n,t+r,n+l),e.lineTo(t+r,n+a-l),e.quadraticCurveTo(t+r,n+a,t+r-l,n+a),e.lineTo(t+l,n+a),e.quadraticCurveTo(t,n+a,t,n+a-l),e.lineTo(t,n+l),e.quadraticCurveTo(t,n,t+l,n),e.closePath()},Ht=async(e,t,n,r,a,l,o)=>{var i,s;const c=a||l?280:160,u=t,d=n;if(o&&(null===(i=r.image)||void 0===i||!i.url))return e.fillStyle="#007bff",e.beginPath(),e.arc(u,d,6,0,2*Math.PI),e.fill(),e.strokeStyle="#ffffff",e.lineWidth=3,void e.stroke();const f=e.createLinearGradient(u-c/2,d-c/2,u+c/2,d+c/2);if(a?(f.addColorStop(0,"#667eea"),f.addColorStop(1,"#764ba2")):l?(f.addColorStop(0,"#f093fb"),f.addColorStop(1,"#f5576c")):(f.addColorStop(0,"#ffffff"),f.addColorStop(1,"#f8f9fa")),e.fillStyle=f,Ut(e,u-c/2,d-c/2,c,c,20),e.fill(),e.strokeStyle=a||l?"rgba(255, 255, 255, 0.4)":"#dee2e6",e.lineWidth=a||l?4:2,e.stroke(),null!==(s=r.image)&&void 0!==s&&s.url)try{const t=await(h=r.image.url,new Promise(((e,t)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>e(n),n.onerror=t,n.src=h}))),n=c-(a||l?40:30),o=u-n/2,i=d-n/2-(a||l?20:15);e.save(),Ut(e,o,i,n,n,14),e.clip(),e.drawImage(t,o,i,n,n),e.restore()}catch(x){if(console.error("Error loading image:",x),o)return e.fillStyle="#007bff",e.beginPath(),e.arc(u,d,6,0,2*Math.PI),e.fill(),e.strokeStyle="#ffffff",e.lineWidth=3,void e.stroke()}var h;e.fillStyle=a||l?"#ffffff":"#1a1a1a";const m=a||l?20:16;e.font="bold ".concat(m,'px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'),e.textAlign="center",e.textBaseline="bottom";const p=c-30,g=Pt(r.title).split(" ");let v=[],y="";for(const k of g){const t=y?"".concat(y," ").concat(k):k;e.measureText(t).width>p&&y?(v.push(y),y=k):y=t}y&&v.push(y),v=v.slice(0,a||l?2:1);const b=m+4,w=d+c/2-15-(v.length-1)*b;if(v.forEach(((t,n)=>{e.fillText(t,u,w+n*b)})),a||l){e.fillStyle=a?"#667eea":"#f5576c";const t=70,n=28,r=d-c/2+12;Ut(e,u-t/2,r,t,n,14),e.fill(),e.fillStyle="#ffffff",e.font='bold 12px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',e.textAlign="center",e.textBaseline="middle",e.fillText(a?"START":"END",u,r+n/2)}},Wt=async e=>{const t=document.createElement("canvas");t.width=zt,t.height=qt;const n=t.getContext("2d");if(!n)throw new Error("Could not get canvas context");const r=await(async e=>{const t=[];for(const r of e)try{const e=await Ze(r.title.replace(/ /g,"_"));t.push(Be(Be({},r),{},{image:e.length>0?e[0]:void 0}))}catch(n){console.error("Error fetching image for ".concat(r.title,":"),n),t.push(Be(Be({},r),{},{image:void 0}))}return t})(e.entries),a=n.createLinearGradient(0,0,0,qt);a.addColorStop(0,"#f8f9fa"),a.addColorStop(1,"#e9ecef"),n.fillStyle=a,n.fillRect(0,0,zt,qt);n.fillStyle="#1a1a1a",n.font='bold 36px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',n.textAlign="center",n.textBaseline="top",n.fillText("\ud83d\udc30 My Wikipedia Rabbit Hole",540,50),n.fillStyle="#666",n.font='18px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',n.fillText("".concat(e.entries.length," articles \u2022 ").concat(Bt(e.duration)),540,100);const l=r[0],o=r[r.length-1],i=r.slice(1,-1),s=240,c=200,u=1670,d=[];if(d.push({x:s,y:c}),i.length>0){Math.sqrt(Math.pow(600,2)+Math.pow(1470,2)),i.length;for(let e=0;e<i.length;e++){const t=(e+1)/(i.length+1),n=s+600*t,r=c+1470*t,a=80,l=2,o=Math.sin(t*Math.PI*l)*a,u=Math.cos(t*Math.PI*l)*a*.5;d.push({x:n+o,y:r+u})}}d.push({x:840,y:u}),((e,t)=>{if(!(t.length<2)){e.strokeStyle="#007bff",e.lineWidth=4,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let n=0;n<t.length-1;n++){const r=t[n],a=t[n+1];if(0===n){const t=r.x+.3*(a.x-r.x),n=r.y+.3*(a.y-r.y);e.quadraticCurveTo(t,n,a.x,a.y)}else if(n===t.length-2){t[n-1];const l=r.x+.7*(a.x-r.x),o=r.y+.7*(a.y-r.y);e.quadraticCurveTo(l,o,a.x,a.y)}else{const l=t[n-1],o=t[n+2],i=.3*(a.x-l.x),s=.3*(a.y-l.y),c=.3*(o.x-r.x),u=.3*(o.y-r.y),d=r.x+i,f=r.y+s,h=a.x-c,m=a.y-u;e.bezierCurveTo(d,f,h,m,a.x,a.y)}}if(e.stroke(),t.length>=2){const n=t[t.length-1],r=t[t.length-2],a=Math.atan2(n.y-r.y,n.x-r.x),l=14,o=n.x-20*Math.cos(a),i=n.y-20*Math.sin(a);e.fillStyle="#007bff",e.beginPath(),e.moveTo(o,i),e.lineTo(o-l*Math.cos(a-Math.PI/6),i-l*Math.sin(a-Math.PI/6)),e.lineTo(o-l*Math.cos(a+Math.PI/6),i-l*Math.sin(a+Math.PI/6)),e.closePath(),e.fill()}}})(n,d),await Ht(n,d[0].x,d[0].y,l,!0,!1,!1);for(let f=0;f<i.length;f++){const e=d[f+1];await Ht(n,e.x,e.y,i[f],!1,!1,!0)}return await Ht(n,d[d.length-1].x,d[d.length-1].y,o,!1,!0,!1),n.fillStyle="#999",n.font='14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',n.textAlign="center",n.textBaseline="bottom",n.fillText("Wikipedia App",540,1880),t.toDataURL("image/png")},Bt=e=>{const t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);return t>0?"".concat(t,"m ").concat(n,"s"):"".concat(n,"s")},Vt=(e,t)=>{const n=document.createElement("a");n.download=t,n.href=e,n.click()},$t=e=>{let{isOpen:t,onClose:n,history:r}=e;const[l,o]=(0,a.useState)(new Set),[i,s]=(0,a.useState)(!1),c=(0,a.useMemo)((()=>r.slice(0,20)),[r]),u=e=>{const t="".concat(e.title,"-").concat(e.timestamp);o((e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n}))},d=(0,a.useMemo)((()=>c.filter((e=>l.has("".concat(e.title,"-").concat(e.timestamp))))),[c,l]),f=e=>{const t=new Date(e),n=new Date,r=new Date(n);return r.setDate(r.getDate()-1),t.toDateString()===n.toDateString()?"Today":t.toDateString()===r.toDateString()?"Yesterday":t.toLocaleDateString(void 0,{month:"short",day:"numeric",year:t.getFullYear()!==n.getFullYear()?"numeric":void 0})};return t?(0,Ae.jsx)("div",{className:"share-sheet-overlay",onClick:n,children:(0,Ae.jsxs)("div",{className:"share-sheet",onClick:e=>e.stopPropagation(),children:[(0,Ae.jsxs)("div",{className:"share-sheet-header",children:[(0,Ae.jsx)("h2",{className:"share-sheet-title",children:"Share Your Rabbit Holes"}),(0,Ae.jsx)("button",{className:"share-sheet-close",onClick:n,"aria-label":"Close",children:"\xd7"})]}),(0,Ae.jsx)("div",{className:"share-sheet-content",children:0===c.length?(0,Ae.jsx)("div",{className:"share-sheet-empty",children:(0,Ae.jsx)("p",{children:"No articles to share yet. Start reading to build your rabbit hole!"})}):(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsxs)("div",{className:"share-sheet-actions",children:[(0,Ae.jsx)("button",{className:"share-sheet-action-btn",onClick:()=>{const e=new Set(c.map((e=>"".concat(e.title,"-").concat(e.timestamp))));o(e)},disabled:l.size===c.length,children:"Select All"}),(0,Ae.jsx)("button",{className:"share-sheet-action-btn",onClick:()=>{o(new Set)},disabled:0===l.size,children:"Clear"}),(0,Ae.jsxs)("span",{className:"share-sheet-count",children:[l.size," ",1===l.size?"article":"articles"," selected"]})]}),(0,Ae.jsx)("div",{className:"share-sheet-list",children:c.map((e=>{const t="".concat(e.title,"-").concat(e.timestamp),n=l.has(t);return(0,Ae.jsxs)("div",{className:"share-sheet-item ".concat(n?"selected":""),onClick:()=>u(e),children:[(0,Ae.jsx)("div",{className:"share-sheet-item-checkbox",children:(0,Ae.jsx)("input",{type:"checkbox",checked:n,onChange:()=>u(e),onClick:e=>e.stopPropagation()})}),(0,Ae.jsxs)("div",{className:"share-sheet-item-content",children:[(0,Ae.jsx)("h3",{className:"share-sheet-item-title",children:Pt(e.title)}),e.snippet&&(0,Ae.jsx)("p",{className:"share-sheet-item-snippet",children:e.snippet}),(0,Ae.jsxs)("div",{className:"share-sheet-item-meta",children:[(0,Ae.jsx)("span",{children:f(e.timestamp)}),(0,Ae.jsx)("span",{children:"\u2022"}),(0,Ae.jsx)("span",{children:(r=e.timestamp,new Date(r).toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"}))})]})]}),e.thumbnail&&(0,Ae.jsx)("div",{className:"share-sheet-item-thumbnail",children:(0,Ae.jsx)("img",{src:e.thumbnail.url,alt:e.thumbnail.description||e.title,loading:"lazy"})})]},t);var r}))}),(0,Ae.jsxs)("div",{className:"share-sheet-footer",children:[(0,Ae.jsx)("button",{className:"share-sheet-generate-btn",onClick:async()=>{if(0!==d.length&&!i){s(!0);try{var e,t,n,r;const l=d.map(((e,t)=>({title:e.title,timestamp:e.timestamp,source:t>0?d[t-1].title:void 0}))),o={id:"share-".concat(Date.now()),entries:l,startTime:(null===(e=l[0])||void 0===e?void 0:e.timestamp)||Date.now(),endTime:(null===(t=l[l.length-1])||void 0===t?void 0:t.timestamp)||Date.now(),duration:((null===(n=l[l.length-1])||void 0===n?void 0:n.timestamp)||Date.now())-((null===(r=l[0])||void 0===r?void 0:r.timestamp)||Date.now())},i=await Wt(o),s=(new Date).toISOString().slice(0,10),c="rabbit-hole-".concat(s,".png");if(navigator.share&&navigator.canShare)try{const e=await fetch(i),t=await e.blob(),n=new File([t],c,{type:"image/png"});if(navigator.canShare({files:[n]}))return void await navigator.share({files:[n],title:"My Wikipedia Rabbit Hole",text:"Check out my Wikipedia rabbit hole journey!"})}catch(a){console.log("Share cancelled or failed, downloading instead")}Vt(i,c)}catch(l){console.error("Error generating image:",l),alert("Failed to generate image. Please try again.")}finally{s(!1)}}},disabled:0===d.length||i,children:i?(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("span",{className:"spinner"}),"Generating..."]}):(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20px",height:"20px",children:(0,Ae.jsx)("path",{d:"M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 19V5h14v14H5z"})}),"Generate Shareable Image"]})}),d.length>0&&(0,Ae.jsx)("p",{className:"share-sheet-footer-note",children:"Creates a TikTok-style image you can download or share to social media"})]})]})})]})}):null},Yt=e=>{let{rabbitHoles:t}=e;const n=ee(),[r,l]=(0,a.useState)(!1),[o,i]=(0,a.useState)(null),[s,c]=(0,a.useState)(null),u=e=>{const t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);return t>0?"".concat(t,"m ").concat(n,"s"):"".concat(n,"s")},d=e=>{const t=new Date(e),n=(new Date).getTime()-e,r=Math.floor(n/6e4);return r<1?"Just now":r<60?"".concat(r,"m ago"):r<1440?"".concat(Math.floor(r/60),"h ago"):t.toLocaleDateString(void 0,{month:"short",day:"numeric"})},f=()=>{i(null),c(null)};return 0===t.length?(0,Ae.jsxs)("div",{className:"rabbit-hole-empty",children:[(0,Ae.jsx)("div",{className:"rabbit-hole-empty-icon",children:"\ud83d\udc30"}),(0,Ae.jsx)("h3",{children:"No rabbit holes yet"}),(0,Ae.jsx)("p",{children:"Start reading articles to see your journey visualized here!"})]}):(0,Ae.jsxs)("div",{className:"rabbit-hole-visualization",children:[(0,Ae.jsxs)("div",{className:"rabbit-hole-header",children:[(0,Ae.jsx)("h2",{className:"rabbit-hole-title",children:"Your Recent Rabbit Holes"}),(0,Ae.jsx)("p",{className:"rabbit-hole-subtitle",children:"Visualize your journey through Wikipedia articles"})]}),(0,Ae.jsx)("div",{className:"rabbit-holes-list",children:t.map(((e,t)=>(0,Ae.jsxs)("div",{className:"rabbit-hole-card",children:[(0,Ae.jsxs)("div",{className:"rabbit-hole-card-header",children:[(0,Ae.jsxs)("div",{className:"rabbit-hole-meta",children:[(0,Ae.jsx)("span",{className:"rabbit-hole-time",children:d(e.startTime)}),(0,Ae.jsx)("span",{className:"rabbit-hole-duration",children:u(e.duration)}),(0,Ae.jsxs)("span",{className:"rabbit-hole-count",children:[e.entries.length," articles"]})]}),(0,Ae.jsx)("button",{className:"rabbit-hole-generate-btn",onClick:()=>(async(e,t)=>{if(!r){l(!0),c(t);try{const t=await Wt(e);i(t)}catch(n){console.error("Error generating image:",n),alert("Failed to generate image. Please try again.")}finally{l(!1)}}})(e,t),disabled:r,children:r&&s===t?(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("span",{className:"spinner"}),"Generating..."]}):(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"18px",height:"18px",children:(0,Ae.jsx)("path",{d:"M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 19V5h14v14H5z"})}),"Generate Image"]})})]}),(0,Ae.jsx)("div",{className:"rabbit-hole-path",children:e.entries.map(((t,r)=>{const l=0===r,o=r===e.entries.length-1,i=t.source&&r>0;return(0,Ae.jsxs)(a.Fragment,{children:[!l&&(0,Ae.jsxs)("div",{className:"rabbit-hole-connector",children:[(0,Ae.jsx)("div",{className:"rabbit-hole-line"}),(0,Ae.jsx)("div",{className:"rabbit-hole-arrow",children:"\u2193"})]}),(0,Ae.jsxs)("div",{className:"rabbit-hole-node ".concat(l?"start":""," ").concat(o?"end":""),onClick:()=>{return e=t.title,void n("/article/".concat(Lt(e)));var e},title:t.title,children:[(0,Ae.jsxs)("div",{className:"rabbit-hole-node-content",children:[(0,Ae.jsx)("div",{className:"rabbit-hole-node-title",children:Pt(t.title)}),i&&(0,Ae.jsxs)("div",{className:"rabbit-hole-node-source",children:["from ",Pt(t.source)]})]}),l&&(0,Ae.jsx)("div",{className:"rabbit-hole-node-badge start-badge",children:"Start"}),o&&(0,Ae.jsx)("div",{className:"rabbit-hole-node-badge end-badge",children:"End"})]})]},"".concat(t.title,"-").concat(t.timestamp))}))})]},e.id)))}),o&&(0,Ae.jsx)("div",{className:"rabbit-hole-preview-overlay",onClick:f,children:(0,Ae.jsxs)("div",{className:"rabbit-hole-preview",onClick:e=>e.stopPropagation(),children:[(0,Ae.jsxs)("div",{className:"rabbit-hole-preview-header",children:[(0,Ae.jsx)("h3",{children:"Generated Image (TikTok Format)"}),(0,Ae.jsx)("button",{className:"rabbit-hole-preview-close",onClick:f,children:"\xd7"})]}),(0,Ae.jsx)("div",{className:"rabbit-hole-preview-content",children:(0,Ae.jsx)("img",{src:o,alt:"Generated rabbit hole visualization"})}),(0,Ae.jsx)("div",{className:"rabbit-hole-preview-footer",children:(0,Ae.jsxs)("button",{className:"rabbit-hole-download-btn",onClick:()=>{if(!o||null===s)return;t[s];const e=(new Date).toISOString().slice(0,10),n="rabbit-hole-".concat(e,".png");Vt(o,n)},children:[(0,Ae.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20px",height:"20px",children:(0,Ae.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"})}),"Download Image"]})})]})})]})},Kt="wikipediaAppLastInitialPromptArticleCount",Gt=()=>{const e=ee(),{groupedHistory:t}=(()=>{const[e,t]=(0,a.useState)({}),[n,r]=(0,a.useState)(0),l=()=>{const e=Fe(),n=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate()-n.getDay()),l=e.filter((e=>new Date(e.timestamp)>=a));r(l.length);const o=e.reduce(((e,t)=>{const n=new Date(t.timestamp).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"});return e[n]||(e[n]=[]),e[n].push(t),e}),{});t(o)};return(0,a.useEffect)((()=>(l(),window.addEventListener(ze,l),()=>{window.removeEventListener(ze,l)})),[]),{groupedHistory:e,weeklyCount:n,updateHistory:l}})(),n=(()=>{const e=Fe(),t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay()),r=e.filter((e=>new Date(e.timestamp)>=n)),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),l=e.filter((e=>new Date(e.timestamp)>=a)),o=new Array(24).fill(0);e.forEach((e=>{const t=new Date(e.timestamp).getHours();o[t]++}));const i=o.reduce(((e,t,n)=>t>e.count?{hour:n,count:t}:e),{hour:0,count:0}),s=new Set;e.forEach((e=>{const t=new Date(e.timestamp);s.add(t.toDateString())}));let c=0,u=new Date,d=!0;for(;s.has(u.toDateString());)c++,u.setDate(u.getDate()-1);s.has((new Date).toDateString())||(d=!1,c=0);const f=Array.from(s).map((e=>new Date(e)));f.sort(((e,t)=>t.getTime()-e.getTime()));let h=1,m=1,p=f[0];for(let g=1;g<f.length;g++)1===Math.round((f[g-1].getTime()-f[g].getTime())/864e5)?(h++,h>m&&(m=h,p=f[g-1])):h=1;return{weeklyCount:r.length,todayCount:l.length,mostActiveHour:i,longestStreak:{days:m,endDate:p||new Date},currentStreak:{days:c,ongoing:d}}})(),[r,l]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1),s=(0,a.useMemo)((()=>Object.values(t).flat().sort(((e,t)=>t.timestamp-e.timestamp))),[t]),[c,u]=(0,a.useState)((()=>Ot(10)));(0,a.useEffect)((()=>{u(Ot(10))}),[t]);const d=(0,a.useMemo)((()=>Object.values(t).reduce(((e,t)=>e+t.length),0)),[t]);(0,a.useEffect)((()=>{const e=dt();if(!(!!e&&e.reminderEnabled))return void console.log("HISTORY_PAGE: Initial prompt skipped, reminders globally disabled.");let t=!1;try{const e=localStorage.getItem("wikipediaAppShowInitialDonationPrompt");null!==e&&(t=JSON.parse(e))}catch(n){console.error("HISTORY_PAGE: Error reading show initial prompt setting:",n)}if(d>=5&&!r)if(t)console.log("HISTORY_PAGE: Triggering donation reminder modal because 'Allow First-Time Prompt' setting is ON."),l(!0);else{console.log("HISTORY_PAGE: 'Allow First-Time Prompt' is OFF. Checking 100-article interval.");let e=0;try{const t=localStorage.getItem(Kt);t&&(e=parseInt(t,10),isNaN(e)&&(e=0))}catch(n){console.error("HISTORY_PAGE: Error reading last initial prompt article count:",n),e=0}d>=e+100?(console.log("HISTORY_PAGE: Triggering donation reminder modal (interval). Total: ".concat(d,", LastPrompt: ").concat(e)),l(!0)):console.log("HISTORY_PAGE: Initial prompt criteria not met (interval). Total: ".concat(d,", LastPrompt: ").concat(e,", Required > ").concat(e+100-1))}}),[d,r]);const f=()=>{l(!1);try{localStorage.setItem(Kt,d.toString()),console.log("HISTORY_PAGE: Updated last initial prompt article count to ".concat(d))}catch(e){console.error("HISTORY_PAGE: Error saving last initial prompt article count:",e)}},h=e=>(e=>e===(new Date).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"}))(e)?"Today":(e=>e===new Date(Date.now()-864e5).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"}))(e)?"Yesterday":e,m=()=>{return(0,Ae.jsxs)("div",{className:"insights-grid",children:[(0,Ae.jsxs)("div",{className:"insight-card",children:[(0,Ae.jsx)("div",{className:"insight-value",children:n.todayCount}),(0,Ae.jsx)("div",{className:"insight-label",children:"Articles read today"})]}),(0,Ae.jsxs)("div",{className:"insight-card",children:[(0,Ae.jsx)("div",{className:"insight-value",children:n.weeklyCount}),(0,Ae.jsx)("div",{className:"insight-label",children:"Articles this week"})]}),(0,Ae.jsxs)("div",{className:"insight-card",children:[(0,Ae.jsx)("div",{className:"insight-value",children:n.currentStreak.days}),(0,Ae.jsx)("div",{className:"insight-label",children:"Day streak"}),n.currentStreak.days>0&&(0,Ae.jsx)("div",{className:"streak-badge ".concat(n.currentStreak.ongoing?"":"inactive"),children:n.currentStreak.ongoing?"Active":"Ended"})]}),n.mostActiveHour.count>0&&(0,Ae.jsxs)("div",{className:"insight-card",children:[(0,Ae.jsx)("div",{className:"most-active-hour",children:(e=n.mostActiveHour.hour,new Date(2020,0,1,e).toLocaleTimeString(void 0,{hour:"numeric",hour12:!0}))}),(0,Ae.jsx)("div",{className:"most-active-label",children:"Most active reading time"})]})]});var e};return 0===Object.keys(t).length?(0,Ae.jsxs)("div",{className:"history-page",children:[(0,Ae.jsxs)("div",{className:"title-container",children:[(0,Ae.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/1/10/Wikipedia-W-bold-in-square.svg",alt:"Wikipedia Logo",className:"page-logo"}),(0,Ae.jsx)("h1",{className:"page-title",children:"Activity"}),s.length>0&&(0,Ae.jsxs)("button",{className:"history-share-button",onClick:()=>i(!0),"aria-label":"Share your rabbit holes",title:"Share your rabbit holes",children:[(0,Ae.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20px",height:"20px",children:(0,Ae.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})}),"Share"]})]}),m(),(0,Ae.jsxs)("div",{className:"history-empty",children:[(0,Ae.jsx)("h2",{children:"No Activity"}),(0,Ae.jsx)("p",{children:"Articles you view will appear here"})]}),(0,Ae.jsx)(De,{}),(0,Ae.jsx)(Ft,{isOpen:r,onClose:f,articleCount:d})]}):(0,Ae.jsxs)("div",{className:"history-page",children:[(0,Ae.jsxs)("div",{className:"title-container",children:[(0,Ae.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/1/10/Wikipedia-W-bold-in-square.svg",alt:"Wikipedia Logo",className:"page-logo"}),(0,Ae.jsx)("h1",{className:"page-title",children:"Activity"}),s.length>0&&(0,Ae.jsxs)("button",{className:"history-share-button",onClick:()=>i(!0),"aria-label":"Share your rabbit holes",title:"Share your rabbit holes",children:[(0,Ae.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20px",height:"20px",children:(0,Ae.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})}),"Share"]})]}),m(),c.length>0&&(0,Ae.jsx)("div",{className:"rabbit-hole-section",children:(0,Ae.jsx)(Yt,{rabbitHoles:c})}),(0,Ae.jsx)("div",{className:"history-list",children:Object.entries(t).map((t=>{let[n,r]=t;return(0,Ae.jsxs)("div",{className:"history-group",children:[(0,Ae.jsx)("h2",{className:"history-date-header",children:h(n)}),r.map((t=>{return(0,Ae.jsxs)("div",{className:"history-item",onClick:()=>{return n=t.title,void e("/article/".concat(Lt(n)));var n},children:[(0,Ae.jsxs)("div",{className:"history-item-content",children:[(0,Ae.jsx)("h3",{children:Pt(t.title)}),(0,Ae.jsx)("p",{className:"history-snippet",children:t.snippet}),(0,Ae.jsx)("span",{className:"history-date",children:(n=t.timestamp,new Date(n).toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"}))})]}),t.thumbnail&&(0,Ae.jsx)("div",{className:"history-thumbnail",children:(0,Ae.jsx)("img",{src:t.thumbnail.url,alt:t.thumbnail.description||t.title,loading:"lazy"})})]},"".concat(t.title,"-").concat(t.timestamp));var n}))]},n)}))}),(0,Ae.jsx)(De,{}),(0,Ae.jsx)(Ft,{isOpen:r,onClose:f,articleCount:d}),(0,Ae.jsx)($t,{isOpen:o,onClose:()=>i(!1),history:s})]})},Qt=e=>{let{isOpen:t,onClose:n,amount:r,frequency:a,donationUrl:l}=e;if(!t)return null;const o=r||"your chosen amount",i=a||"X";return(0,Ae.jsx)("div",{className:"drp-modal-overlay",children:(0,Ae.jsxs)("div",{className:"drp-modal-content",children:[(0,Ae.jsx)("button",{className:"drp-modal-button-close",onClick:()=>{n("disable")},"aria-label":"Disable reminders",children:"\xd7"}),(0,Ae.jsxs)("div",{className:"drp-icon-and-text-wrapper",children:[(0,Ae.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/e/e9/Wikiheart.svg",alt:"WikiHeart icon",className:"drp-header-icon"}),(0,Ae.jsxs)("div",{className:"drp-text-content",children:[(0,Ae.jsx)("h2",{children:"You've read ".concat(i," articles!")}),(0,Ae.jsx)("p",{children:"You set up a reminder to donate $".concat(o," after reading ").concat(i," articles. Would you like to donate now?")})]})]}),(0,Ae.jsxs)("div",{className:"drp-button-group",children:[(0,Ae.jsxs)("button",{className:"drp-modal-button-donate",onClick:()=>{l&&window.open(l,"_blank","noopener,noreferrer"),n("donate")},disabled:!l,children:["Donate $",o]}),(0,Ae.jsx)("button",{className:"drp-modal-button-later",onClick:()=>{n("snooze")},children:"Snooze"})]})]})})},Xt=()=>{const{title:e}=function(){let{matches:e}=a.useContext(G),t=e[e.length-1];return t?t.params:{}}(),t=ee(),n=J(),[r,l]=(0,a.useState)(""),[o,i]=(0,a.useState)(null),[s,c]=(0,a.useState)(!0),[u,d]=(0,a.useState)(null),[f,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)({}),g=(0,a.useRef)(!1),v=(0,a.useRef)(0),y=(0,a.useRef)(0),b=(0,a.useRef)(0),w=(0,a.useRef)(0),x=(0,a.useRef)(!1);(0,a.useEffect)((()=>{window.scrollTo(0,0),g.current=!1}),[e]),(0,a.useEffect)((()=>{(async()=>{if(e){c(!0),d(null),i(null),l("");try{var t,r,a;const[o,s]=await Promise.all([et(e),Ze(e)]);l(k(o)),s.length>0&&i(s[0]);const c=document.createElement("div");c.innerHTML=o;const u=(null===(t=c.querySelector("p"))||void 0===t?void 0:t.textContent)||"",d=Pt(e);((e,t,n)=>{const r=Fe().filter((t=>t.title!==e)),a=[{title:e,snippet:t,thumbnail:n,timestamp:Date.now()},...r].slice(0,100);localStorage.setItem(Oe,JSON.stringify(a)),window.dispatchEvent(new CustomEvent(Me))})(d,u,s.length>0?s[0]:void 0);if(((e,t)=>{const n=Date.now(),r=At();if(0===r.length){const r={id:"hole-".concat(n),entries:[{title:e,timestamp:n,source:t}],startTime:n,endTime:n,duration:0};return void Dt([r])}const a=r[r.length-1];if(n-a.endTime<=18e5)a.entries.push({title:e,timestamp:n,source:t}),a.endTime=n,a.duration=a.endTime-a.startTime;else{const a={id:"hole-".concat(n),entries:[{title:e,timestamp:n,source:t}],startTime:n,endTime:n,duration:0};r.push(a)}const l=r.slice(-50);Dt(l)})(d,(null===(r=n.state)||void 0===r?void 0:r.fromTitle)||(document.referrer?null===(a=new URL(document.referrer).pathname.split("/article/")[1])||void 0===a?void 0:a.replace(/_/g," "):void 0)),!g.current){const e=dt();if(e&&e.reminderEnabled){await(()=>{const e=st();e&&e.reminderEnabled&&(e.articlesViewedSinceReminderSet+=1,ct(e),console.log("REMINDER_SERVICE: Article view count incremented to ".concat(e.articlesViewedSinceReminderSet)))})();const e=await(()=>{const e=st();if(e&&e.reminderEnabled){const t=parseInt(e.frequency,10);if(!isNaN(t)&&e.articlesViewedSinceReminderSet>=t)return{show:!0,amount:e.amount,frequency:e.frequency,url:"https://donate.wikimedia.org/w/index.php?title=Special:LandingPage&country=US&uselang=en&wmf_medium=spontaneous&wmf_source=fr-redir&wmf_campaign=spontaneous",displayFrequency:e.frequency}}return{show:!1}})();e.show&&(p({amount:e.amount,frequency:e.frequency,url:e.url}),h(!0))}g.current=!0}}catch(o){d("Failed to load article"),console.error("Error loading article:",o)}finally{c(!1)}}})()}),[e]);const k=e=>{const t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll("a").forEach((e=>{const t=e.getAttribute("href");if(null!==t&&void 0!==t&&t.startsWith("/wiki/")){const n=t.replace("/wiki/",""),r=Pt(n);e.setAttribute("data-article",n),e.textContent=r,e.removeAttribute("href"),e.classList.add("wiki-link")}else t&&(t.startsWith("#")||"nofollow"===e.getAttribute("rel"))||t&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),t.querySelectorAll(".mw-editsection").forEach((e=>e.remove())),t.innerHTML};return s?(0,Ae.jsxs)("div",{className:"article-page",children:[(0,Ae.jsx)("div",{className:"article-loading",children:"Loading article..."}),(0,Ae.jsx)(De,{})]}):u?(0,Ae.jsxs)("div",{className:"article-page",children:[(0,Ae.jsx)("div",{className:"article-error",children:u}),(0,Ae.jsx)(De,{})]}):(0,Ae.jsxs)("div",{className:"article-page",onTouchStart:e=>{v.current=e.touches[0].clientX,b.current=e.touches[0].clientY,x.current=!0},onTouchMove:e=>{y.current=e.touches[0].clientX,w.current=e.touches[0].clientY},onTouchEnd:()=>{if(!x.current||0===v.current||0===y.current)return void(x.current=!1);const e=y.current-v.current,n=w.current-b.current;e>75&&Math.abs(n)<50&&t(-1),v.current=0,y.current=0,b.current=0,w.current=0,x.current=!1},children:[(0,Ae.jsxs)("button",{className:"back-button",onClick:()=>{t(-1)},children:[(0,Ae.jsx)("svg",{viewBox:"0 0 24 24",className:"back-icon",children:(0,Ae.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",fill:"currentColor"})}),"Back"]}),o?(0,Ae.jsx)("div",{className:"article-hero",children:(0,Ae.jsxs)("div",{className:"hero-image-container",children:[(0,Ae.jsx)("img",{src:o.url,alt:o.description||"Article hero image",loading:"eager"}),(0,Ae.jsx)("div",{className:"hero-overlay",children:(0,Ae.jsx)("h1",{className:"article-title",children:Pt(e||"")})})]})}):(0,Ae.jsx)("div",{className:"article-hero no-image",children:(0,Ae.jsx)("h1",{className:"article-title",children:Pt(e||"")})}),(0,Ae.jsx)("article",{className:"article-content",onClick:n=>{if(x.current)return void n.preventDefault();const r=n.target.closest(".wiki-link");if(r){const n=r.getAttribute("data-article");if(n){const r=Pt(e||"");t("/article/".concat(Lt(n)),{state:{fromTitle:r}})}}},dangerouslySetInnerHTML:{__html:r}}),(0,Ae.jsx)(De,{}),(0,Ae.jsx)(Qt,{isOpen:f,onClose:async e=>{h(!1),p({});const t=dt();t&&t.reminderEnabled&&("donate"===e||"close"===e?await(()=>{const e=st();e&&(e.articlesViewedSinceReminderSet=0,ct(e),console.log("REMINDER_SERVICE: Reminder counter fully reset to 0."))})():"snooze"===e?await(()=>{const e=st();if(e&&e.reminderEnabled){const t=parseInt(e.frequency,10);if(isNaN(t))console.warn("REMINDER_SERVICE: Cannot snooze, frequency is not a number.");else{const n=Math.max(0,t-2);ct(Be(Be({},e),{},{articlesViewedSinceReminderSet:n})),console.log("REMINDER_SERVICE: Snoozed. Counter set to ".concat(n," (frequency: ").concat(t,")"))}}else console.log("REMINDER_SERVICE: Cannot snooze, reminders not enabled or no settings.")})():"disable"===e&&await ut())},amount:m.amount,frequency:m.frequency,donationUrl:m.url})]})},Jt="linkQuest_gameState",Zt="linkQuest_gameData";function en(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)}function tn(e,t){const n=(new DOMParser).parseFromString(e,"text/html").querySelector("p");if(!n)return!1;const r=n.querySelectorAll('a[href^="/wiki/"]');for(const a of Array.from(r)){const e=a.getAttribute("href");if(e){const n=e.replace("/wiki/","");if(!n.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i)){if(decodeURIComponent(n).replace(/_/g," ").toLowerCase()===t.toLowerCase())return!0}}}return!1}function nn(e,t){const n=(new DOMParser).parseFromString(e,"text/html"),r=n.querySelectorAll('a[href^="/wiki/"]');for(const s of Array.from(r)){const e=s.getAttribute("href");if(e){const r=e.replace("/wiki/",""),c=decodeURIComponent(r).replace(/_/g," ");if(c.toLowerCase()===t.toLowerCase()){if(s.closest(".infobox, .infobox_v2, .infobox_v3, table.infobox"))continue;if(s.closest(".reference, .mw-references-wrap, .reflist, .references, ol.references, ul.references, .cite_note, .citation"))continue;if(s.closest(".thumbcaption, .gallerytext, .image, figcaption, .floatright, .floatleft, .thumb, .thumbinner, .thumbimage"))continue;let e,r=s.parentElement;for(;r&&r!==n.body;){if(r.tagName&&["H2","H3","H4","H5","H6"].includes(r.tagName)){var a;e=(null===(a=r.textContent)||void 0===a?void 0:a.trim())||void 0;break}r=r.parentElement}let u=s.parentElement;for(;u&&!["P","LI","TD"].includes(u.tagName);)u=u.parentElement;if(u)try{const r=u.cloneNode(!0),a=u.textContent||"",i=s.textContent||"";if(!a||!i)continue;const d=a.indexOf(i);if(-1===d||d>=a.length)continue;if(-1!==d){let s=d,u=0;const f=300,h=100,m=Math.max(0,d-f);for(let e=d-1;e>=m&&u<3&&!(e<0||e>=a.length);e--){const t=a[e];if(("."===t||"!"===t||"?"===t)&&(0===e||"."!==a[e-1]||e>=2&&"."!==a[e-2])&&(e===a.length-1||e+1<a.length&&/\s/.test(a[e+1]))&&(u++,u>=2)){for(s=e+1;s<d&&s<a.length&&/\s/.test(a[s]);)s++;break}}d-s<h&&(s=Math.max(0,d-h)),s=Math.max(0,Math.min(s,a.length));const p=450;let g=Math.min(a.length,d+i.length+p);for(let e=g;e<Math.min(a.length,g+50)&&!(e<0||e>=a.length);e++){const t=a[e];if(("."===t||"!"===t||"?"===t)&&(0===e||"."!==a[e-1]||e>=2&&"."!==a[e-2])&&(e===a.length-1||e+1<a.length&&/\s/.test(a[e+1]))){g=e+1;break}}g=Math.max(s+1,Math.min(g,a.length));const v=n.createRange(),y=n.createTreeWalker(r,NodeFilter.SHOW_TEXT);let b,w=0,x=null,k=null,S=0,C=0;for(;b=y.nextNode();)if(b.nodeType===Node.TEXT_NODE){var l;const e=b,t=(null===(l=e.textContent)||void 0===l?void 0:l.length)||0;if(null===x&&w+t>=s&&(x=e,S=s-w),w+t>=g){k=e,C=g-w;break}w+=t}const N=n.createElement("div");var o;if(x&&k)v.setStart(x,Math.max(0,S)),v.setEnd(k,Math.min((null===(o=k.textContent)||void 0===o?void 0:o.length)||0,C)),N.appendChild(v.cloneContents());else N.appendChild(r.cloneNode(!0));N.querySelectorAll('a[href^="/wiki/"]').forEach((e=>{const n=e.getAttribute("href");if(n){const r=n.replace("/wiki/","");decodeURIComponent(r).replace(/_/g," ").toLowerCase()===t.toLowerCase()&&(e.setAttribute("data-highlight","true"),e.setAttribute("data-link-title",c))}}));let E=N.innerHTML.trim();return s>0&&(E="... "+E),g<a.length&&(E+=" ..."),{html:E,highlightedLinkTitle:c,sectionHeading:e}}}catch(i){console.warn("Error extracting link context:",i);continue}}}}}const rn=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var t;const o=en(new Date);if(e)(e=>{try{const t=e||en(new Date);localStorage.removeItem("".concat(Zt,"_").concat(t)),console.log("Cleared cached game for",t)}catch(t){console.error("Error clearing cached game:",t)}})(o);else{const e=(e=>{try{const t=localStorage.getItem("".concat(Zt,"_").concat(e));if(t){const n=JSON.parse(t);if(n.dateKey===e)return n}return null}catch(t){return null}})(o);if(e)return console.log("Using cached game for",o),e}const i=new Date;let s=await Ge(i);if(!s){console.warn("Wikifeeds failed, falling back to featured articles list");const e=await Ye(2500);s=Ke(e,i)}if(!s)return console.error("Failed to get featured article from both Wikifeeds and featured articles list"),null;console.log("Using featured article:",s);const[c,u,d]=await Promise.all([et(s),Qe(s),Ze(s,!0).then((e=>e[0]))]),f=function(e){const t=(new DOMParser).parseFromString(e,"text/html"),n=t.querySelector("h2");let r=null;if(n)r=n;else{const e=t.body;if(e){e.textContent;let n=0;const a=t.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);let l;for(;l=a.nextNode();)if(l.nodeType===Node.TEXT_NODE&&(n+=(l.textContent||"").length,n>1e3)){r=l.parentElement;break}}}const a=t.querySelectorAll('a[href^="/wiki/"]'),l=new Set;return a.forEach((e=>{if(e.closest(".infobox, .infobox_v2, .infobox_v3, table.infobox"))return;if(e.closest(".reference, .mw-references-wrap, .reflist, .references, ol.references, ul.references, .cite_note, .citation"))return;if(e.closest(".navbox, .vertical-navbox, .horizontal-navbox"))return;if(e.closest(".thumbcaption, .gallerytext, .image, figcaption, .floatright, .floatleft, .thumb, .thumbinner, .thumbimage"))return;if(r&&e.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_FOLLOWING)return;const t=e.getAttribute("href");if(t){const e=t.replace("/wiki/","");if(!e.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i)){const t=decodeURIComponent(e).replace(/_/g," ");l.add(t)}}})),l}(c),h=function(e){const t=(new DOMParser).parseFromString(e,"text/html"),n=t.querySelector("h2");let r=null;if(n)r=n;else{const e=t.body;if(e){e.textContent;let n=0;const a=t.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);let l;for(;l=a.nextNode();)if(l.nodeType===Node.TEXT_NODE&&(n+=(l.textContent||"").length,n>1e3)){r=l.parentElement;break}}}const a=t.querySelectorAll('a[href^="/wiki/"]'),l=new Set;return a.forEach((e=>{if(e.closest(".infobox, .infobox_v2, .infobox_v3, table.infobox"))return;if(e.closest(".reference, .mw-references-wrap, .reflist, .references, ol.references, ul.references, .cite_note, .citation"))return;if(e.closest(".navbox, .vertical-navbox, .horizontal-navbox"))return;if(e.closest(".thumbcaption, .gallerytext, .image, figcaption, .floatright, .floatleft, .thumb, .thumbinner, .thumbimage"))return;if(r&&e.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_PRECEDING)return;const t=e.getAttribute("href");if(t){const e=t.replace("/wiki/","");if(!e.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i)){const t=decodeURIComponent(e).replace(/_/g," ");l.add(t)}}})),l}(c),m=Array.from(f);if(m.length<5)return console.error("Featured article has too few links"),null;m.sort();const p=[];for(const e of m){if(p.length>=6)break;if(e.toLowerCase()!==s.toLowerCase()&&("main page"!==e.toLowerCase()&&!e.toLowerCase().includes("main page")&&!e.toLowerCase().includes("(disambiguation)")&&!e.toLowerCase().startsWith("list of")))try{if(tn(await et(e),s)){console.log("Skipping ".concat(e,' - featured article "').concat(s,'" is linked in first paragraph'));continue}const[t,n,r]=await Promise.all([Ze(e),at(e),Qe(e).catch((()=>null))]),a=t&&t.length>0&&t[0];let l,o,i;if(n?l=n:null!==r&&void 0!==r&&r.description&&(l=r.description),null!==r&&void 0!==r&&r.extract){const e=r.extract,t=e.split("\n\n")[0]||e;i=t,o=t.length>300?t.substring(0,300).trim()+"...":t}const u=nn(c,e);p.push({title:e,description:l,thumbnail:a?t[0]:void 0,extract:o,fullExtract:i,isLinked:!0,linkContext:u?u.html:void 0,linkContextTitle:u?u.highlightedLinkTitle:void 0,linkSectionHeading:u?u.sectionHeading:void 0})}catch(l){l instanceof Error&&!l.message.includes("429")&&!l.message.includes("rate limit")&&console.warn("Warning: Could not fetch data for ".concat(e,":"),l.message)}}const g=[];try{const e=await tt(s.replace(/ /g,"_"),30);for(const t of e){var n;if(g.length>=6)break;if(f.has(t.title))continue;if(h.has(t.title))continue;if(t.title.toLowerCase()===s.toLowerCase())continue;if("main page"===t.title.toLowerCase()||t.title.toLowerCase().includes("main page"))continue;if(t.title.toLowerCase().includes("(disambiguation)"))continue;if(t.title.toLowerCase().startsWith("list of"))continue;const e=t.images&&t.images.length>0&&t.images[0];let o,i,c=t.snippet,u=null;try{u=await Qe(t.title).catch((()=>null))}catch(l){}if(!c||0===c.trim().length)try{var r;const e=await at(t.title);e?c=e:null!==(r=u)&&void 0!==r&&r.description&&(c=u.description)}catch(l){var a;null!==(a=u)&&void 0!==a&&a.description&&(c=u.description)}if(null!==(n=u)&&void 0!==n&&n.extract){const e=u.extract,t=e.split("\n\n")[0]||e;i=t,o=t.length>300?t.substring(0,300).trim()+"...":t}g.push({title:t.title,description:c,thumbnail:e&&t.images?t.images[0]:void 0,extract:o,fullExtract:i,isLinked:!1})}}catch(l){l instanceof Error&&!l.message.includes("429")&&!l.message.includes("rate limit")&&console.warn("Warning: Could not fetch similar articles:",l.message)}const v=5,y=5;p.sort(((e,t)=>e.title.localeCompare(t.title))),g.sort(((e,t)=>e.title.localeCompare(t.title)));const b=p.slice(0,Math.min(v,p.length)),w=g.slice(0,Math.min(y,g.length));if(b.length<v||w.length<y)return console.error("Not enough cards: ".concat(b.length," linked, ").concat(w.length," not-linked (need ").concat(v," and ").concat(y,")")),null;const x=[...b,...w],k=function(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t)}(o);!function(e,t){const n=function(e){let t=e;return function(){return t=(9301*t+49297)%233280,t/233280}}(t);for(let r=e.length-1;r>0;r--){const t=Math.floor(n()*(r+1));[e[r],e[t]]=[e[t],e[r]]}}(x,k);const S={featuredArticle:{title:s,leadParagraph:(null===u||void 0===u||null===(t=u.extract)||void 0===t?void 0:t.split("\n\n")[0])||"",thumbnail:d},cards:x,dateKey:o,featuredArticleContentHtml:c};return((e,t)=>{try{localStorage.setItem("".concat(Zt,"_").concat(e),JSON.stringify(t))}catch(l){console.error("Error caching game data:",l)}})(o,S),S}catch(l){return console.error("Error generating daily game:",l),null}};const an=e=>{try{const t=localStorage.getItem("".concat(Jt,"_").concat(e));return t?JSON.parse(t):null}catch(t){return null}},ln=(e,t)=>{try{localStorage.setItem("".concat(Jt,"_").concat(e),JSON.stringify(t))}catch(n){console.error("Error saving game state:",n)}},on=(e,t)=>{const n=t.answers.filter(((t,n)=>t===e.cards[n].isLinked)).length,r=[],a=[],l=[],o=[];let i,s;e.cards.forEach(((e,n)=>{const i=t.answers[n]===e.isLinked;e.isLinked?(l.push({card:e,wasCorrect:i}),i&&r.push(e)):(o.push({card:e,wasCorrect:i}),a.push(e))}));for(let c=0;c<e.cards.length;c++){const n=e.cards[c];if(t.answers[c]===n.isLinked&&n.isLinked&&n.linkContext){i=n.linkContext,s=n.linkSectionHeading,console.log("calculateResult - Found pull quote from card:",{cardTitle:n.title,hasLinkContext:!!n.linkContext,linkSectionHeading:n.linkSectionHeading});break}}return{score:n,totalCards:e.cards.length,hintsUsed:t.hintsUsed,featuredArticle:e.featuredArticle.title,pullQuote:i,pullQuoteSectionHeading:s,linkedArticles:r,notLinkedArticles:a,allLinkedArticles:l,allNotLinkedArticles:o}};function sn(e,t){const n=(new DOMParser).parseFromString(e,"text/html"),r=n.querySelectorAll('a[href^="/wiki/"]');for(const s of Array.from(r)){const e=s.getAttribute("href");if(e){const r=e.replace("/wiki/","");if(r.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i))continue;if(decodeURIComponent(r).replace(/_/g," ").toLowerCase()===t.toLowerCase()){if(s.closest(".infobox, .infobox_v2, .infobox_v3, table.infobox"))continue;if(s.closest(".reference, .mw-references-wrap, .reflist, .references, ol.references, ul.references, .cite_note, .citation"))continue;if(s.closest(".thumbcaption, .gallerytext, .image, figcaption, .floatright, .floatleft, .thumb, .thumbinner, .thumbimage"))continue;const e=n.querySelector("p");if(e&&e.contains(s))continue;let r,c=s.parentElement;for(;c&&c!==n.body;){if(c.tagName&&["H2","H3","H4","H5","H6"].includes(c.tagName)){var a;r=(null===(a=c.textContent)||void 0===a?void 0:a.trim())||void 0;break}c=c.parentElement}let u=s.parentElement;for(;u&&!["P","LI","TD"].includes(u.tagName);)u=u.parentElement;if(u)try{const e=u.cloneNode(!0),a=u.textContent||"",i=s.textContent||"",c=a.indexOf(i);if(-1===c)continue;const d=200,f=300;let h=Math.max(0,c-d),m=Math.min(a.length,c+i.length+f);for(let t=m;t<Math.min(a.length,m+50);t++){const e=a[t];if(("."===e||"!"===e||"?"===e)&&(0===t||"."!==a[t-1])&&(t===a.length-1||t+1<a.length&&/\s/.test(a[t+1]))){m=t+1;break}}const p=n.createRange(),g=n.createTreeWalker(e,NodeFilter.SHOW_TEXT);let v,y=0,b=null,w=null,x=0,k=0;for(;v=g.nextNode();)if(v.nodeType===Node.TEXT_NODE){var l;const e=v,t=(null===(l=e.textContent)||void 0===l?void 0:l.length)||0;if(null===b&&y+t>=h&&(b=e,x=h-y),y+t>=m){w=e,k=m-y;break}y+=t}const S=n.createElement("div");var o;if(b&&w)p.setStart(b,Math.max(0,x)),p.setEnd(w,Math.min((null===(o=w.textContent)||void 0===o?void 0:o.length)||0,k)),S.appendChild(p.cloneContents());else S.appendChild(e.cloneNode(!0));S.querySelectorAll('a[href^="/wiki/"]').forEach((e=>{const n=e.getAttribute("href");if(n){const r=n.replace("/wiki/","");if(!r.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i)){decodeURIComponent(r).replace(/_/g," ").toLowerCase()===t.toLowerCase()&&e.setAttribute("data-highlight","true")}}}));let C=S.innerHTML.trim();return h>0&&(C="... "+C),m<a.length&&(C+=" ..."),{html:C,sectionHeading:r}}catch(i){console.warn("Error extracting link context:",i);continue}}}}return null}function cn(e,t){const n=(new DOMParser).parseFromString(e,"text/html"),r=t.toLowerCase().trim();console.log('[getNodeMentionInConnector] Looking for node article: "'.concat(t,'" (normalized: "').concat(r,'")'));const a=n.querySelectorAll('a[href^="/wiki/"]');console.log("[getNodeMentionInConnector] Found ".concat(a.length," total links in connector article"));const l=n.querySelector("p"),o=[];for(let d=0;d<Math.min(10,a.length);d++){const e=a[d].getAttribute("href");if(e){const t=e.replace("/wiki/","");if(!t.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i))try{let e=decodeURIComponent(t).replace(/_/g," ");o.push(e)}catch(_n){o.push(t)}}}console.log("[getNodeMentionInConnector] Sample link titles:",o);for(const d of Array.from(a)){const e=d.getAttribute("href");if(!e)continue;const t=e.replace("/wiki/","");if(t.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i))continue;let a=t;try{a=decodeURIComponent(t)}catch(_n){a=t}a=a.replace(/_/g," ");const o=a.toLowerCase().trim(),f=(d.textContent||"").toLowerCase().trim();if(!(o===r||f===r||o===r+"s"||o+"s"===r||o===r.slice(0,-1)||r===o.slice(0,-1)||o.length>3&&r.length>3&&(o.includes(r)||r.includes(o))))continue;if(console.log('[getNodeMentionInConnector] Found matching link: href="'.concat(e,'", title="').concat(a,'", linkText="').concat(d.textContent,'"')),l&&l.contains(d))continue;if(d.closest(".infobox, .infobox_v2, .infobox_v3, table.infobox, .navbox, .vertical-navbox"))continue;if(d.closest(".reference, .mw-references-wrap, .reflist, .references, ol.references, ul.references, .cite_note, .citation, .mw-cite-backlink"))continue;if(d.closest(".thumbcaption, .gallerytext, .image, figcaption, .floatright, .floatleft, .thumb, .thumbinner, .thumbimage, .gallery"))continue;if(d.closest("#toc, .toc, .navbox, .vertical-navbox, .horizontal-navbox, .metadata, .hatnote"))continue;let h,m=d.parentElement;for(;m&&m!==n.body;){if(m.tagName&&["H2","H3","H4","H5","H6"].includes(m.tagName)){var i;h=(null===(i=m.textContent)||void 0===i?void 0:i.trim())||void 0;break}m=m.parentElement}let p=d.parentElement;for(;p&&p!==n.body;){const e=p.tagName;if(["P","LI","TD","DD","DT"].includes(e))break;if("DIV"===e){const e=p.classList;if(!e.contains("infobox")&&!e.contains("reference")&&!e.contains("thumb")&&!e.contains("navbox")){if((p.textContent||"").length>50)break}}p=p.parentElement}if(p&&p!==n.body)try{const t=p.cloneNode(!0),a=p.textContent||"",l=d.textContent||"";let o=a.indexOf(l);if(-1===o){if(t.querySelector('a[href="'.concat(e,'"]'))){const n=t.cloneNode(!0),r=n.querySelector('a[href="'.concat(e,'"]'));var s;if(r)r.remove(),o=(null===(s=n.textContent)||void 0===s?void 0:s.length)||0}}-1===o&&(o=0);const i=200,u=300;let f=Math.max(0,o-i),m=Math.min(a.length,o+l.length+u);for(let e=m;e<Math.min(a.length,m+50);e++){const t=a[e];if(("."===t||"!"===t||"?"===t)&&(0===e||"."!==a[e-1])&&(e===a.length-1||e+1<a.length&&/\s/.test(a[e+1]))){m=e+1;break}}const g=n.createRange(),v=n.createTreeWalker(t,NodeFilter.SHOW_TEXT);let y,b=0,w=null,x=null,k=0,S=0;for(;y=v.nextNode();)if(y.nodeType===Node.TEXT_NODE){var c;const e=y,t=(null===(c=e.textContent)||void 0===c?void 0:c.length)||0;if(null===w&&b+t>=f&&(w=e,k=Math.max(0,f-b)),b+t>=m){x=e,S=Math.min(t,m-b);break}b+=t}const C=n.createElement("div");if(w&&x)try{g.setStart(w,k),g.setEnd(x,S),C.appendChild(g.cloneContents())}catch(_n){C.appendChild(t.cloneNode(!0))}else C.appendChild(t.cloneNode(!0));C.querySelectorAll('a[href^="/wiki/"]').forEach((e=>{const t=e.getAttribute("href");if(t){const n=t.replace("/wiki/","");if(!n.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i)){let t=n;try{t=decodeURIComponent(n)}catch(_n){}t=t.replace(/_/g," "),t.toLowerCase().trim()===r&&e.setAttribute("data-highlight","true")}}}));let N=C.innerHTML.trim();return f>0&&(N="... "+N),m<a.length&&(N+=" ..."),{html:N,sectionHeading:h}}catch(u){console.warn("Error extracting node mention context:",u);continue}}return null}function un(e,t){const n=(new DOMParser).parseFromString(e,"text/html").querySelector("p");if(!n)return!1;const r=n.querySelectorAll('a[href^="/wiki/"]');for(const a of Array.from(r)){const e=a.getAttribute("href");if(e){const n=e.replace("/wiki/","");if(!n.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i)){if(decodeURIComponent(n).replace(/_/g," ").toLowerCase()===t.toLowerCase())return!0}}}return!1}function dn(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=(new DOMParser).parseFromString(e,"text/html").querySelectorAll("p");for(let a=n?1:0;a<r.length;a++){const e=r[a].querySelectorAll('a[href^="/wiki/"]');for(const n of Array.from(e)){const e=n.getAttribute("href");if(e){const n=e.replace("/wiki/","");if(!n.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i)){if(decodeURIComponent(n).replace(/_/g," ").toLowerCase()===t.toLowerCase())return!0}}}}return!1}function fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)}function hn(e){try{const t=localStorage.getItem("knowledgeWeb_gameState_".concat(e));if(!t)return null;const n=JSON.parse(t);return n.puzzle_id!==e?(console.warn("Game state puzzle_id (".concat(n.puzzle_id,") doesn't match dateKey (").concat(e,"), ignoring old state")),localStorage.removeItem("knowledgeWeb_gameState_".concat(e)),null):n}catch(t){return null}}function mn(e,t){try{localStorage.setItem("knowledgeWeb_gameState_".concat(e),JSON.stringify(t))}catch(n){console.error("Error saving knowledge web game state:",n)}}async function pn(){try{const n=fn(),r=new Date;let a=await Ge(r);if(!a){console.warn("Wikifeeds failed, falling back to featured articles list");const e=await Ye(2500);a=Ke(e,r)}if(!a)return console.error("Failed to get featured article from both Wikifeeds and featured articles list"),null;console.log("Using featured article for Knowledge Web:",a);let l="";try{const e=await Qe(a);if(null!==e&&void 0!==e&&e.description)l=e.description;else if(null!==e&&void 0!==e&&e.extract)l=e.extract.split("\n\n")[0]||"";else{const e=await at(a);e&&(l=e)}}catch(e){console.warn("Error fetching featured article summary:",e);try{const e=await at(a);e&&(l=e)}catch(t){console.warn("Error fetching short description as fallback:",t)}}let o=null;try{const e=et(a),t=new Promise(((e,t)=>setTimeout((()=>t(new Error("Timeout"))),1e4)));o=await Promise.race([e,t])}catch(e){return console.error("Error or timeout fetching featured article content:",e),null}if(!o)return console.error("Failed to fetch featured article content"),null;const i=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(new DOMParser).parseFromString(e,"text/html"),r=[],a=new Set;let l=n.querySelector("h2");const o=n.querySelectorAll('a[href^="/wiki/"]');for(const i of Array.from(o)){if(i.closest(".infobox, .infobox_v2, .infobox_v3, table.infobox"))continue;if(i.closest(".reference, .mw-references-wrap, .reflist, .references, ol.references, ul.references, .cite_note, .citation"))continue;if(i.closest(".navbox, .vertical-navbox, .horizontal-navbox"))continue;if(i.closest(".thumbcaption, .gallerytext, .image, figcaption, .floatright, .floatleft, .thumb, .thumbinner, .thumbimage"))continue;if(t&&l&&i.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_FOLLOWING)continue;const e=i.getAttribute("href");if(e){const t=e.replace("/wiki/","");if(!t.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i)){const e=decodeURIComponent(t).replace(/_/g," ");a.has(e.toLowerCase())||(r.push(e),a.add(e.toLowerCase()))}}}return r}(o,!0);console.log("Found ".concat(i.length," links in featured article (excluding first paragraph)"));const s=new DOMParser,c=s.parseFromString(o,"text/html").querySelector("p"),u=new Set;if(c){const e=c.querySelectorAll('a[href^="/wiki/"]');for(const t of Array.from(e)){const e=t.getAttribute("href");if(e){const t=e.replace("/wiki/","");if(!t.match(/^(File:|Template:|Category:|Help:|Portal:|Wikipedia:|Special:)/i)){const e=decodeURIComponent(t).replace(/_/g," ");u.add(e.toLowerCase())}}}}console.log("Found ".concat(u.size," links in first paragraph"));const d=i.filter((e=>!u.has(e.toLowerCase())));if(console.log("Found ".concat(d.length," candidate surrounding articles")),d.length<4)return console.error("Not enough candidate surrounding articles"),null;const f=["top-left","top-right","bottom-left","bottom-right"],h=[],m=new Set;for(let e=0;e<4&&e<d.length;e++){const t=d[e];m.has(t.toLowerCase())||(h.push({id:e+1,title:t,url:"https://en.wikipedia.org/wiki/".concat(t.replace(/ /g,"_")),position:f[e]}),m.add(t.toLowerCase()))}if(h.length<4)return console.error("Could not select 4 surrounding articles"),null;console.log("Selected surrounding articles:",h.map((e=>e.title)));const p=[],g=new Set,v=i.filter((e=>!u.has(e.toLowerCase())&&!m.has(e.toLowerCase())));if(console.log("Found ".concat(v.length," candidate connecting articles")),v.length<4)return console.error("Not enough candidate connecting articles (found ".concat(v.length,", need at least 4)")),null;for(const t of h){let n=null,r=0;const l=Math.min(v.length,30);for(const o of v){if(r++,r>l){console.warn("Reached max attempts (".concat(l,") for ").concat(t.title));break}if(!g.has(o.toLowerCase())&&o.toLowerCase()!==t.title.toLowerCase())try{const e=et(o),r=new Promise(((e,t)=>setTimeout((()=>t(new Error("Timeout"))),8e3))),l=await Promise.race([e,r]);if(un(l,a))continue;const i=dn(l,t.title,!0),s=un(l,t.title);if(!i&&!s)continue;n={surroundingArticleId:t.id,connectingArticle:o,url:"https://en.wikipedia.org/wiki/".concat(o.replace(/ /g,"_")),explanation:"".concat(o," connects ").concat(a," to ").concat(t.title,".")},g.add(o.toLowerCase());break}catch(e){continue}}n?(p.push(n),console.log("Found connection for ".concat(t.title,": ").concat(n.connectingArticle))):console.warn("Could not find connection for ".concat(t.title))}if(p.length<4){console.log("Only found ".concat(p.length," connections, trying to find replacements..."));for(let t=p.length;t<4;t++){const n=h[t];let r=0;const l=Math.min(v.length,30);for(const t of v){if(r++,r>l){console.warn("Reached max attempts (".concat(l,") for replacement connection for ").concat(n.title));break}if(!g.has(t.toLowerCase())&&t.toLowerCase()!==n.title.toLowerCase())try{const e=et(t),r=new Promise(((e,t)=>setTimeout((()=>t(new Error("Timeout"))),8e3))),l=await Promise.race([e,r]);if(un(l,a))continue;const o=dn(l,n.title,!0),i=un(l,n.title);if(!o&&!i)continue;const s={surroundingArticleId:n.id,connectingArticle:t,url:"https://en.wikipedia.org/wiki/".concat(t.replace(/ /g,"_")),explanation:"".concat(t," connects ").concat(a," to ").concat(n.title,".")};p.push(s),g.add(t.toLowerCase()),console.log("Found replacement connection for ".concat(n.title,": ").concat(t));break}catch(e){continue}}}}if(p.length<4){if(console.error("Could not find 4 valid connections (found ".concat(p.length,")")),console.error("This may happen if the featured article has limited links or connections are too strict."),console.error("Attempting to use less strict validation..."),p.length<4&&o){const e=[],t=new Set(p.map((e=>e.connectingArticle.toLowerCase())));h.filter((e=>!p.find((t=>t.surroundingArticleId===e.id)))).map((e=>e.id));for(const n of h)if(!p.find((e=>e.surroundingArticleId===n.id)))for(const r of v){if(t.has(r.toLowerCase()))continue;if(r.toLowerCase()===n.title.toLowerCase())continue;if(un(o,r))continue;if(!dn(o,r,!0))continue;const l={surroundingArticleId:n.id,connectingArticle:r,url:"https://en.wikipedia.org/wiki/".concat(r.replace(/ /g,"_")),explanation:"".concat(r," connects ").concat(a," to ").concat(n.title,".")};e.push(l),t.add(r.toLowerCase());break}p.length+e.length>=4&&(p.push(...e.slice(0,4-p.length)),console.log("Using ".concat(e.length," fallback connections to reach 4 total")))}if(p.length<4)return console.error("Puzzle generation failed: Not enough valid connections found even with fallback."),null}const y={puzzle_id:n,featured_article:{title:a,url:"https://en.wikipedia.org/wiki/".concat(a.replace(/ /g,"_")),description:l||"Article about ".concat(a)},surrounding_articles:h,connections:p.slice(0,4),answer_pool:p.slice(0,4).map((e=>e.connectingArticle))};if(4!==y.connections.length)return console.error("Puzzle has ".concat(y.connections.length," connections, expected 4.")),null;try{const e=await Ze(y.featured_article.title,!0);e.length>0&&(y.featured_article.thumbnail=e[0].url);const t=y.surrounding_articles.map((async e=>{const t=await Ze(e.title,!0);return{article:e,thumbnail:t.length>0?t[0].url:void 0}}));(await Promise.all(t)).forEach((e=>{let{article:t,thumbnail:n}=e;const r=y.surrounding_articles.find((e=>e.id===t.id));r&&(r.thumbnail=n)}));const n=y.connections.map((async e=>{const t=await Ze(e.connectingArticle,!0);return{connection:e,thumbnail:t.length>0?t[0].url:void 0}}));(await Promise.all(n)).forEach((e=>{let{connection:t,thumbnail:n}=e;const r=y.connections.find((e=>e.surroundingArticleId===t.surroundingArticleId));r&&(r.thumbnail=n)}))}catch(e){console.error("Error fetching images for knowledge web puzzle:",e)}const b=[...y.answer_pool];for(let e=b.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[b[e],b[t]]=[b[t],b[e]]}return y.answer_pool=b,y}catch(e){return console.error("Error generating Knowledge Web puzzle:",e),e instanceof Error&&console.error("Error details:",e.message,e.stack),null}}const gn=()=>{const e=ee(),[t,n]=(0,a.useState)(!1),[r,l]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1),[s,c]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(()=>{const e=en(),t=an(e),r=t&&(t.answers.length>0||t.currentCardIndex>0||t.isComplete);l(r||!1),t&&t.isComplete?n(!0):n(!1);const a=hn(fn()),o=a&&(a.current_connections.some((e=>null!==e.connecting_article))||a.submissions.length>0||a.is_complete);c(o||!1),a&&a.is_complete?i(!0):i(!1)})()}),[]);return(0,Ae.jsxs)("div",{className:"games-page",children:[(0,Ae.jsxs)("div",{className:"title-container",children:[(0,Ae.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/1/10/Wikipedia-W-bold-in-square.svg",alt:"Wikipedia Logo",className:"page-logo"}),(0,Ae.jsx)("h1",{className:"page-title",children:"Games"})]}),(0,Ae.jsx)("p",{className:"games-subtitle",children:"Experimental ways to explore Wikipedia through play."}),(0,Ae.jsxs)("section",{className:"games-grid",children:[(0,Ae.jsxs)("article",{className:"game-card",children:[(0,Ae.jsxs)("div",{className:"game-card-header",children:[(0,Ae.jsxs)("h2",{className:"game-card-title",children:[(0,Ae.jsx)("i",{className:"fas fa-link"})," Linked"]}),(0,Ae.jsx)("span",{className:"game-badge",children:"Daily"})]}),(0,Ae.jsx)("p",{className:"game-card-description",children:"Swipe to guess which articles are linked in today's featured Wikipedia article. Test your knowledge or learn something new!"}),(0,Ae.jsxs)("div",{className:"game-card-actions",children:[(0,Ae.jsx)("button",{className:"game-card-button game-card-button-primary",onClick:async()=>{if(t)try{const t=en(),n=an(t);if(n&&n.isComplete){const t=await rn();if(t){const r=on(t,n);return void e("/games/linkquest/results",{state:{result:r,game:t}})}}}catch(n){return console.error("Error generating game data:",n),void e("/games/linkquest")}e("/games/linkquest")},children:t?"Admire results":"Play"}),r&&(0,Ae.jsx)("button",{className:"game-card-button game-card-button-secondary",onClick:()=>{const t=en();try{localStorage.removeItem("linkQuest_gameState_".concat(t)),n(!1),l(!1),e("/games/linkquest")}catch(r){console.error("Error resetting game:",r),e("/games/linkquest")}},children:"Reset / Play Again"})]})]}),(0,Ae.jsxs)("article",{className:"game-card game-card-knowledge-web",children:[(0,Ae.jsxs)("div",{className:"game-card-header",children:[(0,Ae.jsxs)("h2",{className:"game-card-title",children:[(0,Ae.jsx)("i",{className:"fas fa-project-diagram"})," Knowledge Web"]}),(0,Ae.jsx)("span",{className:"game-badge",children:"Daily"})]}),(0,Ae.jsx)("p",{className:"game-card-description",children:"Complete the knowledge web by matching articles to fill in the missing connections between today's featured article and related topics."}),(0,Ae.jsxs)("div",{className:"game-card-actions",children:[(0,Ae.jsx)("button",{className:"game-card-button game-card-button-primary",onClick:()=>{e("/games/knowledge-web")},children:o?"View Results":"Play"}),s&&(0,Ae.jsx)("button",{className:"game-card-button game-card-button-secondary",onClick:()=>{const t=fn();try{localStorage.removeItem("knowledgeWeb_gameState_".concat(t)),i(!1),c(!1),e("/games/knowledge-web")}catch(n){console.error("Error resetting knowledge web game:",n),e("/games/knowledge-web")}},children:"Reset / Play Again"})]})]})]})]})},vn=()=>{var e;const t=ee(),[n,r]=(0,a.useState)(!0),[l,o]=(0,a.useState)(null),[i,s]=(0,a.useState)(null),[c,u]=(0,a.useState)({currentCardIndex:0,answers:[],skippedIndices:[],hintsUsed:0,shuffleCount:0,isComplete:!1}),[d,f]=(0,a.useState)(!1),[h,m]=(0,a.useState)(null),p=(0,a.useRef)(null),[g,v]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null),[w,x]=(0,a.useState)(!1),k=(0,a.useRef)(null),S=(0,a.useRef)(null),C=(0,a.useRef)(0),N=(0,a.useRef)(0),E=(0,a.useRef)(0),j=(0,a.useRef)(0),_=(0,a.useRef)(!1),T=(0,a.useRef)(new Map),R=en(),P=(0,a.useRef)(null),L=(0,a.useRef)(null);(0,a.useEffect)((()=>((async()=>{r(!0),o(null);try{const e=an(R);if(e&&e.isComplete){const n=await rn();if(n){const r=on(n,e);return void t("/games/linkquest/results",{state:{result:r,game:n}})}}const n=await rn();if(!n)return o("Failed to load today's game. Please try again."),void r(!1);if(s(n),e){let t=e.currentCardIndex;(t>=n.cards.length||void 0!==e.answers[t])&&(t=n.cards.findIndex(((t,n)=>void 0===e.answers[n])),-1===t&&(t=n.cards.length)),u(Be(Be({},e),{},{currentCardIndex:t}))}r(!1)}catch(e){console.error("Error loading game:",e),o("Failed to load game. Please try again."),r(!1)}})(),()=>{P.current&&document.removeEventListener("mousemove",P.current),L.current&&document.removeEventListener("mouseup",L.current)})),[R,t]),(0,a.useEffect)((()=>{!k.current||h||g||(k.current.style.transition="",k.current.style.transform="",k.current.style.opacity="1")}),[c.currentCardIndex,h,g,null===i||void 0===i?void 0:i.cards]);let I=c.currentCardIndex,A=(null===i||void 0===i||null===(e=i.cards)||void 0===e?void 0:e[I])||null;if(!A&&i&&!c.isComplete){const e=i.cards.findIndex(((e,t)=>void 0===c.answers[t]));-1!==e&&(I=e,A=i.cards[I],I!==c.currentCardIndex&&u(Be(Be({},c),{},{currentCardIndex:I})))}(0,a.useEffect)((()=>{null!==i&&void 0!==i&&i.cards&&i.cards.forEach(((e,t)=>{e&&T.current.set(t,Be({},e))}))}),[null===i||void 0===i?void 0:i.cards]),(0,a.useEffect)((()=>{if(k.current&&A&&!h&&!g){const e=setTimeout((()=>{if(k.current){const e=k.current;e.style.height;e.style.height="auto";const t=e.offsetHeight;(null===S.current||t>S.current)&&(S.current=t);const n=e.closest(".linkquest-card-container");n&&n.style.setProperty("--card-height","".concat(S.current,"px")),e.style.height="".concat(S.current,"px")}}),50);return()=>clearTimeout(e)}}),[A,h,g]);const D=c.currentCardIndex+1,O=(i&&D<i.cards.length&&i.cards[D],(0,a.useCallback)((e=>{if(!i||!A||h||g)return void console.log("handleSwipe blocked:",{game:!!i,currentCard:!!A,showFeedback:h,isSwipingAway:g});console.log("handleSwipe called:",{isLinked:e,currentCardTitle:A.title,currentIndex:c.currentCardIndex});const n=A,r=c.currentCardIndex,a=e===n.isLinked,l=[...c.answers];l[r]=a;const o=c.skippedIndices.filter((e=>e!==r));l.filter((e=>void 0!==e)).length,i.cards.length;let s=r+1;for(;s<i.cards.length&&void 0!==l[s];)s++;if(s>=i.cards.length){const e=Be(Be({},c),{},{skippedIndices:o,answers:l,currentCardIndex:i.cards.length,isComplete:!0});return u(e),ln(R,e),k.current&&(k.current.style.transition="opacity 0.3s ease",k.current.style.opacity="0"),void setTimeout((()=>{const n=on(i,e);t("/games/linkquest/results",{state:{result:n,game:i}})}),300)}if(v(!0),k.current){const t=e?1:-1,n=window.innerWidth;k.current.style.transition="transform 0.3s ease, opacity 0.3s ease",k.current.style.transform="translate(".concat(t*n,"px, 0) rotate(").concat(30*t,"deg)"),k.current.style.opacity="0"}const d=Be(Be({},c),{},{skippedIndices:o,answers:l,isComplete:!1});ln(R,d),setTimeout((()=>{v(!1),b(null);const e=l.filter((e=>void 0!==e)).length>=i.cards.length,n=Be(Be({},d),{},{currentCardIndex:s,isComplete:e});if(u(n),ln(R,n),e)return k.current&&(k.current.style.transition="opacity 0.5s ease",k.current.style.opacity="0"),void setTimeout((()=>{const e=on(i,n);t("/games/linkquest/results",{state:{result:e,game:i}})}),500);k.current&&(k.current.style.transition="",k.current.style.transform="",k.current.style.opacity="1")}),300)}),[i,A,c,h,g,R,t])),M=(0,a.useCallback)((()=>{if(!i||!A||h||g)return;const e=c.currentCardIndex,n=i.cards.map(((e,t)=>t)).filter((t=>t!==e&&void 0===c.answers[t]));if(0===n.length)return;const r=n[Math.floor(Math.random()*n.length)],a=[...c.skippedIndices];a.includes(e)||a.push(e);const l=(c.shuffleCount||0)+1;if(c.answers.filter((e=>void 0!==e)).length>=i.cards.length&&i){const e=Be(Be({},c),{},{skippedIndices:a,currentCardIndex:i.cards.length,shuffleCount:l,isComplete:!0});return u(e),ln(R,e),k.current&&(k.current.style.transition="opacity 0.5s ease",k.current.style.opacity="0"),void setTimeout((()=>{const n=on(i,e);t("/games/linkquest/results",{state:{result:n,game:i}})}),500)}const o=Be(Be({},c),{},{skippedIndices:a,currentCardIndex:r,shuffleCount:l,isComplete:!1});u(o),ln(R,o),k.current&&(k.current.style.transition="opacity 0.3s ease",k.current.style.opacity="0",setTimeout((()=>{k.current&&(k.current.style.transition="",k.current.style.opacity="1")}),300))}),[i,A,c,h,g,R,t]),F=(0,a.useCallback)((e=>{if(h||g||!k.current||!A)return;const t=e.clientX-C.current,n=e.clientY-N.current;if((Math.abs(t)>10||Math.abs(n)>10)&&(_.current||(_.current=!0,x(!0)),E.current=t,j.current=n,k.current)){const e=.1*t;k.current.style.transform="translate(".concat(t,"px, ").concat(n,"px) rotate(").concat(e,"deg)"),k.current.style.opacity=String(1-Math.abs(t)/300)}}),[h,g,A]),z=(0,a.useCallback)((()=>{if(h||g||!k.current||!A)return P.current&&document.removeEventListener("mousemove",P.current),void(L.current&&document.removeEventListener("mouseup",L.current));Math.abs(E.current)>100&&_.current?E.current>0?O(!0):O(!1):k.current&&(k.current.style.transform="",k.current.style.opacity="1"),E.current=0,j.current=0,_.current=!1,x(!1),P.current&&document.removeEventListener("mousemove",P.current),L.current&&document.removeEventListener("mouseup",L.current)}),[h,g,A,O,c]),q=(0,a.useCallback)((e=>{h||g||!k.current||(e.preventDefault(),C.current=e.clientX,N.current=e.clientY,_.current=!1,x(!1),P.current=F,L.current=z,document.addEventListener("mousemove",F),document.addEventListener("mouseup",z))}),[h,g,F,z]);return n?(0,Ae.jsx)("div",{className:"linkquest-page",children:(0,Ae.jsx)("div",{className:"linkquest-loading",children:"Loading today's game..."})}):l?(0,Ae.jsx)("div",{className:"linkquest-page",children:(0,Ae.jsxs)("div",{className:"linkquest-error",children:[(0,Ae.jsx)("p",{children:l}),(0,Ae.jsx)("button",{onClick:()=>window.location.reload(),children:"Retry"})]})}):i&&(h||p.current||g||A)?(0,Ae.jsxs)("div",{className:"linkquest-page",children:[(0,Ae.jsxs)("header",{className:"linkquest-header",children:[(0,Ae.jsx)("div",{className:"linkquest-header-content",children:(0,Ae.jsxs)("div",{children:[(0,Ae.jsxs)("h1",{className:"linkquest-title",children:[(0,Ae.jsx)("i",{className:"fas fa-link",style:{marginRight:"8px"}}),"Linked"]}),(0,Ae.jsx)("p",{className:"linkquest-subtitle",children:"Guess whether articles are hyperlinked within today's article."})]})}),(0,Ae.jsx)("button",{className:"linkquest-close",onClick:()=>t("/games"),children:(0,Ae.jsx)("i",{className:"fas fa-times"})})]}),(0,Ae.jsxs)("div",{className:"linkquest-featured",children:[(0,Ae.jsx)("div",{className:"linkquest-featured-badge",children:"Featured article"}),(0,Ae.jsxs)("div",{className:"linkquest-featured-main",children:[i.featuredArticle.thumbnail&&(0,Ae.jsx)("img",{src:i.featuredArticle.thumbnail.url,alt:i.featuredArticle.title,className:"linkquest-featured-image"}),(0,Ae.jsxs)("div",{className:"linkquest-featured-content",children:[(0,Ae.jsx)("h2",{className:"linkquest-featured-title",children:Pt(i.featuredArticle.title)}),i.featuredArticle.leadParagraph&&(0,Ae.jsx)("p",{className:"linkquest-featured-description",children:i.featuredArticle.leadParagraph})]})]}),i.featuredArticle.leadParagraph&&(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("button",{className:"linkquest-read-lead-btn",onClick:()=>f(!d),title:d?"Collapse":"Read full lead paragraph","aria-expanded":d,children:(0,Ae.jsx)("i",{className:"fas ".concat(d?"fa-chevron-up":"fa-chevron-down")})}),(0,Ae.jsx)("div",{className:"linkquest-lead-expanded ".concat(d?"expanded":""),children:(0,Ae.jsx)("p",{children:i.featuredArticle.leadParagraph})})]})]}),A&&(0,Ae.jsx)("div",{className:"linkquest-linking-icon",children:(0,Ae.jsx)("i",{className:"fas fa-link linkquest-icon-pending"})}),(0,Ae.jsxs)("div",{className:"linkquest-card-zone",children:[(0,Ae.jsxs)("div",{className:"linkquest-card-container",children:[!h&&!p.current&&i&&(()=>{const e=i.cards.filter(((e,t)=>t>c.currentCardIndex&&void 0===c.answers[t])).slice(0,5);return(0,Ae.jsx)("div",{className:"linkquest-card-stack",children:e.map(((e,t)=>{const n=.8*((7*t+13*c.currentCardIndex)%15-7);const r=w||g,a=0===t,l=4*(t+1),o=1-.02*(t+1),i=!r||a,s=window.innerWidth>=769,u=s?.15:.5,d=s?.03:.08;return(0,Ae.jsx)("div",{className:"linkquest-stack-card ".concat(a&&r?"linkquest-next-card-preview":""),style:{zIndex:a&&r?999:1e4-t-1,transform:"translate(-50%, -50%) translateY(".concat(l,"px) scale(").concat(o,") rotate(").concat(n,"deg)"),opacity:i?a&&r?1:Math.max(.1,u-t*d):0,display:i?"block":"none",pointerEvents:"none"},children:(0,Ae.jsxs)("div",{className:"linkquest-card-main",children:[e.thumbnail&&(0,Ae.jsx)("img",{src:e.thumbnail.url,alt:e.title,className:"linkquest-card-image"}),(0,Ae.jsxs)("div",{className:"linkquest-card-content",children:[(0,Ae.jsx)("h3",{className:"linkquest-card-title",children:Pt(e.title,!1)}),e.extract&&(0,Ae.jsx)("p",{className:"linkquest-card-extract",children:Rt(e.fullExtract||e.extract)})]})]})},"".concat(c.currentCardIndex+1+t,"-").concat(e.title))}))})})(),h&&!g?(()=>{const e=h;return e?(0,Ae.jsxs)("div",{className:"linkquest-feedback ".concat(e.isLinked?"linked":"not-linked"),children:[(0,Ae.jsx)("div",{className:"linkquest-feedback-main-status",children:(0,Ae.jsx)("h3",{className:"linkquest-feedback-heading",children:e.isLinked?"Linked!":"Not linked"})}),(0,Ae.jsx)("div",{className:"linkquest-feedback-confirmation",children:e.cardTitle&&(e.isLinked?"The ".concat(Pt(e.cardTitle)," article is currently linked within the ").concat(Pt(i.featuredArticle.title)," article."):"The ".concat(Pt(e.cardTitle)," article is not currently linked within the ").concat(Pt(i.featuredArticle.title)," article!"))}),(0,Ae.jsxs)("div",{className:"linkquest-feedback-answer-status ".concat(e.correct?"correct":"incorrect"),children:[(0,Ae.jsx)("i",{className:"fas ".concat(e.correct?"fa-check":"fa-times")}),(0,Ae.jsxs)("span",{children:["Your guess was ",e.correct?"correct":"incorrect"]})]}),e.linkContext&&(()=>{const t=(new DOMParser).parseFromString(e.linkContext,"text/html");t.querySelectorAll("a").forEach((e=>{var n;const r=t.createElement("span");r.innerHTML=e.innerHTML,Array.from(e.attributes).forEach((e=>{"href"!==e.name&&r.setAttribute(e.name,e.value)})),r.style.cssText=e.style.cssText,"true"===e.getAttribute("data-highlight")&&r.classList.add("linkquest-highlighted-answer"),null===(n=e.parentNode)||void 0===n||n.replaceChild(r,e)}));const n=t.body.innerHTML;return(0,Ae.jsx)("div",{className:"linkquest-link-context",children:(0,Ae.jsx)("div",{className:"linkquest-context-text",dangerouslySetInnerHTML:{__html:n},onClick:e=>(e.preventDefault(),e.stopPropagation(),!1)})})})(),(0,Ae.jsx)("button",{className:"linkquest-feedback-dismiss",onClick:e=>{var n;e.preventDefault(),e.stopPropagation();const r=p.current||h;if(!r)return;const a=null!==(n=r.isComplete)&&void 0!==n&&n,l=r.answerToCommit;if(void 0!==l&&i){const e=c.currentCardIndex-1,t=[...c.answers];t[e]=l;const n=Be(Be({},c),{},{answers:t,isComplete:a});u(n),ln(R,n)}if(p.current=null,m(null),!a&&k.current&&(k.current.style.transition="",k.current.style.transform="",k.current.style.opacity="1"),a&&i){const e=an(R),n=e&&e.isComplete?e:c;n.isComplete?(k.current&&(k.current.style.transition="opacity 0.5s ease",k.current.style.opacity="0"),setTimeout((()=>{const e=on(i,n);console.log("Navigating to results with:",{result:e,game:i,stateToUse:n}),t("/games/linkquest/results",{state:{result:e,game:i}})}),500)):console.warn("Game state not complete:",n)}},children:"Continue"})]}):null})():A?(0,Ae.jsx)("div",{ref:k,className:"linkquest-card",onTouchStart:e=>{h||g||!k.current||(C.current=e.touches[0].clientX,N.current=e.touches[0].clientY,_.current=!1)},onTouchMove:e=>{if(h||g||!k.current||!A)return;const t=e.touches[0].clientX,n=e.touches[0].clientY,r=t-C.current,a=n-N.current;if((Math.abs(r)>10||Math.abs(a)>10)&&(_.current||(_.current=!0,x(!0)),E.current=r,j.current=a,k.current)){const e=.1*r;k.current.style.transform="translate(".concat(r,"px, ").concat(a,"px) rotate(").concat(e,"deg)"),k.current.style.opacity=String(1-Math.abs(r)/300)}},onTouchEnd:()=>{if(h||g||!k.current||!A)return;Math.abs(E.current)>100&&_.current?E.current>0?O(!0):O(!1):k.current&&(k.current.style.transform="",k.current.style.opacity="1"),E.current=0,j.current=0,_.current=!1,x(!1)},onMouseDown:q,children:(0,Ae.jsxs)("div",{className:"linkquest-card-main",children:[A.thumbnail&&(0,Ae.jsx)("img",{src:A.thumbnail.url,alt:A.title,className:"linkquest-card-image"}),(0,Ae.jsxs)("div",{className:"linkquest-card-content",children:[(0,Ae.jsx)("h3",{className:"linkquest-card-title",children:Pt(A.title,!1)}),(e=>{const t=c.currentCardIndex,n=null===i||void 0===i||null===(e=i.cards)||void 0===e?void 0:e[t],r=null===n||void 0===n?void 0:n.extract,a=null===n||void 0===n?void 0:n.fullExtract;return r?(0,Ae.jsx)("p",{className:"linkquest-card-extract",children:Rt(a||r)}):null})()]})]})}):null]}),!h&&i&&(0,Ae.jsxs)("div",{className:"linkquest-actions",children:[i&&(()=>{const e=c.currentCardIndex;return i.cards.map(((e,t)=>t)).filter((t=>t!==e&&void 0===c.answers[t])).length>0?(0,Ae.jsx)("button",{className:"linkquest-shuffle-button",onClick:M,title:"Shuffle to a random card",children:(0,Ae.jsx)("i",{className:"fas fa-random"})}):null})(),(0,Ae.jsx)("div",{className:"linkquest-score-tracker",children:Array.from({length:i.cards.length},((e,t)=>{const n=c.answers[t],r=i.cards[t],a=null===r||void 0===r?void 0:r.isLinked;return(0,Ae.jsxs)("div",{className:"linkquest-score-item",children:[!0===n?(0,Ae.jsx)("div",{className:"linkquest-score-dot linkquest-score-correct",children:(0,Ae.jsx)("i",{className:"fas fa-check"})}):!1===n?(0,Ae.jsx)("div",{className:"linkquest-score-dot linkquest-score-incorrect",children:(0,Ae.jsx)("i",{className:"fas fa-times"})}):(0,Ae.jsx)("div",{className:"linkquest-score-dot linkquest-score-empty"}),void 0!==n&&(0,Ae.jsx)("div",{className:"linkquest-score-link-indicator ".concat(a?"linked":"not-linked"),children:(0,Ae.jsx)("i",{className:"fas ".concat(a?"fa-link":"fa-unlink")})})]},t)}))})]})]}),!(h||p.current)&&(0,Ae.jsxs)("div",{className:"linkquest-action-buttons",children:[(0,Ae.jsxs)("button",{className:"linkquest-action-button linkquest-not-linked-btn",onClick:()=>O(!1),children:[(0,Ae.jsx)("i",{className:"fas fa-unlink"})," Not Linked"]}),(0,Ae.jsxs)("button",{className:"linkquest-action-button linkquest-linked-btn",onClick:()=>O(!0),children:[(0,Ae.jsx)("i",{className:"fas fa-link"})," Linked"]})]})]}):null},yn=()=>{const e=ee(),t=J(),[n,r]=(0,a.useState)(null),[l,o]=(0,a.useState)(null),[i,s]=(0,a.useState)(0),[c,u]=(0,a.useState)({}),[d,f]=(0,a.useState)(null);(0,a.useEffect)((()=>{const n=t.state;if(console.log("Results page - location.state:",n),null!==n&&void 0!==n&&n.result&&console.log("Results page - pullQuoteSectionHeading:",n.result.pullQuoteSectionHeading),n&&n.result&&n.game){r(n.result),o(n.game);const e=n.result.score,t=30,a=e/t;let l=0;const i=setInterval((()=>{l+=a,l>=e?(s(e),clearInterval(i)):s(Math.floor(l))}),1e3/t);if(n.result.allNotLinkedArticles&&n.result.allNotLinkedArticles.length>0){(async()=>{const e={};for(const{card:r}of n.result.allNotLinkedArticles)try{const t=await rt(r.title);t&&(e[r.title]=t)}catch(t){console.error("Failed to fetch extract for ".concat(r.title,":"),t)}u(e)})()}if(n.game.featuredArticle.title){(async()=>{try{const e=await Qe(n.game.featuredArticle.title);if(null!==e&&void 0!==e&&e.extract){const t=e.extract.split("\n\n").filter((e=>e.trim().length>0)).slice(0,3).join("\n\n"),n=t.length>800?t.substring(0,800).trim()+"...":t;f(n)}}catch(e){console.error("Failed to fetch extract for featured article:",e)}})()}return()=>clearInterval(i)}console.warn("Results page - no state, redirecting to game"),e("/games/linkquest")}),[t,e]);if(!n||!l)return(0,Ae.jsx)("div",{className:"linkquest-results-page",children:(0,Ae.jsx)("div",{className:"linkquest-loading",children:"Loading results..."})});const h=new Map;return n.allLinkedArticles&&n.allLinkedArticles.forEach((e=>{let{card:t,wasCorrect:n}=e;h.set(t.title,n)})),n.allNotLinkedArticles&&n.allNotLinkedArticles.forEach((e=>{let{card:t,wasCorrect:n}=e;h.set(t.title,n)})),(0,Ae.jsxs)("div",{className:"linkquest-results-page",children:[(0,Ae.jsx)("button",{className:"linkquest-results-close",onClick:()=>e("/games"),children:(0,Ae.jsx)("i",{className:"fas fa-times"})}),(0,Ae.jsxs)("div",{className:"linkquest-results-container",children:[(0,Ae.jsxs)("div",{className:"linkquest-results-score-section",children:[(0,Ae.jsxs)("div",{className:"linkquest-results-score-header",children:[(0,Ae.jsx)("h2",{className:"linkquest-results-title",children:"Your Results"}),(0,Ae.jsx)("div",{className:"linkquest-results-score-tracker",children:l.cards.map(((e,t)=>{var n;const r=null!==(n=h.get(e.title))&&void 0!==n&&n,a=e.isLinked;return(0,Ae.jsxs)("div",{className:"linkquest-results-score-item",children:[(0,Ae.jsx)("div",{className:"linkquest-results-score-dot ".concat(r?"linkquest-results-score-correct":"linkquest-results-score-incorrect"),children:(0,Ae.jsx)("i",{className:"fas ".concat(r?"fa-check":"fa-times")})}),(0,Ae.jsx)("div",{className:"linkquest-results-score-link-indicator ".concat(a?"linked":"not-linked"),children:(0,Ae.jsx)("i",{className:"fas ".concat(a?"fa-link":"fa-unlink")})})]},t)}))})]}),(0,Ae.jsxs)("div",{className:"linkquest-results-score-text",children:[i,"/",n.totalCards," Correct"]})]}),(0,Ae.jsxs)("div",{className:"linkquest-featured-section",children:[(0,Ae.jsx)("h3",{className:"linkquest-section-title",children:"Featured Article"}),(0,Ae.jsxs)("div",{className:"linkquest-featured",children:[l.featuredArticle.thumbnail&&(0,Ae.jsx)("img",{src:l.featuredArticle.thumbnail.url,alt:l.featuredArticle.title,className:"linkquest-featured-image"}),(0,Ae.jsxs)("div",{className:"linkquest-featured-content",children:[(0,Ae.jsx)("h2",{className:"linkquest-featured-title",onClick:t=>{t.stopPropagation(),e("/article/".concat(Lt(l.featuredArticle.title)))},style:{cursor:"pointer"},children:Pt(l.featuredArticle.title)}),d?(0,Ae.jsx)("div",{className:"linkquest-featured-description",children:d.split("\n\n").map(((e,t)=>(0,Ae.jsx)("p",{style:{marginBottom:t<d.split("\n\n").length-1?"1em":0},children:e},t)))}):l.featuredArticle.leadParagraph?(0,Ae.jsx)("p",{className:"linkquest-featured-description",children:l.featuredArticle.leadParagraph}):null]})]})]}),n.allLinkedArticles&&n.allLinkedArticles.length>0&&(0,Ae.jsxs)("div",{className:"linkquest-linked-articles-section",children:[(0,Ae.jsx)("h3",{className:"linkquest-section-title",children:"Linked Articles"}),(0,Ae.jsx)("div",{className:"linkquest-linked-articles-list",children:n.allLinkedArticles.map(((t,n)=>{let{card:r,wasCorrect:a}=t;return(0,Ae.jsxs)("div",{className:"linkquest-linked-article-card",children:[r.thumbnail&&(0,Ae.jsx)("img",{src:r.thumbnail.url,alt:r.title,className:"linkquest-linked-article-image"}),(0,Ae.jsxs)("div",{className:"linkquest-linked-article-content",children:[(0,Ae.jsx)("h4",{className:"linkquest-linked-article-title",onClick:t=>{t.stopPropagation(),e("/article/".concat(Lt(r.title)))},style:{cursor:"pointer"},children:Pt(r.title)}),(0,Ae.jsxs)("div",{className:"linkquest-answer-status ".concat(a?"correct":"incorrect"),children:[(0,Ae.jsx)("i",{className:"fas ".concat(a?"fa-check":"fa-times")}),(0,Ae.jsxs)("span",{children:["You got this ",a?"correct":"incorrect"]})]}),r.linkContext&&(()=>{const e=(new DOMParser).parseFromString(r.linkContext,"text/html");e.querySelectorAll("a").forEach((t=>{var n;const r=e.createElement("span");r.innerHTML=t.innerHTML,Array.from(t.attributes).forEach((e=>{"href"!==e.name&&r.setAttribute(e.name,e.value)})),r.style.cssText=t.style.cssText,"true"===t.getAttribute("data-highlight")&&r.classList.add("linkquest-highlighted-answer"),null===(n=t.parentNode)||void 0===n||n.replaceChild(r,t)}));const t=e.body.innerHTML;return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsxs)("div",{className:"linkquest-snippet-source",children:["From the ",Pt(l.featuredArticle.title)," article"]}),(0,Ae.jsx)("div",{className:"linkquest-linked-article-snippet",dangerouslySetInnerHTML:{__html:t},onClick:e=>(e.preventDefault(),e.stopPropagation(),!1)})]})})()]})]},n)}))})]}),n.allNotLinkedArticles&&n.allNotLinkedArticles.length>0&&(0,Ae.jsxs)("div",{className:"linkquest-unlinked-articles-section",children:[(0,Ae.jsx)("h3",{className:"linkquest-section-title",children:"Not Linked Articles"}),(0,Ae.jsx)("div",{className:"linkquest-unlinked-articles-list",children:n.allNotLinkedArticles.map(((t,n)=>{let{card:r,wasCorrect:a}=t;return(0,Ae.jsxs)("div",{className:"linkquest-unlinked-article-card",children:[r.thumbnail&&(0,Ae.jsx)("img",{src:r.thumbnail.url,alt:r.title,className:"linkquest-unlinked-article-image"}),(0,Ae.jsxs)("div",{className:"linkquest-unlinked-article-content",children:[(0,Ae.jsx)("h4",{className:"linkquest-unlinked-article-title",onClick:t=>{t.stopPropagation(),e("/article/".concat(Lt(r.title)))},style:{cursor:"pointer"},children:Pt(r.title)}),(0,Ae.jsxs)("div",{className:"linkquest-answer-status ".concat(a?"correct":"incorrect"),children:[(0,Ae.jsx)("i",{className:"fas ".concat(a?"fa-check":"fa-times")}),(0,Ae.jsxs)("span",{children:["You got this ",a?"correct":"incorrect"]})]}),c[r.title]?(0,Ae.jsx)("p",{className:"linkquest-unlinked-article-snippet",children:c[r.title]}):r.description?(0,Ae.jsx)("p",{className:"linkquest-unlinked-article-snippet",children:Rt(r.description)}):null]})]},n)}))})]})]})]})};const bn=()=>{const e=ee(),t=J(),[n,r]=(0,a.useState)(null),[l,o]=(0,a.useState)(null),[i,s]=(0,a.useState)(0),[c,u]=(0,a.useState)("");(0,a.useEffect)((()=>{const n=t.state;n?(r(n.result),o(n.game)):e("/games/linkquest");try{const e=localStorage.getItem("linkQuest_streak");s(e?parseInt(e,10):0)}catch(i){s(0)}const a=()=>{u(function(){const e=new Date,t=new Date(e);t.setUTCDate(t.getUTCDate()+1),t.setUTCHours(0,0,0,0);const n=t.getTime()-e.getTime(),r=Math.floor(n/36e5),a=Math.floor(n%36e5/6e4),l=Math.floor(n%6e4/1e3);return"".concat(String(r).padStart(2,"0"),":").concat(String(a).padStart(2,"0"),":").concat(String(l).padStart(2,"0"))}())};a();const l=setInterval(a,1e3);return()=>clearInterval(l)}),[t,e]);const d=t=>{e("/article/".concat(Lt(t)))};return n&&l?(0,Ae.jsxs)("div",{className:"linkquest-explore-page",children:[(0,Ae.jsxs)("div",{className:"linkquest-sticky-module",children:[(0,Ae.jsxs)("div",{className:"linkquest-sticky-score",children:[(0,Ae.jsx)("div",{className:"linkquest-sticky-label",children:"Today's Score"}),(0,Ae.jsxs)("div",{className:"linkquest-sticky-value",children:[n.score,"/",n.totalCards]})]}),(0,Ae.jsxs)("div",{className:"linkquest-sticky-countdown",children:[(0,Ae.jsx)("div",{className:"linkquest-sticky-label",children:"Next game in"}),(0,Ae.jsx)("div",{className:"linkquest-sticky-time",children:c})]}),i>0&&(0,Ae.jsxs)("div",{className:"linkquest-sticky-streak",children:["\ud83d\udd25 ",i," day streak"]})]}),(0,Ae.jsxs)("section",{className:"linkquest-explore-section",children:[(0,Ae.jsx)("h2",{className:"linkquest-section-header",children:"Featured Article"}),(0,Ae.jsxs)("div",{className:"linkquest-article-card linkquest-featured-article-card",onClick:()=>d(l.featuredArticle.title),children:[l.featuredArticle.thumbnail&&(0,Ae.jsx)("img",{src:l.featuredArticle.thumbnail.url,alt:l.featuredArticle.title,className:"linkquest-article-image"}),(0,Ae.jsxs)("div",{className:"linkquest-article-content",children:[(0,Ae.jsx)("h3",{className:"linkquest-article-title",children:Pt(l.featuredArticle.title)}),(0,Ae.jsx)("p",{className:"linkquest-article-lead",children:l.featuredArticle.leadParagraph}),(0,Ae.jsx)("button",{className:"linkquest-read-button",children:"Read Full Article \u2192"})]})]})]}),n.linkedArticles.length>0&&(0,Ae.jsxs)("section",{className:"linkquest-explore-section",children:[(0,Ae.jsx)("h2",{className:"linkquest-section-header",children:"Articles Linked in Today's Featured Article"}),(0,Ae.jsx)("div",{className:"linkquest-articles-grid",children:n.linkedArticles.map(((e,t)=>(0,Ae.jsxs)("div",{className:"linkquest-article-card",onClick:()=>d(e.title),children:[e.thumbnail&&(0,Ae.jsx)("img",{src:e.thumbnail.url,alt:e.title,className:"linkquest-article-image"}),(0,Ae.jsxs)("div",{className:"linkquest-article-content",children:[(0,Ae.jsx)("h3",{className:"linkquest-article-title",children:Pt(e.title)}),e.description&&(0,Ae.jsx)("p",{className:"linkquest-article-description",children:e.description})]})]},"linked-".concat(t))))})]}),n.notLinkedArticles.length>0&&(0,Ae.jsxs)("section",{className:"linkquest-explore-section",children:[(0,Ae.jsx)("h2",{className:"linkquest-section-header",children:"Articles Not Linked"}),(0,Ae.jsx)("div",{className:"linkquest-articles-grid",children:n.notLinkedArticles.map(((e,t)=>(0,Ae.jsxs)("div",{className:"linkquest-article-card linkquest-not-linked",onClick:()=>d(e.title),children:[e.thumbnail&&(0,Ae.jsx)("img",{src:e.thumbnail.url,alt:e.title,className:"linkquest-article-image"}),(0,Ae.jsxs)("div",{className:"linkquest-article-content",children:[(0,Ae.jsx)("h3",{className:"linkquest-article-title",children:Pt(e.title)}),e.description&&(0,Ae.jsx)("p",{className:"linkquest-article-description",children:e.description})]})]},"notlinked-".concat(t))))})]})]}):(0,Ae.jsx)("div",{className:"linkquest-explore-page",children:(0,Ae.jsx)("div",{className:"linkquest-loading",children:"Loading..."})})};function wn(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xn(e,t){if(!e)return e;const n=t.replace(/_/g," "),r=t.replace(/ /g,"_"),a=new RegExp("\\b(".concat(wn(n),"|").concat(wn(r),")\\b"),"gi");return e.replace(a,"\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588")}const kn=()=>{const e=ee(),t=(0,a.useMemo)((()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)}()),[]),n=(0,a.useMemo)((()=>"whatInTheWiki_dailyState_".concat(t)),[t]),r=(0,a.useMemo)((()=>"whatInTheWiki_puzzleCache_".concat(t)),[t]),[l,o]=(0,a.useState)(!0),[i,s]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[d,f]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[p,g]=(0,a.useState)(null),[v,y]=(0,a.useState)([]),[b,w]=(0,a.useState)(""),[x,k]=(0,a.useState)(""),[S,C]=(0,a.useState)(1),[N,E]=(0,a.useState)([]),[j,_]=(0,a.useState)(!1),[T,R]=(0,a.useState)(!1),P=(0,a.useMemo)((()=>j?"You got it on reveal ".concat(S," / ").concat(5,"."):null),[j,S]),L=(0,a.useCallback)((e=>{if(!c)return;const r=Be({dateKey:t,revealLevel:S,guesses:N,isWon:j,isLost:T,correctTitle:c},e);try{localStorage.setItem(n,JSON.stringify(r))}catch(a){}}),[n,c,t,N,T,j,S]),I=(0,a.useCallback)((()=>{try{const e=localStorage.getItem(n);if(!e)return;const r=JSON.parse(e);if(!r||r.dateKey!==t)return;if(!r.correctTitle)return;u(r.correctTitle),C(r.revealLevel||1),E(Array.isArray(r.guesses)?r.guesses:[]),_(Boolean(r.isWon)),R(Boolean(r.isLost))}catch(e){}}),[n,t]),A=(0,a.useCallback)((()=>{try{const e=localStorage.getItem(r);if(!e)return!1;const n=JSON.parse(e);return!(!n||n.dateKey!==t)&&(!!n.correctTitle&&(u(n.correctTitle),f(n.options),m(n.categories),g(n.thumbnailUrl),y(n.sections),w(n.leadParagraph),k(n.fullLead),!0))}catch(e){return!1}}),[r,t]),D=(0,a.useCallback)((e=>{try{localStorage.setItem(r,JSON.stringify(e))}catch(t){}}),[r]),O=(0,a.useCallback)((async()=>{o(!0),s(null);try{const n=A();if(I(),n)return void o(!1);const r=await Ye(2500),a=Ke(r,new Date);if(!a)return s("Could not select today's article."),void o(!1);let l=[];try{l=await tt(a.replace(/ /g,"_"),10)}catch(e){}const i=l.map((e=>e.title)).filter((e=>"string"===typeof e&&e.length>0&&e.toLowerCase()!==a.toLowerCase())),c=new Set([a]);for(const e of i){if(c.size>=4)break;c.add(e)}for(const e of r){if(c.size>=4)break;e.toLowerCase()!==a.toLowerCase()&&c.add(e)}const d=function(e){const t=[...e];for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t}(Array.from(c)).slice(0,4),[h,p,v]=await Promise.all([Xe(a,30),Je(a),Qe(a)]),b=(null===v||void 0===v?void 0:v.extract)||"",x=xn(b.split("\n\n")[0]||b,a);u(a),f(d),m(h),y(p),g((null===v||void 0===v?void 0:v.thumbnailUrl)||null),k(b),w(x);const S={dateKey:t,correctTitle:a,options:d,categories:h,thumbnailUrl:(null===v||void 0===v?void 0:v.thumbnailUrl)||null,sections:p,leadParagraph:x,fullLead:b};D(S),L({correctTitle:a}),o(!1)}catch(n){console.error("WHAT_IN_THE_WIKI_LOAD_ERROR:",n),s("Failed to load today's game. Please try again."),o(!1)}}),[L,I,A,D,t]);(0,a.useEffect)((()=>{O()}),[O]),(0,a.useEffect)((()=>{c&&L({})}),[L,c,S,N,j,T]);const M=!j&&!T&&S<5,F=j||T||S>=5;return(0,Ae.jsxs)("div",{className:"wiw-page",children:[(0,Ae.jsxs)("header",{className:"wiw-header",children:[(0,Ae.jsx)("button",{className:"wiw-back",onClick:()=>e("/games"),children:"\u2190 Games"}),(0,Ae.jsxs)("div",{className:"wiw-title-wrap",children:[(0,Ae.jsx)("h1",{className:"wiw-title",children:"What in the Wiki"}),(0,Ae.jsxs)("div",{className:"wiw-meta",children:["Daily \u2022 ",t," (UTC)"]})]})]}),l&&(0,Ae.jsx)("div",{className:"wiw-loading",children:"Loading today\u2019s puzzle\u2026"}),!l&&i&&(0,Ae.jsxs)("div",{className:"wiw-error",children:[(0,Ae.jsx)("div",{className:"wiw-error-title",children:"Couldn\u2019t load the game"}),(0,Ae.jsx)("div",{className:"wiw-error-body",children:i}),(0,Ae.jsx)("button",{className:"wiw-primary",onClick:O,children:"Retry"})]}),!l&&!i&&c&&(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsxs)("section",{className:"wiw-panel",children:[(0,Ae.jsxs)("div",{className:"wiw-panel-top",children:[(0,Ae.jsx)("div",{className:"wiw-panel-heading",children:"Make a guess"}),(0,Ae.jsx)("div",{className:"wiw-panel-sub",children:"Choose 1 of 4. Reveal more clues if you\u2019re stuck."})]}),(0,Ae.jsx)("div",{className:"wiw-options",children:d.map((e=>{const t=N.includes(e),n=(j||T)&&e.toLowerCase()===c.toLowerCase(),r=t&&!n&&e.toLowerCase()!==c.toLowerCase();return(0,Ae.jsx)("button",{className:["wiw-option",t?"guessed":"",n?"correct":"",r?"wrong":""].join(" "),onClick:()=>(e=>{if(!c)return;if(j||T)return;E((t=>t.includes(e)?t:[...t,e])),e.toLowerCase()===c.toLowerCase()?_(!0):S>=5&&R(!0)})(e),disabled:j||T,children:e},e)}))}),(0,Ae.jsxs)("div",{className:"wiw-actions",children:[(0,Ae.jsx)("button",{className:"wiw-secondary",onClick:()=>{M&&C((e=>Math.min(5,e+1)))},disabled:!M,children:"Reveal next clue"}),(0,Ae.jsxs)("div",{className:"wiw-reveal-status",children:["Reveal ",S," / ",5]})]}),(j||T)&&(0,Ae.jsxs)("div",{className:"wiw-result ".concat(j?"win":"lose"),children:[(0,Ae.jsx)("div",{className:"wiw-result-title",children:j?"You got it!":"Game over"}),(0,Ae.jsxs)("div",{className:"wiw-result-body",children:["The article was: ",(0,Ae.jsx)("strong",{children:c})]}),j&&P&&(0,Ae.jsx)("div",{className:"wiw-score",children:P}),(0,Ae.jsx)("button",{className:"wiw-link",onClick:()=>e("/article/".concat(encodeURIComponent(c.replace(/ /g,"_")))),children:"Read the article \u2192"})]})]}),(0,Ae.jsxs)("section",{className:"wiw-clues",children:[S>=1&&(0,Ae.jsxs)("div",{className:"wiw-clue",children:[(0,Ae.jsx)("div",{className:"wiw-clue-title",children:"Reveal 1: Categories"}),0===h.length?(0,Ae.jsx)("div",{className:"wiw-clue-body muted",children:"No categories found."}):(0,Ae.jsx)("div",{className:"wiw-tags",children:h.map((e=>(0,Ae.jsx)("span",{className:"wiw-tag",children:e},e)))})]}),S>=2&&(0,Ae.jsxs)("div",{className:"wiw-clue",children:[(0,Ae.jsx)("div",{className:"wiw-clue-title",children:"Reveal 2: Image"}),(0,Ae.jsx)("div",{className:"wiw-clue-body",children:p?(0,Ae.jsx)("img",{className:"wiw-image",src:p,alt:"Article lead image clue"}):(0,Ae.jsx)("div",{className:"muted",children:"No image available for this article."})})]}),S>=3&&(0,Ae.jsxs)("div",{className:"wiw-clue",children:[(0,Ae.jsx)("div",{className:"wiw-clue-title",children:"Reveal 3: Table of contents"}),0===v.length?(0,Ae.jsx)("div",{className:"wiw-clue-body muted",children:"No sections found."}):(0,Ae.jsx)("ol",{className:"wiw-toc",children:v.filter((e=>e.toclevel<=2)).slice(0,18).map((e=>(0,Ae.jsx)("li",{className:"lvl-".concat(e.toclevel),children:xn(e.line,c)},"".concat(e.number,"-").concat(e.anchor))))}),(0,Ae.jsx)("div",{className:"wiw-clue-foot muted",children:"(Headings limited for readability; title redacted.)"})]}),S>=4&&(0,Ae.jsxs)("div",{className:"wiw-clue",children:[(0,Ae.jsx)("div",{className:"wiw-clue-title",children:"Reveal 4: First paragraph"}),(0,Ae.jsx)("div",{className:"wiw-clue-body wiw-paragraph",children:b||(0,Ae.jsx)("span",{className:"muted",children:"No lead text available."})})]}),S>=5&&(0,Ae.jsxs)("div",{className:"wiw-clue",children:[(0,Ae.jsx)("div",{className:"wiw-clue-title",children:"Reveal 5: Entire article revealed"}),(0,Ae.jsx)("div",{className:"wiw-clue-body",children:F?(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("div",{className:"wiw-full-title",children:c}),x&&(0,Ae.jsx)("div",{className:"wiw-paragraph",children:x}),(0,Ae.jsx)("button",{className:"wiw-link",onClick:()=>e("/article/".concat(encodeURIComponent(c.replace(/ /g,"_")))),children:"Open full article \u2192"})]}):(0,Ae.jsx)("div",{className:"muted",children:"Keep guessing!"})})]})]})]})]})},Sn=()=>{const e=ee(),[t,n]=(0,a.useState)(!0),[r,l]=(0,a.useState)(null),[o,i]=(0,a.useState)(null),[s,c]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),[f,h]=(0,a.useState)(null),[m,p]=(0,a.useState)(!1),[g,v]=(0,a.useState)(null),y=(0,a.useRef)(null),b=(0,a.useRef)(null),w=(0,a.useRef)(!1),[x,k]=(0,a.useState)(null),[S,C]=(0,a.useState)(!0),[N,E]=(0,a.useState)(null),[j,_]=(0,a.useState)(null),[T,R]=(0,a.useState)(null),[P,L]=(0,a.useState)(null),I=(0,a.useRef)(null),A=(0,a.useRef)(!1),D=(0,a.useRef)(new Map),O=(0,a.useRef)(new Map),M=fn(),F=(0,a.useCallback)((async e=>{const t=[e.featured_article.title,...e.surrounding_articles.map((e=>e.title)),...e.connections.map((e=>e.connectingArticle))];console.log("[Preload] Preloading extracts for ".concat(t.length," articles:"),t);const n=t.map((async e=>{const t=D.current.has(e),n=O.current.has(e);if(t&&n)console.log('[Preload] Already cached: "'.concat(e,'"'));else try{const r=[];if(t||r.push(rt(e).then((e=>({type:"extract",value:e})))),n||r.push(at(e).then((e=>({type:"description",value:e})))),0===r.length)return;(await Promise.all(r)).forEach((t=>{if("extract"===t.type){const n=t.value;n?(console.log('[Preload] Successfully loaded extract for "'.concat(e,'" (').concat(n.length," chars)")),D.current.set(e,n)):(console.warn('[Preload] No extract returned for "'.concat(e,'"')),D.current.set(e,null))}else if("description"===t.type){const n=t.value;n?(console.log('[Preload] Successfully loaded description for "'.concat(e,'"')),O.current.set(e,n)):(console.warn('[Preload] No description returned for "'.concat(e,'"')),O.current.set(e,null))}}))}catch(r){console.error('[Preload] Error preloading extract/description for "'.concat(e,'":'),r),t||D.current.set(e,null),n||O.current.set(e,null)}}));Promise.all(n).then((()=>{console.log("[Preload] Finished preloading all extracts")})).catch((e=>{console.error("[Preload] Error preloading extracts:",e)}))}),[]);(0,a.useEffect)((()=>{(async()=>{n(!0),l(null);try{!function(e){try{const t=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);r&&r.startsWith("knowledgeWeb_gameState_")&&r.replace("knowledgeWeb_gameState_","")!==e&&t.push(r)}t.forEach((e=>{localStorage.removeItem(e),console.log("Cleaned up old Knowledge Web game state: ".concat(e))})),t.length>0&&console.log("Cleaned up ".concat(t.length," old Knowledge Web game state(s)"))}catch(r){console.error("Error cleaning up old Knowledge Web game states:",r)}}(M);const e=hn(M),t=await pn();if(!t)return l("Couldn't load today's puzzle. The featured article may not have enough connections. Please try again later."),void n(!1);if(i(t),e&&e.puzzle_id===M)c(e),(e.current_connections.some((e=>null!==e.connecting_article))||e.submissions.length>0)&&C(!1);else{const e={puzzle_id:M,submissions:[],current_connections:t.surrounding_articles.map((e=>({surrounding_article_id:e.id,connecting_article:null}))),is_complete:!1,final_score:null,perfect_first_attempt:!1,attempts_remaining:999};c(e),mn(M,e)}F(t),n(!1)}catch(e){console.error("Error loading knowledge web game:",e);const t=e instanceof Error?e.message:"Couldn't load today's puzzle. Please try again.";l(t),n(!1)}})()}),[M,F]);const z=()=>{d(null),h(null)},q=(0,a.useCallback)((e=>{let t=e;if(o)if(e===o.featured_article.title||e.toLowerCase()===o.featured_article.title.toLowerCase())t=o.featured_article.title;else{const n=o.surrounding_articles.find((t=>t.title===e||t.title.toLowerCase()===e.toLowerCase()));if(n)t=n.title;else{const n=o.connections.find((t=>t.connectingArticle===e||t.connectingArticle.toLowerCase()===e.toLowerCase()));n?t=n.connectingArticle:console.warn('[Preview] Could not find exact title for "'.concat(e,'" in puzzle data, using as-is'))}}console.log('[Preview] Loading extract for article: "'.concat(e,'" -> normalized to: "').concat(t,'"'));const n=t||e;if(!n||""===n.trim())return void console.error('[Preview] Invalid article title: "'.concat(e,'"'));const r=D.current.get(n),a=O.current.get(n);if(void 0!==r&&_(r),void 0!==a&&R(a),void 0!==r&&void 0!==a)return void console.log('[Preview] Found cached extract and description for "'.concat(n,'"'));if(A.current)return void console.log("[Preview] Already loading extract, skipping");A.current=!0,console.log('[Preview] Fetching missing data from API for "'.concat(n,'"'));const l=[];void 0===r&&l.push(rt(n).then((e=>({type:"extract",value:e})))),void 0===a&&l.push(at(n).then((e=>({type:"description",value:e})))),Promise.all(l).then((e=>{e.forEach((e=>{if("extract"===e.type){const t=e.value;t?(console.log('[Preview] Successfully loaded extract for "'.concat(n,'" (').concat(t.length," chars)")),D.current.set(n,t),_(t)):(console.warn('[Preview] No extract returned for "'.concat(n,'" - API returned null')),D.current.set(n,null),_(null))}else if("description"===e.type){const t=e.value;t?(console.log('[Preview] Successfully loaded description for "'.concat(n,'"')),O.current.set(n,t),R(t)):(console.warn('[Preview] No description returned for "'.concat(n,'" - API returned null')),O.current.set(n,null),R(null))}}))})).catch((e=>{console.error('[Preview] Error loading extract/description for "'.concat(n,'":'),e),console.error("[Preview] Error details:",e instanceof Error?e.message:String(e)),void 0===r&&(D.current.set(n,null),_(null)),void 0===a&&(O.current.set(n,null),R(null))})).finally((()=>{A.current=!1}))}),[o]),U=(0,a.useCallback)(((e,t)=>{if(u||m||w.current)return void console.log('[Preview] Skipping preview for "'.concat(t,'" - dragging active'));if("clientX"in e&&u)return void console.log('[Preview] Skipping preview for "'.concat(t,'" - mouse drag active'));if(console.log('[Preview] Starting preview for article: "'.concat(t,'"')),!e.currentTarget)return;let n,a;if("touches"in e&&e.touches.length>0)n=e.touches[0].clientX,a=e.touches[0].clientY;else if("clientX"in e)n=e.clientX,a=e.clientY;else{let t;try{t=e.currentTarget.getBoundingClientRect(),n=t.left+t.width/2,a=t.top+t.height/2}catch(r){return void console.warn("Could not get bounding rect for preview:",r)}}const l=280,o=300,i=12,s=window.innerWidth,c=window.innerHeight;let d=n+16,f=a+16;d+l>s-i?(d=n-l-16,d<i&&(d=s-l-i)):d<i&&(d=i),f+o>c-i?(f=a-o-16,f<i&&(f=c-o-i)):f<i&&(f=i),d=Math.max(i,Math.min(d,s-l-i)),f=Math.max(i,Math.min(f,c-o-i)),L({x:d,y:f}),E(t),q(t)}),[q,u,m]),H=(0,a.useCallback)((()=>{E(null),_(null),R(null),L(null),I.current&&(clearTimeout(I.current),I.current=null)}),[]),W=(0,a.useCallback)(((e,t)=>{e.stopPropagation(),console.log('[TouchTap] Tapped on article: "'.concat(t,'"'));let n=t;if(o)if(t===o.featured_article.title||t.toLowerCase()===o.featured_article.title.toLowerCase())n=o.featured_article.title;else{const e=o.surrounding_articles.find((e=>e.title===t||e.title.toLowerCase()===t.toLowerCase()));if(e)n=e.title;else{const e=o.connections.find((e=>e.connectingArticle===t||e.connectingArticle.toLowerCase()===t.toLowerCase()));e&&(n=e.connectingArticle)}}n!==t&&console.log('[TouchTap] Normalized "'.concat(t,'" to "').concat(n,'"')),U(e,n)}),[U,o]),B=((0,a.useCallback)((()=>{I.current&&(clearTimeout(I.current),I.current=null)}),[]),(0,a.useCallback)(((e,t)=>{if(!u||!s||!o)return;if(void 0!==t){const n=s.current_connections.map((n=>{if(n.surrounding_article_id===e)return Be(Be({},n),{},{connecting_article:u});if(n.surrounding_article_id===t){const t=s.current_connections.find((t=>t.surrounding_article_id===e));return Be(Be({},n),{},{connecting_article:(null===t||void 0===t?void 0:t.connecting_article)||null})}return n})),r=Be(Be({},s),{},{current_connections:n});return c(r),mn(M,r),d(null),void h(null)}const n=s.current_connections.map((t=>t.surrounding_article_id===e?Be(Be({},t),{},{connecting_article:u}):t)),r=Be(Be({},s),{},{current_connections:n});c(r),mn(M,r),d(null),h(null)}),[u,s,o,M])),V=(e,t,n)=>{H();const r=e.touches[0];y.current={x:r.clientX,y:r.clientY,article:t,fromSlot:n},w.current=!1,b.current=e.currentTarget};(0,a.useEffect)((()=>{const e=e=>{if(!y.current)return;const t=e.touches[0],n=Math.abs(t.clientX-y.current.x),r=Math.abs(t.clientY-y.current.y),a=r>n,l=n>15||r>15,o=document.elementFromPoint(t.clientX,t.clientY),i=null===o||void 0===o?void 0:o.closest(".knowledge-web-pool-items");if((!(!a&&i&&n>5&&r<10)||m)&&(l&&!m&&(H(),E(null),_(null),L(null),d(y.current.article),v(y.current.fromSlot||null),p(!0),w.current=!0,b.current&&b.current.classList.add("touching"),I.current&&(clearTimeout(I.current),I.current=null)),m)){e.preventDefault(),k({x:t.clientX,y:t.clientY});const n=null===o||void 0===o?void 0:o.closest(".knowledge-web-connection-slot");if(n){const e=n.closest(".knowledge-web-connection-slot-wrapper");if(e){const t=e.getAttribute("data-slot-id");if(t){var s;const e=parseInt(t);e!==(null===(s=y.current)||void 0===s?void 0:s.fromSlot)&&h(e)}}}else h(null)}},t=e=>{if(!y.current)return;const t=e.changedTouches[0],n=document.elementFromPoint(t.clientX,t.clientY),r=null===n||void 0===n?void 0:n.closest(".knowledge-web-connection-slot");if(r){const e=r.closest(".knowledge-web-connection-slot-wrapper");if(e){const t=e.getAttribute("data-slot-id");if(t){var a;const e=parseInt(t);if(e===(null===(a=y.current)||void 0===a?void 0:a.fromSlot))return y.current=null,p(!1),d(null),v(null),h(null),k(null),b.current&&b.current.classList.remove("touching"),void(b.current=null);let n=!1;if(s&&s.submissions.length>0){const t=s.submissions[s.submissions.length-1].results.find((t=>t.surrounding_article_id===e));n=(null===t||void 0===t?void 0:t.is_correct)||!1}var l;if(!n)B(e,null===(l=y.current)||void 0===l?void 0:l.fromSlot)}}}y.current=null,p(!1),d(null),v(null),h(null),k(null),b.current&&b.current.classList.remove("touching"),b.current=null};return document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",t),document.addEventListener("touchcancel",t),document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",t),document.addEventListener("touchcancel",t),()=>{document.removeEventListener("touchmove",e),document.removeEventListener("touchend",t),document.removeEventListener("touchcancel",t)}}),[m,B,s]);const $=(0,a.useCallback)((e=>{if(!s||0===s.submissions.length)return!1;const t=s.submissions[s.submissions.length-1].results.find((t=>t.surrounding_article_id===e));return(null===t||void 0===t?void 0:t.is_correct)||!1}),[s]);if(t)return(0,Ae.jsx)("div",{className:"knowledge-web-page",children:(0,Ae.jsx)("div",{className:"knowledge-web-loading",children:"Loading today's knowledge web..."})});if(r)return(0,Ae.jsx)("div",{className:"knowledge-web-page",children:(0,Ae.jsxs)("div",{className:"knowledge-web-error",children:[(0,Ae.jsx)("div",{className:"knowledge-web-error-title",children:"Couldn't load the game"}),(0,Ae.jsx)("div",{className:"knowledge-web-error-body",children:r}),(0,Ae.jsx)("button",{className:"knowledge-web-primary-btn",onClick:()=>window.location.reload(),children:"Retry"})]})});if(!o||!s)return null;const Y=s.current_connections.every((e=>null!==e.connecting_article)),K=(()=>{if(!o||!s)return[];const e=s.current_connections.filter((e=>null!==e.connecting_article)).map((e=>e.connecting_article));return o.answer_pool.filter((t=>!e.includes(t)))})(),G=s.submissions.length,Q=s.submissions.length>0&&s.submissions[s.submissions.length-1].results.every((e=>e.is_correct)),X=Y&&(!Q||0===s.submissions.length);return S?(0,Ae.jsx)("div",{className:"knowledge-web-splash",children:(0,Ae.jsxs)("div",{className:"knowledge-web-splash-content",children:[(0,Ae.jsx)("h1",{className:"knowledge-web-splash-title",children:"Knowledge Web"}),(0,Ae.jsxs)("div",{className:"knowledge-web-splash-instructions",children:[(0,Ae.jsx)("h3",{className:"knowledge-web-splash-instructions-title",children:"How to Play"}),(0,Ae.jsxs)("ol",{className:"knowledge-web-splash-instructions-list",children:[(0,Ae.jsx)("li",{children:"Complete the knowledge web by matching articles to fill in the missing connections"}),(0,Ae.jsx)("li",{children:"Drag articles from the pool to the connection slots along each spoke"}),(0,Ae.jsx)("li",{children:"Each connection links the featured article to a surrounding topic"}),(0,Ae.jsx)("li",{children:"Fill all 4 connections, then check your answers"})]})]}),(0,Ae.jsx)("button",{className:"knowledge-web-splash-start-btn",onClick:()=>C(!1),children:"Start Puzzle"})]})}):(0,Ae.jsxs)("div",{className:"knowledge-web-page knowledge-web-immersive",children:[(0,Ae.jsx)("button",{className:"knowledge-web-close",onClick:()=>e("/games"),title:"Close",children:(0,Ae.jsx)("i",{className:"fas fa-times"})}),G>0&&(0,Ae.jsxs)("div",{className:"knowledge-web-attempts-counter",children:["Try ",G]}),(0,Ae.jsxs)("div",{className:"knowledge-web-visualization",onClick:e=>{e.target.closest(".knowledge-web-preview-card")||H()},children:[(0,Ae.jsx)("div",{className:"knowledge-web-center",children:(0,Ae.jsxs)("div",{className:"knowledge-web-center-node ".concat(o.featured_article.thumbnail?"":"no-image"),onTouchStart:e=>{W(e,o.featured_article.title)},onTouchEnd:H,onTouchCancel:H,onClick:e=>{e.stopPropagation(),N===o.featured_article.title?H():U(e,o.featured_article.title)},children:[o.featured_article.thumbnail&&(0,Ae.jsx)("img",{src:o.featured_article.thumbnail,alt:o.featured_article.title,className:"knowledge-web-node-image"}),(0,Ae.jsxs)("div",{className:"knowledge-web-center-node-content",children:[(0,Ae.jsx)("div",{className:"knowledge-web-node-title",children:o.featured_article.title}),o.featured_article.description&&(0,Ae.jsx)("div",{className:"knowledge-web-center-node-description",children:o.featured_article.description})]})]})}),o.surrounding_articles.map(((e,t)=>{const n=(e=>{if(!s)return null;const t=s.current_connections.find((t=>t.surrounding_article_id===e));return(null===t||void 0===t?void 0:t.connecting_article)||null})(e.id),r=$(e.id),a=f===e.id,l=n?o.connections.find((e=>e.connectingArticle===n)):o.connections.find((t=>t.surroundingArticleId===e.id));n&&!l&&console.warn('[KnowledgeWeb] Could not find connectionInfo for connection: "'.concat(n,'"'));const i=50,c=50;let u,m,p,y,b,w;return"top-left"===e.position?(u=30,m=30,p=15,y=15,b=15,w=15):"top-right"===e.position?(u=70,m=30,p=85,y=15,b=85,w=15):"bottom-left"===e.position?(u=30,m=70,p=15,y=85,b=15,w=85):(u=70,m=70,p=85,y=85,b=85,w=85),(0,Ae.jsxs)("div",{className:"knowledge-web-spoke",children:[(0,Ae.jsx)("svg",{className:"knowledge-web-spoke-line",children:(0,Ae.jsx)("line",{x1:"".concat(i,"%"),y1:"".concat(c,"%"),x2:"".concat(b,"%"),y2:"".concat(w,"%"),stroke:"#d1d5db",strokeWidth:"2"})}),(0,Ae.jsx)("div",{className:"knowledge-web-connection-slot-wrapper","data-slot-id":e.id.toString(),style:{left:"".concat(u,"%"),top:"".concat(m,"%"),transform:"translate(-50%, -50%)"},children:(0,Ae.jsx)("div",{className:"knowledge-web-connection-slot ".concat(n?"filled":""," ").concat(r?"locked":""," ").concat(a?"hovered":""," ").concat(!n||null!==l&&void 0!==l&&l.thumbnail?"":"no-image"),draggable:null!==n&&!r,onDragStart:t=>{n&&!r&&(H(),d(n),v(e.id),t.dataTransfer.effectAllowed="move")},onDragEnd:()=>{d(null),v(null),h(null)},onDragOver:t=>{t.preventDefault(),r||h(e.id)},onDragLeave:()=>h(null),onDrop:t=>{t.preventDefault(),r||B(e.id,g||void 0)},onTouchStart:t=>{n&&!r&&V(t,n,e.id),n&&W(t,n)},onTouchEnd:H,onTouchCancel:H,onClick:e=>{e.stopPropagation(),n&&(N===n?H():U(e,n))},children:n?(0,Ae.jsxs)(Ae.Fragment,{children:[(null===l||void 0===l?void 0:l.thumbnail)&&(0,Ae.jsx)("img",{src:l.thumbnail,alt:n,className:"knowledge-web-connection-image"}),(0,Ae.jsx)("span",{className:"knowledge-web-connection-text",children:(null===l||void 0===l?void 0:l.connectingArticle)||n})]}):(0,Ae.jsxs)("span",{className:"knowledge-web-placeholder",children:[(0,Ae.jsx)("i",{className:"fas fa-link"}),"?"]})})}),(0,Ae.jsx)("div",{className:"knowledge-web-surrounding-node-wrapper",style:{left:"".concat(p,"%"),top:"".concat(y,"%"),transform:"translate(-50%, -50%)"},children:(0,Ae.jsxs)("div",{className:"knowledge-web-surrounding-node ".concat(e.thumbnail?"":"no-image"),onTouchStart:t=>{t.stopPropagation(),W(t,e.title)},onTouchEnd:e=>{e.stopPropagation(),H()},onTouchCancel:e=>{e.stopPropagation(),H()},onClick:t=>{t.stopPropagation(),N===e.title?H():U(t,e.title)},children:[e.thumbnail&&(0,Ae.jsx)("img",{src:e.thumbnail,alt:e.title,className:"knowledge-web-node-image"}),(0,Ae.jsx)("div",{className:"knowledge-web-node-title",children:e.title})]})})]},e.id)}))]}),(0,Ae.jsxs)("div",{className:"knowledge-web-pool",children:[(0,Ae.jsx)("h3",{className:"knowledge-web-pool-title",children:"Available Connections:"}),(0,Ae.jsx)("div",{className:"knowledge-web-pool-items",children:K.map((e=>{const t=o.connections.find((t=>t.connectingArticle===e));return(0,Ae.jsxs)("div",{className:"knowledge-web-pool-item ".concat(null!==t&&void 0!==t&&t.thumbnail?"":"no-image"),draggable:!0,onDragStart:()=>(e=>{I.current&&(clearTimeout(I.current),I.current=null),d(e),H()})(e),onDragEnd:z,onTouchStart:t=>{V(t,e),W(t,e)},onTouchEnd:e=>{!m&&y.current&&(H(),y.current=null)},onTouchCancel:e=>{!m&&y.current&&(H(),y.current=null)},onContextMenu:e=>{e.preventDefault()},onClick:t=>{t.stopPropagation(),N===e?H():U(t,e)},children:[(null===t||void 0===t?void 0:t.thumbnail)&&(0,Ae.jsx)("img",{src:t.thumbnail,alt:e,className:"knowledge-web-pool-item-image"}),(0,Ae.jsx)("span",{className:"knowledge-web-pool-item-text",children:(null===t||void 0===t?void 0:t.connectingArticle)||e})]},e)}))})]}),X&&(0,Ae.jsx)("div",{className:"knowledge-web-submit-container",children:(0,Ae.jsx)("button",{className:"knowledge-web-submit-btn",onClick:()=>{if(!s||!o)return;if(!s.current_connections.every((e=>null!==e.connecting_article)))return void alert("Please fill all 4 connections before submitting.");const t=function(e,t){return t.map((t=>{const n=e.connections.find((e=>e.surroundingArticleId===t.surrounding_article_id));return{surrounding_article_id:t.surrounding_article_id,is_correct:(null===n||void 0===n?void 0:n.connectingArticle)===t.connecting_article}}))}(o,s.current_connections.map((e=>({surrounding_article_id:e.surrounding_article_id,connecting_article:e.connecting_article})))),n=s.submissions.length+1,r=t.every((e=>e.is_correct)),a=1===n,l={submission_number:n,timestamp:(new Date).toISOString(),connections:s.current_connections.map((e=>({surrounding_article_id:e.surrounding_article_id,connecting_article:e.connecting_article}))),results:t},i=Be(Be({},s),{},{submissions:[...s.submissions,l],attempts_remaining:s.attempts_remaining-1,is_complete:r,final_score:r?t.filter((e=>e.is_correct)).length:null,perfect_first_attempt:a&&r});r||(i.current_connections=i.current_connections.map((e=>{const n=t.find((t=>t.surrounding_article_id===e.surrounding_article_id));return null!==n&&void 0!==n&&n.is_correct?e:Be(Be({},e),{},{connecting_article:null})}))),c(i),mn(M,i),r&&e("/games/knowledge-web/results",{state:{puzzle:o,gameState:i}})},children:0===s.submissions.length?"Check Answers":"Check Again"})}),m&&u&&x&&o&&(0,Ae.jsx)("div",{className:"knowledge-web-drag-indicator",style:{left:"".concat(x.x,"px"),top:"".concat(x.y,"px")},children:(()=>{let e;const t=o.connections.find((e=>e.connectingArticle===u));return e=null===t||void 0===t?void 0:t.thumbnail,(0,Ae.jsx)(Ae.Fragment,{children:e?(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("img",{src:e,alt:u,className:"knowledge-web-drag-indicator-image"}),(0,Ae.jsx)("span",{className:"knowledge-web-drag-indicator-text",children:(null===t||void 0===t?void 0:t.connectingArticle)||u})]}):(0,Ae.jsx)("span",{className:"knowledge-web-drag-indicator-text",children:(null===t||void 0===t?void 0:t.connectingArticle)||u})})})()}),N&&P&&(0,Ae.jsx)("div",{className:"knowledge-web-preview-card",style:{left:"".concat(P.x,"px"),top:"".concat(P.y,"px")},onMouseEnter:e=>e.stopPropagation(),onTouchStart:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),children:(()=>{let e;if(N===o.featured_article.title||N.toLowerCase()===o.featured_article.title.toLowerCase())e=o.featured_article.thumbnail;else{const t=o.surrounding_articles.find((e=>e.title===N||e.title.toLowerCase()===N.toLowerCase()));if(t)e=t.thumbnail;else{const t=o.connections.find((e=>e.connectingArticle===N||e.connectingArticle.toLowerCase()===N.toLowerCase()));e=null===t||void 0===t?void 0:t.thumbnail}}return(0,Ae.jsxs)(Ae.Fragment,{children:[e&&(0,Ae.jsx)("img",{src:e,alt:N,className:"knowledge-web-preview-image",onClick:e=>{e.stopPropagation(),H()},onTouchStart:e=>{e.stopPropagation(),H()},style:{cursor:"pointer"}}),(0,Ae.jsx)("h3",{className:"knowledge-web-preview-title",children:N}),T&&(0,Ae.jsx)("p",{className:"knowledge-web-preview-description",children:T}),j?(0,Ae.jsx)("p",{className:"knowledge-web-preview-extract",children:j}):T?null:(0,Ae.jsx)("p",{className:"knowledge-web-preview-loading",children:"Loading..."})]})})()})]})},Cn=()=>{const e=ee(),t=J(),[n,r]=(0,a.useState)(null),[l,o]=(0,a.useState)(null),[i,s]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[d,f]=(0,a.useState)({}),[h,m]=(0,a.useState)({}),[p,g]=(0,a.useState)(!0);if((0,a.useEffect)((()=>{const n=t.state;if(n&&n.puzzle&&n.gameState){r(n.puzzle),o(n.gameState);(async()=>{try{const[t,r]=await Promise.all([et(n.puzzle.featured_article.title),Qe(n.puzzle.featured_article.title)]);if(s(t),null!==r&&void 0!==r&&r.extract){const e=r.extract.split("\n\n").filter((e=>e.trim().length>0)).slice(0,3).join("\n\n"),t=e.length>800?e.substring(0,800).trim()+"...":e;u(t)}const a={};for(const e of n.puzzle.connections){const n=sn(t,e.connectingArticle);n&&(a[e.connectingArticle]=n)}f(a);const l={};for(const o of n.puzzle.connections){const t=n.puzzle.surrounding_articles.find((e=>e.id===o.surroundingArticleId));if(t)try{console.log("[ResultsPage] Fetching connector content for: ".concat(o.connectingArticle)),console.log("[ResultsPage] Looking for node article: ".concat(t.title));const e=await et(o.connectingArticle);console.log("[ResultsPage] Got connector content, length: ".concat(e.length));const n=cn(e,t.title);n?(console.log("[ResultsPage] Found context for ".concat(t.title," in ").concat(o.connectingArticle)),l[o.connectingArticle]=n):console.warn("[ResultsPage] No context found for ".concat(t.title," in ").concat(o.connectingArticle))}catch(e){console.error("Error fetching context for ".concat(o.connectingArticle,":"),e)}}m(l),g(!1)}catch(e){console.error("Error loading results data:",e),g(!1)}})()}else e("/games/knowledge-web")}),[t,e]),p||!n||!l)return(0,Ae.jsx)("div",{className:"knowledge-web-results-page",children:(0,Ae.jsx)("div",{className:"knowledge-web-results-loading",children:"Loading results..."})});const v=l.submissions[l.submissions.length-1],y=(v.results.filter((e=>e.is_correct)).length,l.submissions.length);return(0,Ae.jsxs)("div",{className:"knowledge-web-results-page",children:[(0,Ae.jsx)("button",{className:"knowledge-web-results-close",onClick:()=>e("/games"),children:(0,Ae.jsx)("i",{className:"fas fa-times"})}),(0,Ae.jsxs)("div",{className:"knowledge-web-results-container",children:[(0,Ae.jsxs)("div",{className:"knowledge-web-results-score-section",children:[(0,Ae.jsx)("h2",{className:"knowledge-web-results-title",children:"Your Results"}),(0,Ae.jsxs)("div",{className:"knowledge-web-results-attempts",children:["Completed in ",y," ",1===y?"try":"tries"]})]}),(0,Ae.jsx)("div",{className:"knowledge-web-results-spokes",children:n.connections.map(((t,r)=>{const a=n.surrounding_articles.find((e=>e.id===t.surroundingArticleId)),o=v.results.find((e=>e.surrounding_article_id===t.surroundingArticleId));null===o||void 0===o||o.is_correct;let i=null;for(let e=0;e<l.submissions.length;e++){const n=l.submissions[e],r=n.results.find((e=>e.surrounding_article_id===t.surroundingArticleId));if(null!==r&&void 0!==r&&r.is_correct){i=n.submission_number;break}}const s=d[t.connectingArticle],c=h[t.connectingArticle];return(0,Ae.jsxs)("div",{className:"knowledge-web-results-spoke",children:[(0,Ae.jsxs)("div",{className:"knowledge-web-results-spoke-cards",children:[(0,Ae.jsxs)("div",{className:"knowledge-web-results-spoke-card",onClick:()=>e("/article/".concat(Lt(n.featured_article.title))),children:[n.featured_article.thumbnail?(0,Ae.jsx)("img",{src:n.featured_article.thumbnail,alt:n.featured_article.title,className:"knowledge-web-results-spoke-card-image"}):(0,Ae.jsx)("div",{className:"knowledge-web-results-spoke-card-no-image",children:(0,Ae.jsx)("i",{className:"fas fa-link"})}),(0,Ae.jsx)("div",{className:"knowledge-web-results-spoke-card-title",children:n.featured_article.title})]}),(0,Ae.jsx)("div",{className:"knowledge-web-results-spoke-arrow",children:(0,Ae.jsx)("i",{className:"fas fa-arrow-right"})}),(0,Ae.jsxs)("div",{className:"knowledge-web-results-spoke-card",onClick:()=>e("/article/".concat(Lt(t.connectingArticle))),children:[t.thumbnail?(0,Ae.jsx)("img",{src:t.thumbnail,alt:t.connectingArticle,className:"knowledge-web-results-spoke-card-image"}):(0,Ae.jsx)("div",{className:"knowledge-web-results-spoke-card-no-image",children:(0,Ae.jsx)("i",{className:"fas fa-link"})}),(0,Ae.jsx)("div",{className:"knowledge-web-results-spoke-card-title",children:t.connectingArticle})]}),(0,Ae.jsx)("div",{className:"knowledge-web-results-spoke-arrow",children:(0,Ae.jsx)("i",{className:"fas fa-arrow-right"})}),a&&(0,Ae.jsxs)("div",{className:"knowledge-web-results-spoke-card",onClick:()=>e("/article/".concat(Lt(a.title))),children:[a.thumbnail?(0,Ae.jsx)("img",{src:a.thumbnail,alt:a.title,className:"knowledge-web-results-spoke-card-image"}):(0,Ae.jsx)("div",{className:"knowledge-web-results-spoke-card-no-image",children:(0,Ae.jsx)("i",{className:"fas fa-link"})}),(0,Ae.jsx)("div",{className:"knowledge-web-results-spoke-card-title",children:a.title})]})]}),null!==i&&(0,Ae.jsxs)("div",{className:"knowledge-web-results-spoke-try",children:["Correct on try ",i]}),(s||c)&&(0,Ae.jsxs)("div",{className:"knowledge-web-results-spoke-snippets",children:[s&&(0,Ae.jsxs)("div",{className:"knowledge-web-results-spoke-snippet",children:[(0,Ae.jsxs)("div",{className:"knowledge-web-results-spoke-snippet-label",children:["In ",n.featured_article.title,":"]}),s.sectionHeading&&(0,Ae.jsx)("div",{className:"knowledge-web-results-spoke-snippet-section",children:s.sectionHeading}),(0,Ae.jsx)("div",{className:"knowledge-web-results-spoke-snippet-content",dangerouslySetInnerHTML:{__html:(()=>{const e=(new DOMParser).parseFromString(s.html,"text/html");return e.querySelectorAll("a").forEach((t=>{if(!("true"===t.getAttribute("data-highlight"))){var n;const r=e.createElement("span");r.innerHTML=t.innerHTML,Array.from(t.attributes).forEach((e=>{"href"!==e.name&&"data-highlight"!==e.name&&r.setAttribute(e.name,e.value)})),r.style.cssText=t.style.cssText,null===(n=t.parentNode)||void 0===n||n.replaceChild(r,t)}})),e.body.innerHTML})()}})]}),c&&a&&(0,Ae.jsxs)("div",{className:"knowledge-web-results-spoke-snippet",children:[(0,Ae.jsxs)("div",{className:"knowledge-web-results-spoke-snippet-label",children:[t.connectingArticle," mentions ",a.title,":"]}),c.sectionHeading&&(0,Ae.jsx)("div",{className:"knowledge-web-results-spoke-snippet-section",children:c.sectionHeading}),(0,Ae.jsx)("div",{className:"knowledge-web-results-spoke-snippet-content",dangerouslySetInnerHTML:{__html:(()=>{const e=(new DOMParser).parseFromString(c.html,"text/html");return e.querySelectorAll("a").forEach((t=>{if(!("true"===t.getAttribute("data-highlight"))){var n;const r=e.createElement("span");r.innerHTML=t.innerHTML,Array.from(t.attributes).forEach((e=>{"href"!==e.name&&"data-highlight"!==e.name&&r.setAttribute(e.name,e.value)})),r.style.cssText=t.style.cssText,null===(n=t.parentNode)||void 0===n||n.replaceChild(r,t)}})),e.body.innerHTML})()}})]})]})]},r)}))})]})]})},Nn=()=>{const e=J(),t=e.pathname.startsWith("/games/linkquest"),n=e.pathname.startsWith("/games/what-in-the-wiki"),r=e.pathname.startsWith("/games/knowledge-web"),a=t||n||r;return(0,Ae.jsxs)(Ae.Fragment,{children:[!a&&(0,Ae.jsx)(De,{}),(0,Ae.jsxs)(ye,{children:[(0,Ae.jsx)(ge,{path:"/",element:(0,Ae.jsx)(pe,{to:"/games",replace:!0})}),(0,Ae.jsx)(ge,{path:"/explore",element:(0,Ae.jsx)(wt,{})}),(0,Ae.jsx)(ge,{path:"/search",element:(0,Ae.jsx)(Tt,{})}),(0,Ae.jsx)(ge,{path:"/history",element:(0,Ae.jsx)(Gt,{})}),(0,Ae.jsx)(ge,{path:"/games",element:(0,Ae.jsx)(gn,{})}),(0,Ae.jsx)(ge,{path:"/games/linkquest",element:(0,Ae.jsx)(vn,{})}),(0,Ae.jsx)(ge,{path:"/games/linkquest/results",element:(0,Ae.jsx)(yn,{})}),(0,Ae.jsx)(ge,{path:"/games/linkquest/explore",element:(0,Ae.jsx)(bn,{})}),(0,Ae.jsx)(ge,{path:"/games/what-in-the-wiki",element:(0,Ae.jsx)(kn,{})}),(0,Ae.jsx)(ge,{path:"/games/knowledge-web",element:(0,Ae.jsx)(Sn,{})}),(0,Ae.jsx)(ge,{path:"/games/knowledge-web/results",element:(0,Ae.jsx)(Cn,{})}),(0,Ae.jsx)(ge,{path:"/article/:title",element:(0,Ae.jsx)(Xt,{})})]})]})},En=()=>(0,Ae.jsx)(je,{basename:"/wikipedia-app-prototype",children:(0,Ae.jsx)(Nn,{})}),jn=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:l,getTTFB:o}=t;n(e),r(e),a(e),l(e),o(e)}))};o.createRoot(document.getElementById("root")).render((0,Ae.jsx)(a.StrictMode,{children:(0,Ae.jsx)(En,{})})),jn()})();
//# sourceMappingURL=main.e3d991af.js.map